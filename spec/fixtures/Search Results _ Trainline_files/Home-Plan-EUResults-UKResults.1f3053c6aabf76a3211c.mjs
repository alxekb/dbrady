"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[52159],{81295:(e,n,a)=>{a.d(n,{Z:()=>d});var r=a(50093),t=a(29901),i=a(98318),o=a(23394);const l=r.StyleSheet.create({default:{backgroundColor:i.dp_app_backdrop_base,border:"solid 1px ".concat(i.dp_app_border_dull),borderRadius:"0 0 ".concat(o.E0.m," ").concat(o.E0.m),boxShadow:"0 -2px 4px 0 rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",width:"100%"}});var s=a(25875),c=e=>{var{for:n,tabId:a,id:i,focusable:o=!0,skin:s,children:c,styleSheet:d}=e;return t.createElement("div",{className:(0,r.css)([l[s],d]),id:i,"aria-labelledby":a||n,role:"tabpanel",tabIndex:o?0:void 0},c)};c.defaultProps=s.l;const d=c},16947:(e,n,a)=>{a.d(n,{P:()=>i,U:()=>o});var r=a(23394),t=a(52068),i={title:{fontFamily:t.R.brand.face.fontFamily,fontSize:"1.286em",lineHeight:"1.286em",letterSpacing:-.3},heading:{fontFamily:t.R.body.face.fontFamily,fontSize:"1.143em",lineHeight:"1.714em",letterSpacing:-.3},text:{fontFamily:t.R.body.face.fontFamily,fontSize:"1em",lineHeight:"1.429em",letterSpacing:-.3},caption:{fontFamily:t.R.body.face.fontFamily,fontSize:"0.8571em",lineHeight:"1.143em",letterSpacing:-.3},smallCaption:{fontFamily:t.R.body.face.fontFamily,fontSize:"0.7857em",lineHeight:"1em",letterSpacing:-.3},tiny:{fontFamily:t.R.body.face.fontFamily,fontSize:"0.7143em",lineHeight:"1.2em",letterSpacing:-.3}},o={isCheapest:{backgroundColor:r.O9.palette.yellow_100,paddingLeft:r.E0.m,paddingRight:r.E0.m,borderRadius:r.E0.m}}},20874:(e,n,a)=>{a.d(n,{Z:()=>E});var r=a(29901),t=a(98184),i=a(88543),o=a(50093),l=a(41344),s=a(50453),c=a(89034),d=a(37956),u=a(21168),m=a(6102),g=a(64321);const p=e=>r.createElement("svg",(0,g.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 522 100",preserveAspectRatio:"none"},e),r.createElement("g",{clipPath:"url(#clip0_825_10902)"},r.createElement("rect",{id:"background",x:"0.5",y:"0.5",width:"521",height:"99",rx:"3.5",fill:"#E2F6F0",stroke:"#A0DFD1"}),r.createElement("rect",{id:"ground",y:"95",width:"522",height:"7",fill:"#00705F"}),r.createElement("g",{id:"tree1"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.7467 60.7955C33.7467 58.027 31.7324 55.7642 29.1797 55.5647C29.972 54.6337 30.4593 53.4017 30.4593 52.0455C30.4593 49.1457 28.2519 46.7955 25.5283 46.7955C25.5283 43.8957 23.3209 41.5455 20.5973 41.5455H17.31C14.5873 41.5455 12.379 43.8957 12.379 46.7955C9.65625 46.7955 7.44798 49.1457 7.44798 52.0455C7.44798 52.7306 7.57537 53.3833 7.79973 53.9836C5.70405 54.5891 4.16064 56.6226 4.16064 59.0455C4.16064 61.4683 5.70405 63.5018 7.79973 64.1073C7.57537 64.7076 7.44798 65.3603 7.44798 66.0455C7.44798 68.9443 9.65625 71.2955 12.379 71.2955H25.5283C28.2519 71.2955 30.4593 68.9443 30.4593 66.0455C30.4593 65.944 30.4503 65.8451 30.4454 65.7462C32.3668 65.0287 33.7467 63.0862 33.7467 60.7955Z",fill:"#00705F"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2824 64.9086C25.6111 64.5297 25.6079 64.0843 25.2561 63.7107C24.9052 63.3362 24.4869 63.3327 24.131 63.6827L24.1253 63.6766L20.2355 67.818L19.7474 58.4371C19.6898 57.3346 18.162 57.3363 18.1062 58.4388L17.8867 62.7972L15.4253 60.1766L15.4204 60.1827C15.0645 59.8327 14.6462 59.8362 14.2953 60.2107C13.9436 60.5843 13.9403 61.0297 14.269 61.4086L14.2633 61.4138L17.7684 65.1457L16.5348 89.6238C16.5093 90.1243 16.8841 90.5452 17.355 90.5452H20.5511C21.022 90.5452 21.3968 90.1235 21.3713 89.6221L20.358 70.163L25.2873 64.9138L25.2824 64.9086Z",fill:"#003E34"})),r.createElement("g",{id:"train",transform:"translate(-70)"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55.4277 79.0055C49.1925 72.9206 41.0423 69.5453 32.5849 69.5453H25.3934H22.3117H12.5585H11.5316H3.18536H-20.7231V94.9999H11.5316H16.3347H22.3117H25.3934H50.1369H50.4477H51.2008V94.9923C58.9984 94.9032 61.7597 89.4648 61.7597 87.3635C61.7597 85.2444 60.079 83.5453 60.079 83.5453L55.4277 79.0055Z",fill:"white"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.98937 87.3635H-20.7231V94.9999H1.98937H50.1411H50.4519H51.2038V94.9923C58.999 94.9032 61.7591 89.4648 61.7591 87.3635H1.98937Z",fill:"#00A88F"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M55.4274 79.0057C49.1934 72.9207 41.0432 69.5455 32.5846 69.5455H31.8745C31.8745 78.2955 36.8055 83.5455 45.0239 83.5455H60.0787L55.4274 79.0057Z",fill:"#003E34"}),r.createElement("rect",{x:"5.57568",y:"73.3635",width:"19.1263",height:"10.1818",rx:"0.677749",fill:"#003E34"})),r.createElement("g",{id:"tree2"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.0227 54.75C14.0227 51.8503 11.8153 49.5 9.09172 49.5H4.93324C4.96282 49.2533 4.98255 49.0039 4.98255 48.7493V48.5008C4.98255 45.1871 2.45869 42.5 -0.653591 42.5H-2.70078C-3.37797 40.4621 -5.19916 39 -7.34497 39H-13.9196C-16.6424 39 -18.8506 41.3503 -18.8506 44.25H-18.9674C-21.8405 44.25 -24.2065 46.5408 -24.5542 49.5H-26.3639C-29.4761 49.5 -32 52.1871 -32 55.5008V55.7493C-32 58.915 -29.6948 61.5024 -26.7748 61.7281C-26.9622 62.282 -27.069 62.877 -27.069 63.5C-27.069 64.2543 -26.917 64.97 -26.6474 65.6175C-28.8096 66.4575 -30.3563 68.659 -30.3563 71.2508V71.4993C-30.3563 74.8129 -27.8325 77.5 -24.7202 77.5H-19.3857C-18.7085 79.5379 -16.8873 81 -14.7415 81H-0.770294C1.37551 81 3.1967 79.5379 3.87389 77.5H5.09925C8.21154 77.5 10.7354 74.8129 10.7354 71.4993V71.2508C10.7354 69.0878 9.65714 67.1978 8.0447 66.1416C8.70217 65.1459 9.09172 63.9349 9.09172 62.625C9.09172 61.6844 8.88626 60.7963 8.53041 60H9.09172C11.8153 60 14.0227 57.6489 14.0227 54.75Z",fill:"#00A88F"}))));var v=a(98318),f=a(36841),y=a(23394);const b=f.StyleSheet.create({bannerWrapper:{position:"relative",padding:y.W0.s4,width:"100%",borderTop:"1px solid ".concat(v.dp_app_border_base),borderBottom:"1px solid ".concat(v.dp_app_border_base),background:v.dp_app_text_inverted,[y.cy.min.m]:{marginBottom:y.W0.s4,borderTop:0,borderBottom:0}},background:{display:"none",[y.cy.min.m]:{display:"block",position:"absolute",width:"100%",height:"100%",top:0,left:0,":nth-child(1n) > g > #train":{animationDuration:"2s",animationTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",animationIterationCount:1,animationFillMode:"forwards",animationName:{"0%":{transform:"translateX(-70px)"},"100%":{transform:"translateX(-5px)"}}}}},content:{display:"grid",position:"relative",height:"100%",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(2, 1fr)",rowGap:y.W0.s2,justifyItems:"start",gridTemplateAreas:'\n      "message message message message message message compareButton"\n\n      "logos logos logos logos logos . compareButton"\n\n    ',[y.cy.min.m]:{gridTemplateAreas:'\n        ". message message message message message compareButton ."\n\n        ". logos logos logos logos . compareButton ."\n\n      '}},message:{gridArea:"message",alignSelf:"end",fontWeight:600,fontSize:"var(--DEPRECATED-14px)",color:v.dp_brand_primary_dull},logos:{gridArea:"logos",listStyle:"none",backgroundColor:v.dp_brand_white,borderRadius:24,width:"fit-content",maxWidth:"var(--DEPRECATED-322px)",display:"inline-grid",gridAutoFlow:"column",placeItems:"center",gap:y.W0.s6,":nth-child(1n) > li > span > svg":{width:"100%",height:"100%"},[y.cy.min.m]:{maxHeight:"2.275rem",padding:"".concat(y.W0.s2," ").concat(y.W0.s4)}},compareButton:{gridArea:"compareButton",justifySelf:"end",fontWeight:500,fontSize:0,lineHeight:0,color:v.dp_brand_neutral_core,textDecoration:"underline",backgroundColor:"transparent",display:"flex",alignItems:"center",cursor:"pointer",gap:y.W0.s1,[y.cy.min.m]:{fontSize:"0.9625rem",lineHeight:"inherit"}},chevron:{content:"",display:"inline-block",position:"relative",borderStyle:"solid",borderWidth:"0.1rem 0.1rem 0 0",height:"var(--DEPRECATED-7px)",width:"var(--DEPRECATED-7px)",top:"0.0875rem",verticalAlign:"top",left:0,transform:"rotate(45deg)"}});var C=a(60654),h=a(29763);const E=function(e){var{isPending:n}=e,{mobile:a}=(0,l.zw)(),[g,v]=(0,r.useState)(!1),{sendUKAggregationBannerClick:f,sendUKAggregationBannerImpression:y,sendAggregationBannerClick:E}=(0,h.e)(),{carriersLogos:k,route:S,label:T,experience:_}=(0,d.z)();(0,r.useEffect)((()=>{_!==C.Experiences.UK_TRAIN||g||(v(!0),y())}),[_,g,y,v]);var R=(0,i.useDispatch)(),H=S&&Object.values(m.Wr).find((e=>e===S)),P=r.useCallback((()=>{R((0,c.Ll)({type:u.e.CARRIERS_COMPARISON_MODAL,params:{comparisonRoute:H}})),_!==C.Experiences.UK_TRAIN?E(T):f()}),[]),x=e=>{var{children:n}=e;return a?r.createElement("div",{className:(0,o.css)(b.bannerWrapper),role:"button",tabIndex:0,onClick:P,onKeyDown:P},n):r.createElement("div",{className:(0,o.css)(b.bannerWrapper),"data-test":"banner-carrier-comparison"},n)};return r.createElement(x,null,r.createElement(p,{className:(0,o.css)(b.background)}),r.createElement("div",{className:(0,o.css)(b.content)},r.createElement("p",{className:(0,o.css)(b.message)},!a&&r.createElement(r.Fragment,null,"  "),r.createElement(t.FormattedMessage,{id:a?n?"page.results.carriersComparisonBanner.mobile.loading.text":"page.results.carriersComparisonBanner.mobile.text":"page.results.carriersComparisonBanner.text"})),r.createElement("ul",{className:(0,o.css)(b.logos)},null==k?void 0:k.map((e=>r.createElement("li",{key:e},r.createElement(s.pl,{name:e,testId:e}))))),r.createElement("button",{onClick:P,className:(0,o.css)(b.compareButton)},r.createElement(t.FormattedMessage,{id:"page.results.carriersComparisonBanner.button"}),r.createElement("span",{className:(0,o.css)(b.chevron)}))))}},91781:(e,n,a)=>{a.d(n,{ZP:()=>g,OP:()=>m});var r=a(23198),t=a(29901),i=a(88543),o=a(51282),l=a(92490),s=a(12052);const c=()=>{var e,n,{from:a,to:r}=(0,i.useSelector)(o.rE)||{},t=(0,i.useSelector)(l.Yu),c=(null===(e=t[null==a?void 0:a.id])||void 0===e?void 0:e.cityLocal)||(null==a?void 0:a.name),d=(null===(n=t[null==r?void 0:r.id])||void 0===n?void 0:n.cityLocal)||(null==r?void 0:r.name),u=Object.values(s.Gr).find((e=>{var{cities:n}=e;return(0,s.mg)(n,c,d)}));if(null!=u&&u.route)return u};var d={isCarriersComparisonRoute:!1,mobileExperimentKey:void 0,route:void 0,experience:void 0,carriersLogos:[],cities:void 0,isAvailableOnMobile:!1},u=(0,t.createContext)(d),m=()=>(0,t.useContext)(u);const g=e=>{var{children:n}=e,a=c(),i=a?(0,r.Z)({isCarriersComparisonRoute:!0},a):d;return t.createElement(u.Provider,{value:i},n)}},37956:(e,n,a)=>{a.d(n,{Z:()=>r.ZP,z:()=>r.OP});var r=a(91781)},29763:(e,n,a)=>{a.d(n,{e:()=>t});var r=a(26625),t=()=>{var{sendTracking:e}=(0,r.rS)();return{sendUKAggregationOverlayImpression:()=>{var n=(0,r.k1)({coreProperties:{},category:"uk aggregation banner",action:"uk aggregation overlay impression",label:"uk aggregation carrier comparision"});e(n)},sendUKAggregationBannerImpression:()=>{var n=(0,r.k1)({coreProperties:{},category:"uk aggregation banner",action:"uk aggregation banner impression",label:"uk aggregation impression"});e(n)},sendUKAggregationBannerClick:()=>{var n=(0,r.k1)({coreProperties:{},category:"uk aggregation banner",action:"uk aggregation banner clicked",label:"uk aggregation banner clicked"});e(n)},sendAggregationBannerClick:n=>{var a=(0,r.k1)({coreProperties:{},category:"results",action:"aggregation carrier comparison modal viewed",label:n||""});e(a)}}}},57545:(e,n,a)=>{a.d(n,{H:()=>k});var r,t,i=a(29901),o=a(88543),l=a(50989),s=a(66871),c={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"requestBody"}],kind:"Fragment",metadata:null,name:"usePriceReconciliationMutation",selections:t=[{alias:null,args:[{kind:"Variable",name:"requestBody",variableName:"requestBody"}],concreteType:null,kind:"LinkedField",name:"v1_performPriceReconciliation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"currencyCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isValid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],type:"v1_PartnerServerPriceReconciliationResponse",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"usePriceReconciliationMutation",selections:t},params:{id:"3220120dff193a4a24253b80800fb372",metadata:{},name:"usePriceReconciliationMutation",operationKind:"mutation",text:null}};c.hash="4f3380457be6b91b0b618ca89bb0fdea";const d=c;var u=a(12822),m=d;const g=()=>{var[e,n]=(0,u.Db)(m);return[e,n]};var p=a(23198),v=a(84025),f=a.n(v),y=e=>(0,p.Z)((0,p.Z)({},e),{},{departureUtcDateTime:f().utc(e.departureUtcDateTime).format(),arrivalUtcDateTime:f().utc(e.arrivalUtcDateTime).format()}),b=a(64169),C=a(73009),h=a(43691),E=e=>{var n,a,{query:r,selectedPartnerJourneyInfo:t}=e,c=(0,o.useDispatch)(),[d]=g(),u=(0,i.useRef)(!1),m=(0,i.useCallback)(((e,n)=>{var{v1_performPriceReconciliation:{isValid:a,price:r,currencyCode:t}}=e;if(a&&t===n.currencyCode){var i={title:"",message:""};if(n.amount){var o=n.amount<r?"decreased":"increased";i={title:"page.results.dpiMetaSearch.warn.priceChanged.title",message:"page.results.dpiMetaSearch.warn.priceChanged.".concat(o)}}c((0,s.XD)(i))}}),[c]);(0,i.useEffect)((()=>{if(!u.current&&null!=r&&r.arrivalTime&&null!=r&&r.boardingTime&&null!=r&&r.fromTicketingStopTimeId&&null!=r&&r.toTicketingStopTimeId&&(null==r?void 0:r.referrer)===h.O.GoogleTravelTransport&&null!=t&&t.journey&&t.journeyLegs){var e,n,a,i,o,s,c=[];JSON.parse(null==r?void 0:r.fromTicketingStopTimeId).forEach(((e,n)=>{c.push({origin:e,destination:JSON.parse(null==r?void 0:r.toTicketingStopTimeId)[n],departureUtcDateTime:JSON.parse(null==r?void 0:r.boardingTime)[n],arrivalUtcDateTime:JSON.parse(null==r?void 0:r.arrivalTime)[n]})}));var g=null!=t&&null!==(e=t.price)&&void 0!==e&&e.amount&&(null==t||null===(n=t.price)||void 0===n?void 0:n.amount)>0?{amount:null==t||null===(a=t.price)||void 0===a?void 0:a.amount,currencyCode:null==t||null===(i=t.price)||void 0===i?void 0:i.currencyCode}:null,p={bookingToken:(null==r?void 0:r.bookingToken)||"",currentPrice:g,journeyId:null==t||null===(o=t.journey)||void 0===o?void 0:o.id,journeyLegs:null==t?void 0:t.journeyLegs.map(y),dpiLegs:c,transactionSource:null==r?void 0:r.transactionSource,unsellableReason:null==t||null===(s=t.journey)||void 0===s||null===(s=s.unsellableReason)||void 0===s?void 0:s.code,isPricedLink:""!=(null==r?void 0:r.bookingToken),fareSearchContextId:b.Dr.getItem(C.y$)},v=null!=r&&r.agency?JSON.parse(null==r?void 0:r.agency)[0]:void 0;v&&(p.agency=v),null!=t&&t.searchId&&(p.fareSearchId=t.searchId),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length===n.length&&e.reduce(((e,a,r)=>{var t=n[r];return e&&f().utc(t.arrivalUtcDateTime).isSame(f().utc(a.arrivalUtcDateTime))&&f().utc(t.departureUtcDateTime).isSame(f().utc(a.departureUtcDateTime))}),!0)}(p.journeyLegs,p.dpiLegs)||(0,l.Ep)(new Error("ItineraryMismatch"),{message:"Date mismatch detected in PriceReconciliation query",context:JSON.stringify(p)}),d({variables:{requestBody:p},onCompleted(e){m(e,g)}}).catch((e=>(0,l.Ep)(e,{message:"Price reconciliation call failed",context:JSON.stringify(p)}))),u.current=!0}}),[null==r?void 0:r.bookingToken,null==r?void 0:r.arrivalTime,null==r?void 0:r.boardingTime,null==r?void 0:r.fromTicketingStopTimeId,null==r?void 0:r.toTicketingStopTimeId,null==r?void 0:r.transactionSource,null==r?void 0:r.agency,null==r?void 0:r.referrer,null==t?void 0:t.journey,null==t||null===(n=t.price)||void 0===n?void 0:n.amount,null==t||null===(a=t.price)||void 0===a?void 0:a.currencyCode,null==t?void 0:t.journeyLegs,null==t?void 0:t.searchId,d,m])},k=e=>{var{query:n,selectedPartnerJourneyInfo:a}=e;return E({query:n,selectedPartnerJourneyInfo:a}),i.createElement(i.Fragment,null)}},92989:(e,n,a)=>{a.d(n,{HT:()=>h,H_:()=>E,Td:()=>k,W0:()=>_,Z8:()=>T,f3:()=>R,kr:()=>C,r1:()=>S});var r=a(84025),t=a.n(r),i=a(32034),o=a(19408),l=a(51059),s=a(33695),c=a(61229),d=a(51807),u=a(56267),m=e=>!!e.filter((e=>e)).length,g=(0,i.P1)(u._D,c.HO,c.J_,((e,n,a)=>e.map((e=>{var r=e&&n[e],t=r&&r.legs[r.legs.length-1],i=t&&a[t];return i&&i.arriveAt||""})).sort(((e,n)=>t()(e).isBefore(n)?1:-1))[0])),p=(0,i.P1)(u.dI,c.HO,c.J_,((e,n,a)=>e.map((e=>{var r=e&&n[e],t=r&&r.legs[0],i=t&&a[t];return i&&i.departAt||""})).sort(((e,n)=>t()(e).isBefore(n)?-1:1))[0])),v=(0,i.P1)(g,p,((e,n)=>!!n&&t()(e).isAfter(n))),f=(0,i.P1)(c.fz,(e=>e&&e.previous)),y=(0,i.P1)(c.fz,(e=>e&&e.next)),b=(0,i.P1)((e=>e),l.VS,l.NA,((e,n,a)=>!!(0,o.eB)(e,s.zA.EXPERIMENT_SEARCH_EARLIER_ITALY,!0)&&[n,a].every((e=>"IT"===(null==e?void 0:e.countryCode))))),C=(0,i.P1)(d.XJ,u.kd,b,f,((e,n,a,r)=>e||!a&&m(n)||!(!r||r.outward))),h=(0,i.P1)(d.XJ,u.ce,v,f,((e,n,a,r)=>e||m(n)||a||!(!r||r.inward))),E=(0,i.P1)(d.XJ,v,y,((e,n,a)=>e||n||!(!a||a.outward))),k=(0,i.P1)(d.XJ,y,((e,n)=>e||!(!n||n.inward))),S=(0,i.P1)(f,(e=>Boolean(e&&e.outward))),T=(0,i.P1)(f,(e=>Boolean(e&&e.inward))),_=(0,i.P1)(y,(e=>Boolean(e&&e.outward))),R=(0,i.P1)(y,(e=>Boolean(e&&e.inward)))}}]);