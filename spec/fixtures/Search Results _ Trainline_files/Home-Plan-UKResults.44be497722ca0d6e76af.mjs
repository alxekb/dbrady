"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[95919],{82021:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(29901);const n=e=>{var{width:t="90px",height:a="76px",color:n="#000"}=e;return r.createElement("svg",{width:t,height:a,viewBox:"0 0 90 76"},r.createElement("defs",null),r.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M90,31.8 L82,31.8 C79,14 63.6,0.5 45,0.5 C26.4,0.5 11,14 8,31.8 L0,31.8 L0,44.3 L8,44.3 C11,62 26.4,75.5 45,75.5 C63.6,75.5 79,62 82,44.2 L90,44.2 L90,31.8 Z M45,13 C56.6,13 66.4,21 69.2,31.8 L20.8,31.8 C23.6,21 33.4,13 45,13 Z M45,63 C33.4,63 23.6,55 20.8,44.2 L69.2,44.2 C66.4,55 56.6,63 45,63 Z",id:"travelcard",fill:n,fillRule:"nonzero"})))}},43722:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(88543),n=a(29433),i=a(75853);const s=()=>{var{enableBikesOnTrains:e}=(0,i.x)(),t=(0,r.useSelector)(n.pO);return e&&t}},1243:(e,t,a)=>{a.d(t,{G4:()=>p,ZP:()=>g});var r=a(23198),n=a(50093),i=a(60289),s=a(23394),l=a(83367),o=a(16947),c=l.spacers.l,d={display:"none"},p={width:"var(--DEPRECATED-259px)",minWidth:"var(--DEPRECATED-259px)"},m=(0,r.Z)((0,r.Z)({},p),{},{display:"flex",flexGrow:1}),u=(0,r.Z)((0,r.Z)({},p),{},{display:"flex",[i.ZP.xsmall.max]:{flexGrow:1}}),h={backgroundColor:s.O9.palette.grey_60,[i.ZP.xsmall.max]:{marginTop:l.spacers.s},display:"flex",maxWidth:"24.0625rem"};const g=n.StyleSheet.create({wrapper:{position:"relative"},container:{display:"flex",justifyContent:"flex-end"},verticalLabel:{flexGrow:1,maxWidth:"var(--DEPRECATED-294px)",width:"100%",display:"flex",position:"relative",[i.ZP.xsmall.max]:d},horizontalLabelContainer:{display:"flex",justifyContent:"flex-end",[i.ZP.xsmall.min]:d},singleColumnContentLabel:(0,r.Z)((0,r.Z)({},m),{},{marginRight:c}),basicLabel:(0,r.Z)({},m),combinedColumn:(0,r.Z)((0,r.Z)({},u),{},{width:"calc((".concat(u.width," * 2) + ").concat(c,")"),minWidth:"calc((".concat(u.width," * 2) + ").concat(c,")")}),outwardColumn:(0,r.Z)((0,r.Z)({},u),{},{overflow:"hidden",position:"relative",marginRight:c}),inwardColumn:(0,r.Z)((0,r.Z)({},u),{},{overflow:"hidden",position:"relative"}),cheapestLabelRow:h,cheapestLabel:(0,r.Z)((0,r.Z)({alignSelf:"flex-end"},o.U.isCheapest),{},{fontWeight:600,marginRight:"4.725rem"}),hide:d,parent:{position:"relative"}})},68819:(e,t,a)=>{a.d(t,{Z:()=>B,d:()=>F});var r=a(84025),n=a.n(r),i=a(88543),s=a(37544),l=a(32034),o=a(97866),c=a(89034),d=a(59838),p=a(68760),m=a(72750),u=a(64383),h=a(93643),g=a(61229),y=a(51059),E=a(51807),v=a(32554),b=a(56267),f=a(29901),x=a(50093),_=a(98184),S=a(89426),w=a(26625),A=a(60654),C=a(67292),T=a(57535),R=a(55644),k=a(98318),D=a(23394),I=a(83367),N=a(52068);const Z=x.StyleSheet.create({container:{backgroundColor:k.dp_app_backdrop_base,padding:I.spacers.l},expiredLabel:{textAlign:"center",backgroundColor:k.dp_brand_tertiary_mid,color:k.dp_app_text_inverted,fontWeight:"bold",fontSize:N.W.small.fontSize,padding:"0.15rem 0.4rem 0.2rem 0.4rem",borderRadius:D.E0.m,marginRight:I.spacers.xs},passengersCount:{marginTop:I.spacers.xs},searchButtonWrapper:{marginTop:I.spacers.s},searchButton:{fontSize:N.W.title3.fontSize,minHeight:"var(--DEPRECATED-42px)"},desc:{color:k.dp_app_text_subtle,maxWidth:560},recentSearch:{margin:"".concat(I.spacers.m," auto")},backButtonWrapper:{marginTop:I.spacers.m}});var P="modal.journeySearchExpired.header";class O extends f.Component{componentDidMount(){var{onMount:e}=this.props;e()}componentWillUnmount(){var{trackUnmount:e}=this.props;e()}render(){var{destination:e,date:t,type:a,goBackToHomepage:r,isAuthExpired:n,isRegisteredUser:i,isLoggedInExpired:s,lastOutwardJourneyIsInPast:l,modalId:o,origin:c,passengerCount:d,refreshJourneySearch:p,isRedirectToMarketingSite:m,homePageRedirectUrl:u=""}=this.props,h=u,g=t&&(0,C.Qb)(t),y=(0,w.C6)({format:"modal",type:"customer",message:"Session timeout - link to homepage in modal - ".concat(P),id:P});return f.createElement(w.fQ,{event:y,hooks:[w.OS.ON_RENDER]},f.createElement("div",{className:(0,x.css)(Z.container)},f.createElement("h2",{id:o},f.createElement(_.FormattedMessage,{id:P})),f.createElement("div",{className:(0,x.css)(Z.desc)},n||s?f.createElement(_.FormattedMessage,{id:s?"modal.journeySearchExpired.description.loggedInExpired":i?"modal.journeySearchExpired.description.registered":"modal.journeySearchExpired.description.guest"}):f.createElement(_.FormattedMessage,{id:"modal.journeySearchExpired.description"})),f.createElement("h3",{className:(0,x.css)(Z.recentSearch)},f.createElement(_.FormattedMessage,{id:"modal.journeySearchExpired.recentSearch"})),c&&e&&f.createElement("h2",null,f.createElement(_.FormattedMessage,{id:"modal.journeySearchExpired.originToDestination",values:{originName:c.name,destinationName:e.name}})),f.createElement("div",null,l&&f.createElement("span",{className:(0,x.css)(Z.expiredLabel)},f.createElement(_.FormattedMessage,{id:"modal.journeySearchExpired.expiredLabel"})),f.createElement("span",{className:(0,x.css)(Z.desc)},g&&a&&f.createElement(_.FormattedMessage,{id:"modal.journeySearchExpired.dateTypeTime",values:{date:f.createElement(_.FormattedMessage,{id:"dateTimeFormat.date",values:{weekday:f.createElement(_.FormattedDate,{value:g,weekday:"short",timeZone:"UTC"}),day:f.createElement(_.FormattedDate,{value:g,day:"numeric",timeZone:"UTC"}),month:f.createElement(_.FormattedDate,{value:g,month:"short",timeZone:"UTC"}),year:f.createElement(_.FormattedDate,{value:g,year:"numeric",timeZone:"UTC"})}}),type:f.createElement(_.FormattedMessage,{id:a===A.TransitDefinitionDateType.DEPART_AFTER?"modal.journeySearchExpired.type.departure":"modal.journeySearchExpired.type.arrival"}),time:f.createElement(_.FormattedTime,{value:g,hour12:!1,timeZone:"UTC"})}})),f.createElement("div",{className:(0,x.css)(Z.passengersCount)},f.createElement(T.Z,{passengersCount:d}))),f.createElement("div",{className:(0,x.css)(Z.searchButtonWrapper)},m?f.createElement("div",{"data-test":"href-link-search"},f.createElement(S.KM,{type:"button",styleSheet:Z.searchButton,onClick:()=>r(h)},f.createElement(_.FormattedMessage,{id:l?"modal.journeySearchExpired.showNextTickets":"modal.journeySearchExpired.searchAgain"}))):f.createElement(S.KM,{type:"button",styleSheet:Z.searchButton,onClick:p},f.createElement(_.FormattedMessage,{id:l?"modal.journeySearchExpired.showNextTickets":"modal.journeySearchExpired.searchAgain"}))),f.createElement("div",{className:(0,x.css)(Z.backButtonWrapper)},m?f.createElement("div",{"data-test":"href-link-back"},f.createElement(R.Z,{onClick:()=>r(h),labelId:"modal.journeySearchExpired.backButton.label"})):f.createElement(R.Z,{onClick:()=>r("/"),labelId:"modal.journeySearchExpired.backButton.label"}))))}}const L=O;var M=a(51730),F=(0,l.P1)(b._D,g.HO,((e,t)=>e.length*e.filter(d.v).map((e=>t[e]?n()(t[e].arriveAt).diff(t[e].departAt):void 0)).pop())),W=e=>JSON.parse(e.serializedResultsPageQuery);const B=(0,i.connect)(((e,t)=>{var a={query:JSON.parse(t.modalParams.serializedResultsPageQuery)};return{outboundTimeWindowDuration:F(e,a),lastOutwardJourneyIsInPast:(0,E.Mv)(e,a),origin:(0,v.$h)(e),destination:(0,v.JN)(e),date:(0,y.RS)(e),type:(0,y.lj)(e),passengerCount:(0,y.JU)(e),isAuthExpired:(0,h.O7)(e),isRegisteredUser:(0,p.L6)(e),isLoggedInExpired:(0,h.Eo)(e),homePageRedirectUrl:(0,o.Wc)(e),isRedirectToMarketingSite:(0,o.Jz)(e)}}),((e,t)=>{var{modalParams:a}=t;return{refreshJourneySearch:t=>{e((0,m.pX)({query:W(a),outboundTimeWindowDuration:t})),e((0,s.ET)({id:m.yZ,state:{isInward:!1}}))},goBackToHomepage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";"/"!==t?window.location.href=t:e((0,M.cf)())},refreshToHomepage:()=>e((0,M.cf)()),onMount:()=>{e((0,u.LJ)()),e((0,c.lE)())},trackUnmount:()=>e((0,u.UJ)())}}),((e,t,a)=>{var{outboundTimeWindowDuration:r,lastOutwardJourneyIsInPast:n,origin:i,destination:s,date:l,type:o,passengerCount:c,isAuthExpired:d,isRegisteredUser:p,isLoggedInExpired:m,homePageRedirectUrl:u,isRedirectToMarketingSite:h}=e,{refreshJourneySearch:g,goBackToHomepage:y,onMount:E,trackUnmount:v,refreshToHomepage:b}=t,{modalId:f}=a;return{lastOutwardJourneyIsInPast:n,origin:i,destination:s,date:l,type:o,modalId:f,passengerCount:c,onMount:E,trackUnmount:v,isAuthExpired:d,isRegisteredUser:p,isLoggedInExpired:m,refreshJourneySearch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>g(r))),goBackToHomepage:d?b:y,homePageRedirectUrl:u,isRedirectToMarketingSite:h}}))(L)},35055:(e,t,a)=>{a.d(t,{_:()=>re,Z:()=>ie});var r=a(23198),n=a(11576),i=a(50093),s=a(29901),l=a(44689),o=a(31872),c=a(57833),d=a(98318),p=a(8888),m=a(23394),u=a(94878),h=a(4385),{sizes:g}=p.Z,y={"0%":{boxShadow:"0 0 0 16px ".concat((0,u.I)(h.ZP.dp_brand_primary_mid,0))},"100%":{boxShadow:"0 0 0 0 ".concat(d.dp_brand_primary_mid)}};const E=i.StyleSheet.create({returnFare:{backgroundColor:d.dp_app_backdrop_base,border:"solid 1px ".concat(d.dp_app_border_base),borderRadius:m.E0.m,marginBottom:g.spacers.s},returnFareSelected:{backgroundColor:d.dp_brand_primary_brighter,border:"solid 2px ".concat(d.dp_brand_primary_mid)},animatedHighlight:{animationName:[y],animationDelay:"1300ms",animationDuration:"600ms",animationFillMode:"forwards"}});var v=a(98184),b=a(79389),f=a(48500),x=a(37527),_=a(82768),S=a(89914),w=a(67292),A=a(83367),C=a(52068),T=a(16947),{sizes:R}=p.Z;const k=i.StyleSheet.create({directionAndTimesWrapper:{display:"flex",minHeight:R.spacers.l,alignItems:"baseline",flexFlow:"row wrap",listStyleType:"none"},warningStyles:{flexFlow:"row nowrap",maxWidth:"74%",[p.Z.breakpoints.xsmall.max]:{maxWidth:"67%"}},direction:{fontSize:T.P.smallCaption.fontSize,fontWeight:"normal",color:d.dp_app_text_base,margin:"-5px ".concat(R.spacers.xs," 0 0"),textTransform:"uppercase"},dayLabel:(0,r.Z)((0,r.Z)({},C.W.small),{},{fontWeight:600,color:d.dp_app_text_base,backgroundColor:m.O9.palette.grey_60,borderRadius:m.E0.m,padding:A.spacers.xs,marginRight:A.spacers.xs,marginLeft:A.spacers.xxs}),timeItem:{display:"flex",flexShrink:0},timeWrapper:(0,r.Z)((0,r.Z)({cursor:"pointer",color:d.dp_app_info_mid,alignItems:"center"},T.P.title),{},{fontSize:C.W.body.fontSize,backgroundColor:"transparent",":focus-visible":{outline:"4px solid ".concat(d.dp_comp_focus_ring)}}),timeButton:{backgroundColor:"transparent",color:d.dp_app_info_mid},timeSelected:{fontWeight:"bold"},timeDisabled:{color:d.dp_app_text_subtle},notAvailableButDisabled:{color:d.dp_app_text_base},dots:{marginRight:R.spacers.xs,fontWeight:"bold",fontSize:C.W.small.fontSize,letterSpacing:"0.0875rem"},timeDelimiter:{marginRight:p.Z.sizes.spacers.xs},warningWrapper:{display:"flex",alignItems:"baseline",marginRight:p.Z.sizes.spacers.xs,marginBottom:p.Z.sizes.spacers.xs},warningMessage:(0,r.Z)((0,r.Z)({},C.W.small),{},{color:d.dp_app_text_subtle,fontStyle:"italic",marginRight:R.spacers.xs,letterSpacing:C.W.title1.letterSpacing,lineHeight:1.4})});var D=a(82812),I=(e,t,a)=>{var r=0===a?t[t.length-1]:t[a-1];return(0,w.Xn)(r.departAt)!==e},N=e=>s.createElement("span",{"data-test":"day-label",className:(0,i.css)(k.dayLabel)},e),Z=(e,t,a,r,n,l,o)=>e.map(((e,c,d)=>{if(e){var p=(0,D.Z)(),{departAt:m,alternativeId:u,isEnabled:h}=e,g=(0,w.Xn)(m),y=l.formatTime((0,w.Qb)(m),{hour12:p,timeZone:"UTC"}),E=(0,i.css)(a&&o===u&&k.timeSelected),b=(0,i.css)(k.timeWrapper,t&&k.timeDisabled,h?t&&h&&k.notAvailableButDisabled:k.timeDisabled),f=c===d.length-1,x=0===c&&r||I(g,d,c),_=!f&&I(g,[d[c+1]],0);return s.createElement("li",{className:(0,i.css)(k.timeItem),key:"".concat(m).concat(c)},s.createElement("button",{className:b,title:y},x&&s.createElement(v.FormattedDate,{value:g,weekday:"short",timeZone:"UTC",children:N}),s.createElement("time",{className:E},y),o===u&&s.createElement(S.o,{id:"trainTimes.selectedTime.accessibilityText"})),f?s.createElement("span",{className:(0,i.css)(k.dots)},"..."):_?s.createElement("span",{className:(0,i.css)(k.dots)},"."):s.createElement("span",{className:(0,i.css)(k.timeDelimiter)},","))}return A=n,s.createElement("li",{className:(0,i.css)(k.warningWrapper),key:"".concat(A)},s.createElement(v.FormattedDate,{value:(0,w.Xn)(A),weekday:"short",timeZone:"UTC",children:N,"data-test":"split-day-warning-date"}),s.createElement(v.FormattedMessage,{id:"returnAlternative.content.trainTimes.dayWarning","data-test":"split-day-warning-message"},(e=>s.createElement("span",{className:(0,i.css)(k.warningMessage)},e))));var A}));const P=e=>{var{groupedAlternatives:t,isReturn:a,isOpenReturn:r,selectedAlternativeId:n,styleSheet:l,areAllUnavailable:o,shouldHighlightSelected:c,showFirstDayLabel:d,intl:p,searchDate:m}=e,u=((e,t,a)=>{var r=new Map(t);a&&r.size<=2&&!r.has((0,w.Xn)(e))&&r.set(e,!1);var n=Array.from(r.keys());return(0,_.xHg)(n.sort().map((e=>r.get(e))))})(m,t,r),h=u.includes(!1);return s.createElement("ul",{className:(0,i.css)(k.directionAndTimesWrapper,r&&h&&k.warningStyles,l)},s.createElement("li",null,s.createElement("h5",{className:(0,i.css)(k.direction)},s.createElement(S.o,{id:a?"trainTimes.inwardJourney.accessibilityText":"trainTimes.outboundJourney.accessibilityText"}),s.createElement("span",{"aria-hidden":!0},s.createElement(v.FormattedMessage,{id:a?"page.ukresults.alternatives.return":"page.ukresults.alternatives.out"})))),Z(u,o,c,d,m,p,n))};var O=a(55330),L=a(8107),M=a(53897),{sizes:{spacers:F}}=p.Z;const W=i.StyleSheet.create((0,r.Z)((0,r.Z)({},L.s),{},{wrapper:{paddingTop:"calc(".concat(F.s," + ").concat(F.xs,")"),paddingRight:"calc(".concat(F.s," + ").concat(F.xs," + 1px)"),paddingLeft:"calc(".concat(F.s," + ").concat(F.xs," + 1px)"),":focus-visible":{outline:"4px solid ".concat(d.dp_comp_focus_ring)}},timeWrapper:{paddingBottom:"calc(".concat(F.xs," + ").concat(F.xxs," + 1px)"),display:"flex",flexWrap:"wrap",alignItems:"baseline"},timeWrapperSelected:{paddingBottom:"calc(".concat(F.xs," + ").concat(F.xxs," )")},wrapperHover:{cursor:"pointer",":hover":{backgroundColor:d.dp_brand_primary_brighter},':hover [data-test="day-label"]':{backgroundColor:d.dp_comp_table_row_hover}},wrapperSelected:{paddingRight:"calc(".concat(F.s," + ").concat(F.xs,")"),paddingLeft:"calc(".concat(F.s," + ").concat(F.xs,")"),':first-of-type [data-test="day-label"]':{backgroundColor:d.dp_comp_table_row_hover}},outwardTimes:{flexGrow:1,width:"50%"},outwardTimesOpenReturn:{flexGrow:0,width:"auto"},inwardTimes:{flexGrow:1,width:"50%",paddingLeft:"calc(".concat(L.W,"/2 + ").concat(M.i.px16,")")},isPending:{height:M.i.px50},journeyDetailsLink:(0,r.Z)((0,r.Z)({},C.W.small),{},{marginLeft:"auto",color:d.dp_app_info_mid,paddingLeft:M.i.px1}),labelContainer:{display:"flex",flexBasis:"100%",justifyContent:"flex-end"}}));var B=i.StyleSheet.create({highlightTextCustomStyle:(0,r.Z)((0,r.Z)((0,r.Z)({},O.P_),O.Or),{},{marginRight:M.i.px6})}),U=i.StyleSheet.create({highlightTextCustomStyle:(0,r.Z)((0,r.Z)((0,r.Z)({},O.P_),O.Or),{},{backgroundColor:d.dp_app_info_brighter})}),H=i.StyleSheet.create({highlightTextCustomStyle:(0,r.Z)((0,r.Z)((0,r.Z)({},O.P_),O.Or),{},{backgroundColor:d.dp_app_warning_brightest})}),j=(e,t)=>(0,f.aG)(e,t)?"":(0,f.SQ)(e,t)?".reservable":".not.reservable",J=(e,t,a)=>(0,f.rv)(e)||(0,f.rv)(t)?"":a.formatMessage({id:"page.ukresults.alternatives.return.journeyDetails".concat(j(e,t))}),z=e=>{" "!==e.key&&"Enter"!==e.key||!e.currentTarget||e.currentTarget.click()},q={["".concat(b.E.ALL,"_").concat(b.Z.BUS)]:"page.ukresults.label.hasAllBusReplacementLegs",["".concat(b.E.SOME,"_").concat(b.Z.BUS)]:"page.ukresults.label.hasAtleastOneBusReplacementLeg",["".concat(b.E.ALL,"_").concat(b.Z.NONRAIL)]:"page.ukresults.label.hasAllNonRailLegs",["".concat(b.E.SOME,"_").concat(b.Z.NONRAIL)]:"page.ukresults.label.hasAtleastOneNonRailLeg"},G=e=>{var{isSelected:t,selectedOutwardAlt:a,selectedInwardAlt:r,outwardAlternatives:n,inwardAlternatives:l,groupedOutwardAlternatives:o,groupedInwardAlternatives:c,onClick:d,isAvailable:p,intl:m,isOpenReturn:u,isPending:h,searchHasSplitDepartDays:g,hasStationChoice:y,railReplacementType:E,searchDates:f}=e;return h?s.createElement("div",{className:(0,i.css)(W.wrapper,W.isPending)}):s.createElement("div",{className:(0,i.css)(W.wrapper,p&&W.wrapperHover,t&&W.wrapperSelected),title:J(n,l,m),onClick:d,onKeyPress:z,tabIndex:0,"data-test":"content"},s.createElement("div",{className:(0,i.css)(W.timeWrapper,t&&W.timeWrapperSelected)},s.createElement(P,{styleSheet:u?W.outwardTimesOpenReturn:W.outwardTimes,groupedAlternatives:o,selectedAlternativeId:a&&a.alternativeId,isOpenReturn:u,areAllUnavailable:!p,intl:m,shouldHighlightSelected:t,showFirstDayLabel:g,searchDate:f.outwardSearchDate}),p&&u?s.createElement("span",{className:(0,i.css)(W.journeyDetailsLink)},s.createElement(v.FormattedMessage,{id:"page.ukresults.alternatives.return.journeyDetails"})):l.length>0?s.createElement(P,{styleSheet:W.inwardTimes,groupedAlternatives:c,selectedAlternativeId:r&&r.alternativeId,isReturn:!0,isOpenReturn:u,areAllUnavailable:!p,intl:m,shouldHighlightSelected:t,showFirstDayLabel:g,searchDate:f.inwardSearchDate}):null),s.createElement("div",{className:(0,i.css)(W.labelContainer)},y?s.createElement(x.Z,{id:"page.ukresults.label.stationChoice",styleSheet:B}):null,E&&E!==b.E.NONE?s.createElement(x.Z,{id:q[E],styleSheet:E.endsWith(b.Z.BUS)?H:U}):null))},V=((0,v.injectIntl)(G),(0,v.injectIntl)((0,n.t$)((e=>(0,r.Z)({},e)),(e=>{var{isPending:t}=e;return Boolean(t)}),(()=>(0,i.css)(o.aphroditeStyles.default)))(G))),K=a(49042),Y=a(59895),X=a(82021),Q=a(88470),$=a(1243),{sizes:{spacers:ee}}=p.Z;const te=i.StyleSheet.create({wrapper:{display:"flex",paddingTop:"calc(".concat(ee.xs," + ").concat(ee.xxs," + 1px)"),paddingRight:"calc(".concat(ee.s," + 1px)"),paddingBottom:ee.s,paddingLeft:"calc(".concat(ee.s," + ").concat(ee.xs," + 1px)"),borderBottom:"1px solid ".concat(d.dp_app_border_base)},wrapperHover:{cursor:"pointer",":hover":{backgroundColor:d.dp_brand_primary_brighter}},wrapperSelected:{paddingTop:"calc(".concat(ee.xs," + ").concat(ee.xxs,")"),paddingRight:ee.s,paddingLeft:"calc(".concat(ee.s," + ").concat(ee.xs,")"),borderBottom:"1px solid ".concat(d.dp_brand_neutral_brighter),":hover":{backgroundColor:"none",cursor:"auto"}},fareWrapper:{display:"flex"},travelcardWrapper:{display:"flex",alignItems:"center",marginRight:ee.xs},iconInfo:{width:"12px",height:"12px",color:d.dp_brand_neutral_mid,marginLeft:ee.xs},fareTypeLink:(0,r.Z)((0,r.Z)({display:"flex",alignItems:"center"},T.P.text),{},{color:d.dp_app_text_base,fontWeight:"bold",":hover":{textDecoration:"none"},":focus-visible":{outline:"4px solid ".concat(d.dp_comp_focus_ring)}}),condition:(0,r.Z)((0,r.Z)({color:d.dp_app_text_base},C.W.small),{},{maxWidth:"calc(".concat($.G4.width," * 1.5)"),fontWeight:"normal"}),priceWrapper:{marginLeft:"auto",fontWeight:"normal"},selectedPrice:{fontWeight:"bold"},isPending:{border:"none"}});var ae=(0,n.t$)((e=>(0,r.Z)({},e)),(e=>{var{isPending:t}=e;return Boolean(t)}),(()=>(0,i.css)(o.aphroditeStyles.default)))((e=>{var{isSelected:t,isCheapest:a,price:r,fareTypeName:n,fareTypeIsTravelcard:l,conditionsSummary:c,onSelected:p,onRequestOpenFareTypeModal:m,isAvailable:u,isPending:h}=e;return h?s.createElement("div",{className:(0,i.css)(te.wrapper,te.isPending)},s.createElement("div",{className:(0,i.css)(te.fareTypeLink)},s.createElement(o.SkeletonContainer,null," ","_________________"," "))):s.createElement("h4",{className:(0,i.css)(te.wrapper,u&&te.wrapperHover,t&&te.wrapperSelected),onClick:()=>p&&!t&&p()},s.createElement("div",null,s.createElement("div",{className:(0,i.css)(te.fareWrapper)},l&&s.createElement("div",{className:(0,i.css)(te.travelcardWrapper)},s.createElement(X.Z,{width:"12px",height:"12px",color:d.dp_brand_neutral_dullest})),s.createElement(S.o,{id:"returnAlternative.header.fareType.accessibilityText"}),s.createElement(K.Z,{onClick:m,styleSheet:te.fareTypeLink,testId:"ticket-restrictions-link"},n,l&&s.createElement(S.o,{id:"returnAlternative.header.travelcard.accessibilityText"}),s.createElement(Y.Z,{className:(0,i.css)(te.iconInfo)}))),c&&s.createElement("span",null,s.createElement(S.o,{id:"returnAlternative.header.conditionsSummary.accessibilityText"}),s.createElement("p",{className:(0,i.css)(te.condition)},c))),s.createElement("div",{className:(0,i.css)(te.priceWrapper,t&&te.selectedPrice)},s.createElement(Q.Z,{price:r,isSelected:t,isCheapest:a,hoverBackground:!1,notAvailable:!u,testIdRadio:"price-radio",isReturnView:!0})))})),re=function(e){return e.RETURN_ALTERNATIVE_SELECTED="return-alternative-selected",e.RETURN_ALTERNATIVE_NOT_SELECTED="return-alternative",e}({});class ne extends s.Component{componentDidMount(){var{onMounted:e}=this.props;e&&e()}render(){var{isSelected:e,isCheapest:t,price:a,fareTypeName:r,fareTypeIsTravelcard:n,conditionsSummary:o,outwardAlternatives:d,inwardAlternatives:p,groupedOutwardAlternatives:m,groupedInwardAlternatives:u,selectedOutwardAlt:h,selectedInwardAlt:g,isAvailable:y,testId:v,columnMode:b,isOpenReturn:f,searchHasSplitDepartDays:x,onSelected:_,onRequestOpenFareTypeModal:S,onContentClick:w,hasStationChoice:A,isSelectedByPriceCapture:C,outwardSearchDate:T,inwardSearchDate:R,railReplacementType:k}=this.props,D=(0,i.css)(E.returnFare,e&&E.returnFareSelected,C&&E.animatedHighlight),I=e?re.RETURN_ALTERNATIVE_SELECTED:re.RETURN_ALTERNATIVE_NOT_SELECTED,N={outwardSearchDate:T,inwardSearchDate:R};return s.createElement(l.Element,{name:I,className:D,"data-test":v},s.createElement(ae,{isSelected:e,isCheapest:t,price:a,fareTypeName:r,fareTypeIsTravelcard:n,conditionsSummary:o,isAvailable:y,onSelected:y?_:void 0,onRequestOpenFareTypeModal:S,isPending:b!==c.h.LOADED}),s.createElement(V,{isSelected:e,selectedOutwardAlt:h,selectedInwardAlt:g,outwardAlternatives:d,inwardAlternatives:p,groupedOutwardAlternatives:m,groupedInwardAlternatives:u,isAvailable:y,onClick:y?w:void 0,isPending:b!==c.h.LOADED,isOpenReturn:f,searchHasSplitDepartDays:x,hasStationChoice:A,searchDates:N,railReplacementType:k}))}}const ie=(0,n.t$)((e=>(0,r.Z)((0,r.Z)({},e),{},{columnMode:c.h.SKELETON})),(e=>{var{columnMode:t}=e;return t!==c.h.LOADED}),(()=>(0,i.css)(o.aphroditeStyles.default)))((e=>s.createElement(ne,e)))},55566:(e,t,a)=>{a.d(t,{ZP:()=>oe,XY:()=>se,kI:()=>le});var r=a(23198),n=a(31105),i=a(88543),s=a(96172),l=a(2031),o=a(51282),c=a(83982),d=a(63094),p=a(33946),m=a(21168),u=a(19408),h=a(72750),g=a(6105),y=a(98094),E=a(1973),v=a(29433),b=a(97866),f=a(61229),x=a(51059),_=a(32143),S=a(51807),w=a(13164),A=a(43650),C=a(89034),T=a(83570),R=a(54074),k=a(83504),D=a(70755),I=a(48500),N=a(52718),Z=a(44481),P=a(78524),O=a(33695),L=a(26067),M=a(59838),F=a(24087),W=a(7173),B=a(58186),U=a(22746),H=a(16558),j=a(25673),J=a(92989),z=a(54222),q=a(26329),G=a(82768),V=a(32034),K=a(35926),Y=(0,V.P1)(W.yX,W.Xh,((e,t)=>{var a=e.map((e=>{var{standard:t,first:a}=e,r=(0,K.y8)(t,a);return(0,K.iJ)(r.disruptions)})),r=t.map((e=>{var{standard:t,first:a}=e,r=(0,K.y8)(t,a);return(0,K.iJ)(r.disruptions)})),n=a.concat(r),i=[];n.map((e=>{e.items&&i.push(e.items)}));var s=(0,G.xHg)(i);return{uniqueDisruptions:s.reduce(((e,t)=>(e.some((e=>e.content===t.content))||e.push(t),e)),[]),flattenedDisruptions:s,combinedJourneyDisruptions:n}})),X=(0,V.P1)(Y,(e=>{var t=new Set;return e.uniqueDisruptions.map((a=>{e.flattenedDisruptions.filter((e=>e.content===a.content)).length===Object.keys(e.combinedJourneyDisruptions).length&&t.add(a.content)})),t})),Q=a(2954),$=a(58959),ee=a(44149),te=a(44544),ae=a(78307),re=a(41344),ne=a(33337),ie=e=>t=>e.find((e=>{var{standardClassAlternative:a,firstClassAlternative:r}=e,n=a&&a.selectionId===t,i=r&&r.selectionId===t;return!(!n&&!i)})),se=(e,t)=>e.map((e=>e.toLowerCase())).indexOf(t.toLowerCase())>-1?e.length>1?c.q.TARGETED_PLUS_OTHER_CARRIER:c.q.TARGETED_CARRIER:c.q.OTHER_CARRIER,le=(e,t,a,r,n,i,s)=>{var l=(0,g.I7)(e),o=(0,N.jr)(n),c="return"===(0,x.KR)(e),m=(0,p.g1)(e,t,o),u=c?(0,A.fV)(e,t):[],h=(0,f.J_)(e,t),y=(0,I.Cq)(i)||{},S=(0,U.$s)(e,t),w=(o===Z.t.OUTWARD?U.F3:U.EU)(e,t),C=(o===Z.t.OUTWARD?_.W6:_.qw)(e,t),T=(0,v.ro)(e),R=m.map((n=>{if(null!=n){var i=(0,d.Wz)(u,o,n.departAt,n.arriveAt,s),c=(0,E.ef)(e,t,n.id),p=(0,D.hn)(e,t.query),m={query:t.query,searchRequest:p},g=(0,b.th)(e).split(":")[4],v=(0,b.Sm)(e),f=(0,E.pA)(e,m,n.id),_=f.includes("|")?f.split("|"):[f],A=v?se(_,g):void 0,R=c&&c[0]&&c[0].name||a&&a.name,k=c&&c[1]&&c[1].name||r&&r.name,I=y[n.id]||{},N=(0,$.v$)(n,I,(0,x.n$)(e));return(0,K.cu)(n,R,k,N,S,w,l,T,C,h,i,A,n.hasFirstClassRecommendedStationPair,_)}})).filter(M.v);return(0,K.Mk)(R)};const oe=(0,l.compose)(s.EN,re.FZ,(0,i.connect)(((e,t)=>{var a,r,{direction:n,pricePredictionEligibilityQueryRef:i,deviceType:s}=t,l=n===L.N.OUTWARD,c=l?J.kr:J.HT,p=l?J.H_:J.Td,m=(0,k.FD)(e),h=(0,x.KR)(e),g="return"===h,y=(0,W.Xh)(e,m),E=(0,W.yX)(e,m),b=(0,W.Mi)(e,m),f=h===ae.ki.OPEN_RETURN,_=(0,te.EX)(e)&&(0,x.In)(e)&&f&&((0,o.ue)(e)===ae.xj.ONE_MONTH||m.query.openReturnType===ae.xj.ONE_MONTH)&&s===ne.WO.MOBILE,w=l?_?b:E:y,{cheapestInboundStandard:C,cheapestInboundFirst:R}=(0,W.H2)(e,m),{outwardAlternativeId:D}=(0,T.rd)(e,m),N=g?(0,A.fV)(e,m):[],Z=D?(0,d.U_)(E,N,String(D)):void 0,{arrivalStation:P,departureStation:M}=(0,z.QO)(l)(e,m),U=X(e,m),j=le(e,m,M,P,l,w,Z),G=j.map((e=>(e.disruptions&&e.disruptions.items&&e.disruptions.items.length>0&&(e.disruptions.items=e.disruptions.items.filter((e=>!(e.severity===H.vK&&U.has(e.content))))),e))),V=(0,I.bA)(j),K=(0,I.r7)(G),Y=(0,o.tv)(e),$=(0,S.ae)(e,m);Y&&Y.ukFlowCardTypes&&Object.keys(Y.ukFlowCardTypes).length?r="discountCard":Y&&Y.voucherInput&&(r="voucher");var re=null==j||null===(a=j[0])||void 0===a?void 0:a.departAt,se=(0,Q.O7)(e);return{type:F.ZP.TRAIN,direction:n,departureStation:M,arrivalStation:P,dateTime:re,earlierIsDisabled:c(e,m),laterIsDisabled:p(e,m),mode:(0,q.A)(e,m),results:G,cheapestInboundStandard:Array(G.length).fill(C),cheapestInboundFirst:Array(G.length).fill(R),selectedOutwardAlternative:Z,journeySearchType:h,searchHasSplitDepartDays:(0,S.cX)(e,m),railReplacementType:V,nonRailTransportWarningType:K,discountType:r,uniqueCardTypeNames:$,showRealTimeStyles:(0,v.ro)(e),getResultsItemByAlternativeHash:ie(j),cheapestCachedPrice:(0,B.bn)(e,m),shouldDisplayCheapestCachedPrice:(0,B.Px)(e,m),adsEnabled:(0,ee.f0)(e),enableJourneyDetailsLinkBlueColor:se&&(0,u.eB)(e,O.zA.ENABLE_JOURNEY_DETAILS_LINK_BLUE_COLOR_SRP),pricePredictionEligibilityQueryRef:i}}),((e,t)=>{var{direction:a}=t,r=a===L.N.OUTWARD?"outward":"inward";return{onSelect:t=>{e((0,y.ac)({action:"user"})),e((0,w.yb)({["".concat(r,"Hash")]:t})),e((0,y.FB)({direction:r}))},onMobileReturnSelect:(t,a)=>{e((0,y.ac)({action:"user"})),e((0,w.yb)({outwardHash:t,inwardHash:a})),e((0,y.FB)({direction:r}))},ukAlternativeSelectedMobile:()=>e((0,R.g8)()),onClickEarlier:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e((0,h.q_)({temporalDirection:"previous",transitDefinitionDirection:r,isNSRView:!0,paginationPriceDisplayed:t}))},onClickLater:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e((0,h.q_)({temporalDirection:"next",transitDefinitionDirection:r,isNSRView:!0,paginationPriceDisplayed:t}))},onRequestOpenJourneySummaryModal:t=>e((0,C.Ll)({type:m.e.JOURNEY_SUMMARY_OVERLAY,params:t}))}}),((e,t)=>(0,r.Z)((0,r.Z)((0,r.Z)({},e),t),{},{onSelect:(e,a)=>{t.onSelect(e),a&&t.ukAlternativeSelectedMobile&&t.ukAlternativeSelectedMobile(),(0,n.mark)(P.J6)},onMobileReturnSelect:(e,a)=>{t.onMobileReturnSelect&&t.onMobileReturnSelect(e,a),t.ukAlternativeSelectedMobile&&t.ukAlternativeSelectedMobile()}}))))(j.Z)},63094:(e,t,a)=>{a.d(t,{U_:()=>i,Wz:()=>s});var r=a(44481),n=(e,t,a)=>e.find((e=>e.departAt===t&&e.arriveAt===a)),i=(e,t,a)=>{var r,n=(r=a,e.find((e=>{var{standard:t,first:a}=e;return Boolean(t&&t.alternativeId===r)||Boolean(a&&a.alternativeId===r)})));if(!n&&t.length>0){var i=((e,t)=>e.reduce(((e,a)=>a.find((e=>e.alternativeId===t))||e),void 0))(t,a);return i&&((e,t)=>e.find((e=>{var{standard:a,first:r}=e;return Boolean(a&&a.departAt===t)||Boolean(r&&r.departAt===t)})))(e,i.departAt)}return n},s=(e,t,a,i,s)=>{var l=((e,t,a,i,s)=>e.map((e=>{if(t===r.t.OUTWARD)return{outwardAlternative:n(e,a,i)};var l=s&&(s.standard||s.first),o=l&&n(e,l.departAt,l.arriveAt),c=n(e,a,i);return c?{inwardAlternative:c,outwardAlternative:o}:void 0})).filter((e=>!!e&&!!e.outwardAlternative)))(e,t,a,i,s),o=l.filter((e=>{var t;return!(null==e||null===(t=e.outwardAlternative)||void 0===t||null===(t=t.price)||void 0===t||!t.amount)}));return o.length>0?o.reduce(((e,t)=>t.outwardAlternative.price.amount<e.outwardAlternative.price.amount?t:e)):void 0}},60326:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(98318),n=a(50093),i=a(8888);const s=n.StyleSheet.create({root:{position:"relative",flex:"0 1 49%",[i.Z.breakpoints.small.max]:{flex:"1"}},loaderContainer:{position:"absolute",display:"flex",justifyContent:"center",left:0,right:0},loaderStandardMaxJourneys:{alignItems:"center",top:0,bottom:0},resultsContainer:{borderTop:"1px solid ".concat(r.dp_app_border_base)}})},25673:(e,t,a)=>{a.d(t,{Z:()=>Fe});var r=a(64321),n=a(41344),i=a(33337),s=a(11576),l=a(50093),o=a(84025),c=a.n(o),d=a(29901),p=a(88543),m=a(28770);const u=e=>{var{className:t}=e;return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"16",xmlnsXlink:"http://www.w3.org/1999/xlink",className:t},d.createElement("defs",null,d.createElement("path",{id:"inwardIconDefsPath",d:"M0 0h31.991a3 3 0 0 1 2.974 2.6l1.076 8a3 3 0 0 1-2.973 3.4H0V0z"})),d.createElement("g",{fill:"none",fillRule:"evenodd",transform:"matrix(-1 0 0 1 36 0)"},d.createElement("mask",{id:"inwardIconMask",fill:"#FFF"},d.createElement("use",{xlinkHref:"#inwardIconDefsPath"})),d.createElement("path",{stroke:"#333",d:"M.5.5v13h32.568a2.5 2.5 0 0 0 2.477-2.833l-1.076-8A2.5 2.5 0 0 0 31.991.5H.5z"}),d.createElement("rect",{width:"6",height:"5",x:"8.5",y:"2.5",stroke:"#757575",mask:"url(#inwardIconMask)",opacity:".7",rx:"1"}),d.createElement("rect",{width:"6",height:"5",x:"-.5",y:"2.5",stroke:"#757575",mask:"url(#inwardIconMask)",opacity:".7",rx:"1"}),d.createElement("rect",{width:"9",height:"7",x:"28.5",y:"2.5",stroke:"#757575",mask:"url(#inwardIconMask)",opacity:".7",rx:"1"}),d.createElement("path",{fill:"#FFF",d:"M0 1h1.5v12H0z",mask:"url(#inwardIconMask)"}),d.createElement("rect",{width:"5",height:"5",x:"23.5",y:"10.5",fill:"#FFF",stroke:"#6A6A6A",rx:"2.5"}),d.createElement("rect",{width:"5",height:"5",x:"5.5",y:"10.5",fill:"#FFF",stroke:"#6A6A6A",rx:"2.5"})))};const h=e=>{var{className:t}=e;return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"36",height:"16",viewBox:"0 0 36 16",className:t},d.createElement("defs",null,d.createElement("path",{id:"iconInwardTrain_path",d:"M0 0h21.25a5 5 0 0 1 3.04 1.03L34.47 8.824A4 4 0 0 1 32.04 16H0V0z"})),d.createElement("g",{fill:"none",fillRule:"evenodd",transform:"matrix(-1 0 0 1 36 0)"},d.createElement("mask",{id:"iconInwardTrain_mask",fill:"#fff"},d.createElement("use",{xlinkHref:"#iconInwardTrain_path"})),d.createElement("path",{stroke:"#333",d:"M.5.5v15h31.54a3.5 3.5 0 0 0 2.127-6.28L23.986 1.428A4.5 4.5 0 0 0 21.25.5H.5z"}),d.createElement("rect",{width:"15",height:"4",x:"-1.5",y:"4.5",stroke:"#757575",mask:"url(#iconInwardTrain_mask)",opacity:".7",rx:"2"}),d.createElement("rect",{width:"15",height:"4",x:"24.5",y:"4.5",stroke:"#757575",mask:"url(#iconInwardTrain_mask)",opacity:".7",rx:"2"}),d.createElement("path",{fill:"#FFF",d:"M0 1h1v14H0z",mask:"url(#iconInwardTrain_mask)"})))};const g=e=>{var{className:t}=e;return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"16",xmlnsXlink:"http://www.w3.org/1999/xlink",className:t},d.createElement("defs",null,d.createElement("path",{id:"outwardIconDefsPath",d:"M0 0h31.991a3 3 0 0 1 2.974 2.6l1.076 8a3 3 0 0 1-2.973 3.4H0V0z"})),d.createElement("g",{fill:"none",fillRule:"evenodd"},d.createElement("mask",{id:"outwardIconMask",fill:"#FFF"},d.createElement("use",{xlinkHref:"#outwardIconDefsPath"})),d.createElement("path",{stroke:"#333",d:"M.5.5v13h32.568a2.5 2.5 0 0 0 2.477-2.833l-1.076-8A2.5 2.5 0 0 0 31.991.5H.5z"}),d.createElement("rect",{width:"6",height:"5",x:"8.5",y:"2.5",stroke:"#757575",mask:"url(#outwardIconMask)",opacity:".7",rx:"1"}),d.createElement("rect",{width:"6",height:"5",x:"-.5",y:"2.5",stroke:"#757575",mask:"url(#outwardIconMask)",opacity:".7",rx:"1"}),d.createElement("rect",{width:"9",height:"7",x:"28.5",y:"2.5",stroke:"#757575",mask:"url(#outwardIconMask)",opacity:".7",rx:"1"}),d.createElement("path",{fill:"#FFF",d:"M0 1h1.5v12H0z",mask:"url(#outwardIconMask)"}),d.createElement("rect",{width:"5",height:"5",x:"23.5",y:"10.5",fill:"#FFF",stroke:"#6A6A6A",rx:"2.5"}),d.createElement("rect",{width:"5",height:"5",x:"5.5",y:"10.5",fill:"#FFF",stroke:"#6A6A6A",rx:"2.5"})))};const y=e=>{var{className:t}=e;return d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"36",height:"16",viewBox:"0 0 36 16",className:t},d.createElement("defs",null,d.createElement("path",{id:"iconOutwardTrain_path",d:"M0 0h21.25a5 5 0 0 1 3.04 1.03L34.47 8.824A4 4 0 0 1 32.04 16H0V0z"})),d.createElement("g",{fill:"none",fillRule:"evenodd"},d.createElement("mask",{id:"iconOutwardTrain_mask",fill:"#fff"},d.createElement("use",{xlinkHref:"#iconOutwardTrain_path"})),d.createElement("path",{stroke:"#333",d:"M.5.5v15h31.54a3.5 3.5 0 0 0 2.127-6.28L23.986 1.428A4.5 4.5 0 0 0 21.25.5H.5z"}),d.createElement("rect",{width:"15",height:"4",x:"-1.5",y:"4.5",stroke:"#757575",mask:"url(#iconOutwardTrain_mask)",opacity:".7",rx:"2"}),d.createElement("rect",{width:"15",height:"4",x:"24.5",y:"4.5",stroke:"#757575",mask:"url(#iconOutwardTrain_mask)",opacity:".7",rx:"2"}),d.createElement("path",{fill:"#FFF",d:"M0 1h1v14H0z",mask:"url(#iconOutwardTrain_mask)"})))};var E=a(31872),v=a(43722),b=a(83504),f=a(75853),x=a(57833),_=a(24087),S=a(26067),w=a(16362),A=a(10526),C=a(83570),T=a(29433),R=a(57425),k=a(75352),D=a(51059),I=a(51807),N=a(16558),Z=a(68906),P=a(98184),O=a(34214),L=a(79389),M=a(37977),F=a(23198),W=a(98318),B=a(53897),U=a(34111);const H=l.StyleSheet.create({root:(0,F.Z)((0,F.Z)({},U.W.title5),{},{marginTop:B.i.px2}),stationName:{fontWeight:700,color:W.dp_app_text_base,whiteSpace:"nowrap"},to:{color:W.dp_brand_neutral_duller},destination:{display:"inline-block"}});var{Div:j,Span:J}=E.defaultElements,z=e=>{var{station:t,className:a,testId:r=t}=e;return d.createElement(J,{className:"".concat((0,l.css)(H.stationName)," ").concat(a),"data-test":r},t&&t.name?t.name:"")},q=e=>{var{children:t}=e;return d.createElement(J,{className:(0,l.css)(H.to)},t)};const G=e=>{var{departureStation:t,arrivalStation:a,testId:r="route"}=e;return d.createElement(j,{className:(0,l.css)(H.root)},d.createElement(M.ZP,{id:"common.route.taggedTo",values:{origin:d.createElement(z,{key:0,station:t,testId:"".concat(r,"-departure-station")}),destination:d.createElement(z,{key:1,className:(0,l.css)(H.destination),station:a,testId:"".concat(r,"-arrival-station")})},tagsMap:{alt:q}}))};var V=a(8888),K=a(23394),Y={padding:B.i.px4,fontSize:B.i.px10,lineHeight:B.i.px13,fontWeight:600,color:W.dp_app_text_base,borderRadius:K.E0.m,minWidth:"var(--DEPRECATED-98px)",maxWidth:"var(--DEPRECATED-119px)"};const X=l.StyleSheet.create({header:{padding:"\n    ".concat(V.Z.sizes.spacers.s,"\n    ").concat(V.Z.sizes.spacers.m),position:"relative",background:W.dp_app_backdrop_base,paddingBottom:V.Z.sizes.spacers.s},container:{display:"flex",alignItems:"flex-start",justifyContent:"space-between"},differentStationsWarning:(0,F.Z)((0,F.Z)({},Y),{},{maxWidth:"var(--DEPRECATED-168px)",backgroundColor:W.dp_app_info_brightest}),railReplacementWarning:(0,F.Z)((0,F.Z)({},Y),{},{backgroundColor:W.dp_app_warning_brightest}),nonRailWarning:(0,F.Z)((0,F.Z)({},Y),{},{backgroundColor:W.dp_app_info_brighter}),directionContainer:{display:"flex",alignItems:"center",marginBottom:V.Z.sizes.spacers.xs},icon:{marginRight:B.i.px12},direction:(0,F.Z)((0,F.Z)({},U.W.title5),{},{color:W.dp_brand_neutral_duller,textTransform:"uppercase"}),date:(0,F.Z)((0,F.Z)({},U.W.title4),{},{color:W.dp_app_text_base,paddingTop:B.i.px3})});var Q=a(91939),$=a(8644),{H3:ee,Div:te}=E.defaultElements,ae=function(e){return e.OUTWARD="OUTWARD",e.INWARD="INWARD",e}({}),re={[ae.OUTWARD]:"page.matrix.directionHeader.outward",[ae.INWARD]:"page.matrix.directionHeader.inward"},ne={[ae.OUTWARD]:"directionHeader.alt.outward",[ae.INWARD]:"page.matrix.directionHeader.inward"};const ie=e=>{var t,{type:a,direction:r,dateTime:n,departureStation:i,arrivalStation:s,icon:o,testId:c,routeOverrideMessage:p,railReplacementType:m,nonRailTransportWarningType:u}=e;return d.createElement("header",{className:(0,l.css)(X.header),"data-test":c},d.createElement("div",{className:(0,l.css)(X.container)},d.createElement("div",null,d.createElement("div",{className:(0,l.css)(X.directionContainer)},(t=o)&&d.createElement(t,{"data-test":"direction-header-icon",className:(0,l.css)(X.icon)}),d.createElement("h3",{className:(0,l.css)(X.direction)},d.createElement(P.FormattedMessage,{id:re[r],"aria-hidden":!0}),d.createElement(Q.Z,null,d.createElement(P.FormattedMessage,{id:ne[r]})))),d.createElement(ee,{className:(0,l.css)(X.date),"data-test":"".concat(r,"-travel-date"),"data-date":n},n&&d.createElement($.Z,{date:n,showYear:!0}))),a===_.ZP.COACH?d.createElement("div",{className:(0,l.css)(X.differentStationsWarning)},d.createElement(P.FormattedMessage,{id:"page.coach.directionHeader.differentStations"})):a===_.ZP.TRAIN&&m&&m!==L.E.NONE?d.createElement("div",{className:(0,l.css)(X.railReplacementWarning)},d.createElement(P.FormattedMessage,{id:m===L.E.ALL?"page.ukresults.label.hasAllBusReplacementLegs":"page.ukresults.label.hasAtleastOneBusReplacementLeg"})):u&&u!==L.E.NONE&&d.createElement("div",{className:(0,l.css)(X.nonRailWarning)},d.createElement(P.FormattedMessage,{id:u===L.E.ALL?"page.ukresults.label.hasAllNonRailLegs":"page.ukresults.label.hasAtleastOneNonRailLeg"}))),p?d.createElement(te,{className:(0,l.css)(O.Z.body)},d.createElement(P.FormattedMessage,{id:p})):!(i&&i.isGroupStation||s&&s.isGroupStation)&&d.createElement(G,{departureStation:i,arrivalStation:s,testId:"direction-header-".concat(r)}))};var se=a(56443),le=a(33998),oe=a(90448),ce={cursor:"auto",color:W.dp_brand_neutral_mid,backgroundColor:W.dp_brand_white};const de=l.StyleSheet.create({root:(0,F.Z)((0,F.Z)({},K.cp.body),{},{textAlign:"center",color:W.dp_app_text_base,fontWeight:600,[K.cy.max.s]:{color:W.dp_app_text_base,borderTop:"1px solid ".concat(W.dp_app_border_base),borderBottom:"1px solid ".concat(W.dp_app_border_base)},width:"100%",height:B.i.px44,backgroundColor:W.dp_brand_white,border:"none",borderRadius:0,display:"block",margin:0,padding:"".concat(B.i.px4," ").concat(B.i.px16),cursor:"pointer","-webkit-appearance":"none",":hover":{backgroundColor:"#f8fafa"},":active":{backgroundColor:"#f8fafa"},":disabled":(0,F.Z)({},ce),":focus-visible":{position:"relative",outline:"4px solid ".concat(W.dp_comp_focus_ring)}}),isPending:{color:W.dp_brand_neutral_mid},isDisabled:(0,F.Z)({},ce),displayFlex:{display:"flex",alignItems:"center"}});var pe=a(51273),me=a(14594),ue={[me.hY.EARLIER]:"previous",[me.hY.LATER]:"next"},he={[_.ZP.COACH]:"coach",[_.ZP.TRAIN]:"matrix"};const ge=(0,P.injectIntl)((e=>{var t,a,{intl:r,type:n,direction:i,isDisabled:s,onClick:o,isPending:c,cheapestCachedPrice:p,shouldDisplayCheapestCachedPrice:m}=e,u=!c&&!s&&m&&(null==p?void 0:p.amount)&&(null==p?void 0:p.currencyCode);return d.createElement(se.ZP,{onClick:o,text:(a="page.".concat(he[n],".").concat(i).concat(s?".unavailable":""),u&&null!=p&&p.amount&&null!=p&&p.currencyCode?r.formatMessage({id:a})+" "+r.formatMessage({id:"page.priceCalendar.from"},{price:(0,pe.formatCurrency)({intl:r,value:p.amount,currency:p.currencyCode,hideDecimalsForIntegers:!0})}):r.formatMessage({id:a})),className:(0,l.css)(de.root,de.displayFlex,c&&de.isPending,s&&de.isDisabled),disabled:s,size:"small",icon:i===me.hY.EARLIER?le.default:oe.default,"data-test":"train-results-".concat(i),alignIcon:"leading","aria-label":(t="tooltip.resultsPage.".concat(ue[i]).concat(n===_.ZP.COACH?".coach":""),u&&null!=p&&p.amount&&null!=p&&p.currencyCode?r.formatMessage({id:t})+" "+r.formatMessage({id:"page.priceCalendar.from"},{price:(0,pe.formatCurrency)({intl:r,value:p.amount,currency:p.currencyCode,hideDecimalsForIntegers:!0})}):r.formatMessage({id:t}))})}));var ye=a(71707),Ee=a(55392),ve=V.Z.sizes.spacers,be=l.StyleSheet.create({root:(0,F.Z)((0,F.Z)({},U.W.title5),{},{lineHeight:1.5,color:W.dp_brand_neutral_duller,fontWeight:600,height:B.i.px32,padding:"".concat(ve.xs," ").concat(ve.m," ").concat(ve.xs," ").concat(ve.m),borderTop:"1px solid ".concat(W.dp_app_border_base),borderBottom:"1px solid ".concat(W.dp_app_border_base),backgroundColor:K.O9.palette.grey_60,display:"flex"}),train:{[V.Z.breakpoints.small.min]:{padding:"".concat(ve.xs," ").concat(ve.m)}},coach:{marginRight:B.i.px6,justifyContent:"flex-end"},wrapper:{display:"flex",justifyContent:"flex-start",width:"100%",flex:"0 1 auto"},dateColumn:{width:"100%",[K.cy.max.s]:{width:"50%",justifyContent:"flex-start"}},priceColumn:{width:"55%",display:"flex",[K.cy.max.s]:{width:"100%",justifyContent:"flex-end",padding:0}},priceColumnLeft:{marginLeft:K.W0.s2,marginRight:K.W0.s1},priceColumnRight:{paddingLeft:K.W0.s4,[K.cy.max.m]:{paddingLeft:K.W0.s2}},isPending:{color:W.dp_brand_neutral_mid},faresFrom:{marginRight:ve.l},leftContainer:{width:"164px",[K.cy.max.l]:{width:"144px"},[K.cy.max.s]:{width:"50%",justifyContent:"flex-start"}},rightContainer:{width:"50%",flexGrow:1}}),fe=V.Z.sizes.spacers;const xe=l.StyleSheet.create({root:(0,F.Z)((0,F.Z)({},U.W.title5),{},{lineHeight:1.5,color:W.dp_app_text_base,padding:"".concat(fe.s," ").concat(fe.m," ").concat(fe.s," ").concat(fe.m),borderTop:"1px solid ".concat(W.dp_app_border_base),borderBottom:"1px solid ".concat(W.dp_app_border_base),backgroundColor:K.O9.palette.grey_60,display:"flex"}),train:{[V.Z.breakpoints.small.min]:{padding:"".concat(fe.xs," ").concat(fe.m)}},coach:{marginRight:B.i.px6},wrapper:{display:"flex",justifyContent:"flex-end",width:"100%",flex:"0 1 auto"},dateColumn:{width:"100%",[V.Z.breakpoints.small.max]:{width:"50%"}},priceColumn:{width:"5.075rem",padding:"0 ".concat(fe.s),display:"flex",[V.Z.breakpoints.small.max]:{justifyContent:"flex-end",padding:0}},priceColumnLeft:{marginRight:fe.xs},isPending:{color:W.dp_brand_neutral_mid},faresFrom:{marginRight:fe.l},leftContainer:{width:"100%"},rightContainer:{[K.cy.min.m]:{width:"100%"}},priceColumnRight:{}});const _e=e=>{var{type:t,date:a,isPending:r,mobile:n,journeyType:i,showRealTimeStyles:s}=e,o=s?be:xe,c=n?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return()=>d.createElement(P.FormattedMessage,{id:"page.ukresults.heading.mobile.".concat(t)},(t=>d.createElement("span",{className:(0,l.css)(e.priceColumn)},t)))}(o,i):((e,t)=>({[_.ZP.COACH]:()=>d.createElement("div",{className:(0,l.css)(t.wrapper,t.coach)},d.createElement("span",{className:(0,l.css)(t.faresFrom)},d.createElement(P.FormattedMessage,{id:"page.coach.faresFrom"}))),[_.ZP.TRAIN]:()=>d.createElement("div",{className:(0,l.css)(t.wrapper)},d.createElement("span",{className:(0,l.css)(t.priceColumn,t.priceColumnLeft)},d.createElement(P.FormattedMessage,{id:"page.ukresults.heading.standardClass"})),d.createElement("span",{className:(0,l.css)(t.priceColumn,t.priceColumnRight)},d.createElement(P.FormattedMessage,{id:"page.ukresults.heading.firstClass"})))}[e]))(t,o);return d.createElement("div",{className:(0,l.css)(o.root,t===_.ZP.TRAIN&&o.train,r&&o.isPending)},d.createElement("span",{className:(0,l.css)(o.leftContainer),"data-test":"left-container"},a&&d.createElement("span",{className:(0,l.css)(o.dateColumn)},d.createElement($.Z,{date:a,showYear:!0}))),d.createElement("span",{className:(0,l.css)(o.rightContainer),"data-test":"right-container"},d.createElement(c,null)))};var Se=a(60326),we=a(83367);const Ae=l.StyleSheet.create({alternativesListWrapper:{listStyleType:"none"},resultsUnavailable:{padding:"".concat(we.spacers.m," ").concat(we.spacers.l," ").concat(we.spacers.m," ").concat(we.spacers.m)},SRPAdVariant:{margin:0,padding:"".concat(K.W0.s6," 0"),backgroundColor:W.dp_app_backdrop_dull}});var Ce=a(22319),Te=a(44149),Re=a(85054),ke=a(35926),De=a(52718),Ie=a(98864),Ne=e=>{for(var t=0,a=0;a<e.length;a++){var r=e[a],n=r.standardClassAlternative&&r.standardClassAlternative.isAvailable&&(0,De.Dr)(r.standardClassAlternative)||0,i=r.firstClassAlternative&&r.firstClassAlternative.isAvailable&&(0,De.Dr)(r.firstClassAlternative)||0,s=r.cheapestFlexibleAlternative&&r.cheapestFlexibleAlternative.outwardAlternative&&r.cheapestFlexibleAlternative.outwardAlternative.availability&&"available"===r.cheapestFlexibleAlternative.outwardAlternative.availability.status&&(0,De.Dr)(r.cheapestFlexibleAlternative.outwardAlternative)||0,l=0===n||n>=i?i:n,o=0===s||s>=l?l:s;if(0===t&&o>0)t=o;else if(o>0&&t!==o)return!0}return!1},Ze=e=>{var{type:t,results:a,onMouseoverDisruption:n,onSelect:i,onRequestOpenJourneySummaryModal:s,showStations:o,isPending:c,discountType:p,journeyType:m,cheapestInboundFirst:u,cheapestInboundStandard:h,selectedOutwardAlternative:g,direction:y,deviceType:E,onMobileReturnSelect:v,showRealTimeStyles:b,isInitialResultPage:f,adsEnabled:x,portal:w,enableViewInAppSectionFromDisruption:A,showSmartCardText:C,selectedJourney:T,querySelectedPartner:R,enableMetasearchUIEnhancementsUK:k,onUpdateJourney:D,enableJourneyDetailsLinkBlueColor:I,isBikeEnabled:N,pricePredictionEligibilityQueryRef:Z}=e,O="mobile"===E,L=a.filter((e=>e.departAtDate===a[0].departAtDate)),{pricePredictionImpression:M}=(0,Ie.Z)();return a.length>0?d.createElement("ul",{className:(0,l.css)(Ae.alternativesListWrapper)},a.map(((e,l)=>d.createElement(d.Fragment,{key:"journey-".concat((0,ke.VD)(e),"-").concat(l)},d.createElement("li",null,l>0&&a[l-1].departAtDate!==e.departAtDate&&d.createElement(_e,{key:"journey-".concat((0,ke.VD)(e),"-").concat(l,"-date-header"),type:t,date:e.departAtDate,isPending:c,journeyType:m,mobile:O,showRealTimeStyles:e.showRealTimeInfo||b}),d.createElement(Ce.ZP,(0,r.Z)({},e,{cheapestInboundStandard:h&&h[l],cheapestInboundFirst:u&&u[l],selectedOutwardAlternative:g,direction:y,journeyType:m,onMouseoverDisruption:n,onSelect:i,onMobileReturnSelect:v,testId:"column-result-".concat(l+1),onRequestOpenJourneySummaryModal:s,showStations:o,showCheapestLabel:!O||Ne(a),discountType:p,showRealTimeStyles:b,portal:w,enableViewInAppSectionFromDisruption:A,selectedJourney:T,querySelectedPartner:R,enableMetasearchUIEnhancementsUK:k,onUpdateJourney:D,showSmartCardText:C,enableJourneyDetailsLinkBlueColor:I,isBikeEnabled:N,pricePredictionEligibilityQueryRef:Z,impressionTrackingEvent:M,mappedCarrierCode:e.mappedCarrierCode}))),x&&(e=>{var{index:t,type:a,isMobile:r,resultsAtInitialDate:n,isInitialResultPage:i,direction:s}=e;return"train"===a&&i&&r&&s===S.N.OUTWARD&&t<=n.length-1&&(2===t||t<2&&t===n.length-1)})({index:l,type:t,isMobile:O,resultsAtInitialDate:L,isInitialResultPage:f,direction:y})&&d.createElement("li",null,d.createElement(Re.Z,{adsKey:"return"===m?Te.rY.JOURNEY_RESULTS_RETURN:Te.rY.JOURNEY_RESULTS_SINGLE,customStyles:Ae.SRPAdVariant})))))):d.createElement("div",{className:(0,l.css)(Ae.resultsUnavailable)},d.createElement(P.FormattedMessage,{id:"page.".concat(t===_.ZP.COACH?"coach":"ukresults",".tabs.resultsUnavailable")}))};const Pe=(0,d.memo)(Ze);var Oe=(e,t)=>{if(_.ZP.COACH===e){if(S.N.OUTWARD===t)return g;if(S.N.INWARD===t)return u}if(_.ZP.TRAIN===e){if(S.N.OUTWARD===t)return y;if(S.N.INWARD===t)return h}};class Le extends d.Component{constructor(e){super(e),this.state={isInitialResultPage:!0}}render(){var e,t,a,r,{type:n,direction:s,dateTime:o,departureStation:c,deviceType:p,arrivalStation:u,onSelect:h,onClickEarlier:g,onClickLater:y,earlierIsDisabled:E,laterIsDisabled:v,mode:b,results:f,routeOverrideMessage:w,onRequestOpenJourneySummaryModal:A,journeySearchType:C,searchHasSplitDepartDays:T,railReplacementType:R,nonRailTransportWarningType:k,discountType:D,cheapestInboundStandard:I,cheapestInboundFirst:N,selectedOutwardAlternative:P,uniqueCardTypeNames:O,onMobileReturnSelect:L,showRealTimeStyles:M,cheapestCachedPrice:F,shouldDisplayCheapestCachedPrice:W,adsEnabled:B,portal:U,enableViewInAppSectionFromDisruption:H,showSmartCardText:j,selectedJourney:J,querySelectedPartner:z,enableMetasearchUIEnhancementsUK:q,onUpdateJourney:G,enableJourneyDetailsLinkBlueColor:V,isBikeEnabled:K,journeyHasPromoApplied:Y,pricePredictionEligibilityQueryRef:X}=this.props,Q=p===i.WO.MOBILE,$=Q||T,ee=Boolean(W&&(null==F||null===(e=F.earlier)||void 0===e?void 0:e.amount)&&(null==F||null===(t=F.earlier)||void 0===t?void 0:t.currencyCode)),te=Boolean(W&&(null==F||null===(a=F.later)||void 0===a?void 0:a.amount)&&(null==F||null===(r=F.later)||void 0===r?void 0:r.currencyCode));return d.createElement("div",{className:(0,l.css)(Se.Z.root),"data-test":"".concat(n,"-results-container-").concat(s)},d.createElement(Z.Z,{direction:Q?S.N.INWARD:s,isPending:b===x.h.PENDING},!Q&&d.createElement(ie,{type:n,icon:Oe(n,s),direction:s,dateTime:o,departureStation:c,arrivalStation:u,routeOverrideMessage:w,testId:"".concat(n,"-direction-header-").concat(s),railReplacementType:R,nonRailTransportWarningType:k}),Q&&O&&!!O.length&&d.createElement(Ee.Z,{uniqueCardTypeNames:O}),Q&&Y&&d.createElement(ye.Z,null),f?d.createElement("div",{className:(0,l.css)(Se.Z.resultsContainer)},d.createElement(ge,{type:n,direction:me.hY.EARLIER,onClick:()=>{g(ee),this.setState({isInitialResultPage:!1})},isDisabled:E,isPending:b!==x.h.LOADED,shouldDisplayCheapestCachedPrice:W,cheapestCachedPrice:null==F?void 0:F.earlier}),d.createElement(_e,{type:n,date:$?o:void 0,isPending:b!==x.h.LOADED,journeyType:C,mobile:Q,showRealTimeStyles:M}),d.createElement(Pe,{type:n,journeyType:C,results:f,cheapestInboundStandard:I,cheapestInboundFirst:N,selectedOutwardAlternative:P,direction:s,onSelect:h,onMobileReturnSelect:L,onRequestOpenJourneySummaryModal:A,showStations:c&&c.isGroupStation||u&&u.isGroupStation||Q&&n===_.ZP.COACH,isPending:b!==x.h.LOADED,discountType:D,showRealTimeStyles:M,isInitialResultPage:this.state.isInitialResultPage,adsEnabled:B,portal:U,enableViewInAppSectionFromDisruption:H,showSmartCardText:j,selectedJourney:J,querySelectedPartner:z,enableMetasearchUIEnhancementsUK:q,onUpdateJourney:G,enableJourneyDetailsLinkBlueColor:V,isBikeEnabled:K,pricePredictionEligibilityQueryRef:X,deviceType:p}),d.createElement(ge,{type:n,direction:me.hY.LATER,onClick:()=>{y(te),this.setState({isInitialResultPage:!1})},isDisabled:v,isPending:b!==x.h.LOADED,shouldDisplayCheapestCachedPrice:W,cheapestCachedPrice:null==F?void 0:F.later})):null),"return"!==C&&(b===x.h.PENDING||b===x.h.SKELETON)&&d.createElement("div",{className:(0,l.css)(Se.Z.loaderContainer,Se.Z.loaderStandardMaxJourneys)},d.createElement(m.Z,{dataTest:"results-column-loader"})))}}var Me=e=>e&&e.name||"_________________________";const Fe=(0,n.FZ)((0,s.t$)((e=>({direction:e.direction,dateTime:c()().format(),departureStation:{name:Me(e.departureStation)},arrivalStation:{name:Me(e.arrivalStation)},results:Array(R.HW).fill(void 0).map(((t,a)=>({type:e.type,onSelect:()=>{},onRequestOpenJourneySummaryModal:()=>{},journeyId:"",departAt:c()().format(),departAtDate:"",arriveAt:c()().format(),isFastest:!1,testId:"testId"+a,offerId:""+a,changes:0,departureStation:"",arrivalStation:"",hasRailReplacementService:!1,hasBus:t&&t.hasBus,hasFerry:t&&t.hasFerry,standardClassAlternative:{selectionId:"",price:{amount:88.88,currencyCode:"GBP"},fullPrice:{amount:88.88,currencyCode:"GBP"},isCheapest:!1,isSelected:!1,isAvailable:!0},cheapestInboundStandard:[{selectionId:"",price:{amount:88.88,currencyCode:"GBP"},fullPrice:{amount:88.88,currencyCode:"GBP"}}],cheapestInboundFirst:[{selectionId:"",price:{amount:88.88,currencyCode:"GBP"},fullPrice:{amount:88.88,currencyCode:"GBP"}}],firstClassAlternative:{selectionId:"",price:{amount:88.88,currencyCode:"GBP"},fullPrice:{amount:88.88,currencyCode:"GBP"},isCheapest:!1,isSelected:!1,isAvailable:!0},selectedOutwardAlternative:{standard:{price:{amount:88.88,currencyCode:"GBP"}},first:{price:{amount:88.88,currencyCode:"GBP"}}},disruptions:{items:[]}}))),mode:x.h.SKELETON})),(e=>{var{mode:t}=e;return t===x.h.SKELETON}),(()=>(0,l.css)(E.aphroditeStyles.default)))((e=>{var{portal:t,enableViewInAppSectionFromDisruption:a,smartCardOnlyTxtEnabled:n}=(0,f.x)(),[i,s]=(0,d.useState)(""),l=(0,v.Z)(),o=(0,p.useSelector)(b.FD),c=(0,p.useSelector)((e=>(0,I.qn)(e,o))),m=(0,p.useSelector)((t=>e.direction===S.N.OUTWARD?(0,k.qn)(t,o):(0,k.kN)(t,o))),u=(0,p.useSelector)((e=>(0,A.oH)(e,m))),h=(0,p.useSelector)((e=>(0,w.N3)(e,i))),g=(0,p.useSelector)((e=>(0,D.GK)(e))),y=(0,p.useSelector)(C.Yw),E=(0,p.useSelector)(D.zN),x=(0,p.useSelector)(T.ru),_=n&&c.includes(N.Dc)&&!(!u||u.name!==N.eA)&&t===h;return d.createElement(Le,(0,r.Z)({},e,{journeyHasPromoApplied:y,ukVoucherInput:g,portal:t,querySelectedPartner:E,enableMetasearchUIEnhancementsUK:x,enableViewInAppSectionFromDisruption:a,showSmartCardText:n&&_,selectedJourney:i,onUpdateJourney:e=>{s(e)},isBikeEnabled:l}))})))},68906:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(50093),n=a(29901),i=a(98318),s=a(8888);const l=r.StyleSheet.create({root:{border:"1px solid ".concat(i.dp_app_border_base),transition:"opacity 0.15s ease-in-out",[s.Z.breakpoints.small.max]:{width:"100vw"}},pending:{opacity:.4},empty:{border:"none"}});const o=e=>{var{children:t,direction:a,isPending:i,isEmpty:s}=e;return n.createElement("div",{className:(0,r.css)(l.root,i&&l.pending,s&&l.empty)},t)}},8107:(e,t,a)=>{a.d(t,{W:()=>n,s:()=>i});var r=a(8888),n="1rem",i={columnContainer:{display:"flex",marginTop:r.Z.sizes.spacers.m,width:"100%",position:"relative"},spacer:{flex:"0 0 ".concat(n)}}}}]);