"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[47202],{51471:(e,t,a)=>{a.d(t,{E4:()=>i,ES:()=>r,Yl:()=>n});const r="var(--dp_font_weight_regular)",n="var(--dp_font_weight_semibold)",i="var(--dp_font_weight_bold)"},41653:(e,t,a)=>{a.d(t,{IV:()=>m,il:()=>C,sT:()=>x});var r=a(29901),n=a(98953),i=a(16726);class l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}}class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}var s=async({payload:e,seoGraphQLApiUrl:t,timeout:a=800,authToken:r})=>{var n,s,c,d;if(!e)throw new o("No payload received");if(!t)throw new o("No api url received");const u=r?{Authorization:r}:{},m=await i.Z.post(t,{query:"\nquery cmsComponents($payload: Payload!) {\n\tcmsComponents(payload: $payload) {\n    type\n    ...on PromoBanner {\n      content {\n        message\n      }\n      options {\n        theme\n      }\n    }\n    ... on PromoCode {\n      promoCodeContent: content {\n        title,\n        endDate,\n        description,\n        operator,\n        discountCode,\n        fromDate,\n        toDate\n      }\n    }\n  }\n}\n",variables:{payload:e},operationName:"cmsComponents"},{headers:{...u,"Content-Type":"application/json"},timeout:a,validateStatus:()=>!0}),p=await m.data;if(m.status<200||m.status>=300)throw new l(null==(c=null==(s=null==(n=p.error)?void 0:n.errors)?void 0:s[0])?void 0:c.message);return(null==(d=p.data)?void 0:d.cmsComponents)||null};var c=(0,r.createContext)({isLoading:!1,data:null});const d=c.Provider,u=async(e,t,a,{queryKey:r})=>{const[,{payload:n}]=r;try{return await s({payload:n,seoGraphQLApiUrl:e,timeout:a,authToken:t})}catch(e){return console.log("CMSableDataProvider",e),null}};var m=({payload:e,seoGraphQLApiUrl:t,authToken:a,timeout:i,children:l})=>{const{data:o,isLoading:s}=(0,n.useQuery)(["cmsabledata",{payload:e}],u.bind(null,t,a,i),{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1});return r.createElement(d,{value:{isLoading:s,data:o||null}},l)},p=a(64006);var v=()=>(0,r.useContext)(c);const h=(e,t)=>null==e?void 0:e.find((e=>e.type===t));var g=e=>{const{isLoading:t,data:a}=v();return{isLoading:t,component:a?h(a,e):void 0}},f=(e=>(e.PromoBanner="promoBanner",e.PromoCode="promoCode",e))(f||{});const y=e=>t=>{"Enter"===t.key&&(null==e||e())};var b=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""};const E=["default","info","warning","neutral","black"];var C=({onCtaImpressionHandler:e,onCtaClickHandler:t})=>{var a,n;const[i,l]=(0,r.useState)(!1),o=g(f.PromoBanner),s=null==o?void 0:o.component,c=null==(a=null==s?void 0:s.content)?void 0:a.message;return(0,r.useEffect)((()=>{c&&!i&&(l(!0),null==e||e({message:b(c)}))}),[c,i,e]),s&&c?r.createElement(p.Z,{theme:(u=null==(n=s.options)?void 0:n.theme,E.includes(u)?u:"default")},r.createElement("div",{"data-nosnippet":!0,dangerouslySetInnerHTML:{__html:c},...(d=()=>null==t?void 0:t({message:b(c)}),{role:"button",tabIndex:0,onKeyDown:y(d),onClick:d})})):null;var d,u},S=a(80800),A=a(4175);var _=a(45712);const w=(e,t)=>!(!e||!t)&&!function(e){return(0,A.Z)(1,arguments),(0,S.Z)(e).getTime()<Date.now()}((0,_.Z)(t));var x=()=>{var e;const t=g(f.PromoCode),a=null==t?void 0:t.component;if(a&&"promoCodeContent"in a){if(!(null==(e=a.promoCodeContent)?void 0:e.discountCode)||!w(a.promoCodeContent.discountCode,a.promoCodeContent.endDate))return null;const{discountCode:t,description:r,title:n,operator:i,endDate:l,fromDate:o,toDate:s}=a.promoCodeContent;return{discountCode:t,title:n,trainOperator:i,promoCodeEndDate:l,description:r,fromDate:o,toDate:s}}return null}},64006:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(51865),n=a.n(r),i=a(29901);var l=({children:e,theme:t="default",sticky:a=!1,animate:r=!1,className:l=""})=>{const[o,s]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{let e;return r&&a&&(e=setTimeout((()=>s(!0)),500)),()=>clearTimeout(e)}),[r,a]),!e)return null;const c={"PromoBanner-module__promoBannerDefault__fa2st":"default"===t,"PromoBanner-module__promoBannerInfo__SgJgC":"info"===t,"PromoBanner-module__promoBannerWarning__qdaV6":"warning"===t,"PromoBanner-module__promoBannerNeutral__CM7zw":"neutral"===t,"PromoBanner-module__promoBannerBlack__9EXmV":"black"===t,"PromoBanner-module__promoBannerSticky__M1BCy":a&&!r||o,"PromoBanner-module__promoBannerAnimate__3OJAD":r};return i.createElement("div",{className:n()("PromoBanner-module__promoBanner__MXCyz",l,c)},e)}},19648:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(98318),n=a(50093),i=a(29901),l=a(98184),o=a(88543),s=a(51756),c=a(51059),d=a(83504),u=a(42292),m=a(35779),p=a(23394);const v=n.StyleSheet.create({container:{alignItems:"center",display:"flex",[p.cy.min.m]:{marginTop:m.Ui},[p.cy.max.s]:{backgroundColor:r.dp_app_backdrop_base,borderTop:"1px solid ".concat(r.dp_app_border_base),height:44,justifyContent:"center",width:"100%"}},discountCardAppliedCopy:{marginLeft:m.OT}});var h=a(97866),g=e=>{var{isMobile:t}=e,a=(0,o.useSelector)(d.FD),m=(0,o.useSelector)((e=>(0,u.R6)(e,a))),p=(0,o.useSelector)(h.S3),g=(0,o.useSelector)(c.$b);return p&&g&&m?i.createElement("div",{className:(0,n.css)(v.container),"data-test":"discount-card-benefits-banner"},i.createElement(s.Z,{fill:t?r.dp_app_text_base:r.dp_brand_neutral_mid}),i.createElement("span",{className:(0,n.css)(v.discountCardAppliedCopy)},i.createElement(l.FormattedMessage,{id:"customerJourneySummary.selectedJourney.discountCardApplied"}))):null}},57930:(e,t,a)=>{a.d(t,{H:()=>Oe,b:()=>We});var r=a(41344),n=a(50093),i=a(29901),l=a(96172),o=a(88543),s=a(60654),c=a(26625),d=a(82768),u=a(95444),m=a(70196),p=a(3211),v=a(42292),h=a(19648),g=a(21168),f=a(98094),y=a(65737),b=a(51059),E=a(51807),C=a(1215),S=a(89034),A=a(58186),_=a(51918),w=a(10301),x=a(11089),R=a(98184),T=a(50453),L=a(87864),Z=a(98318);const D=n.StyleSheet.create({container:{display:"flex",justifyContent:"center",backgroundColor:"white",height:50,alignItems:"center",border:"1px solid ".concat(Z.dp_brand_neutral_brighter),borderTopWidth:"0px",width:"100%"},linkText:{fontWeight:"bold",cursor:"pointer",color:Z.dp_app_link_base,":hover":{color:Z.dp_app_link_hover,textDecoration:"underline"}},infoText:{color:Z.dp_app_text_base}});var N=e=>{var{carrier:t,toggleCarrierFilter:a,inwardView:r}=e;return r?i.createElement("div",{className:(0,n.css)(D.container,D.infoText)},i.createElement(R.FormattedMessage,{id:"page.results.deepLinkInfo.inward"})):i.createElement("button",{className:(0,n.css)(D.container,D.linkText),onClick:a},i.createElement(R.FormattedMessage,{id:"page.results.deepLinkInfo.viewAllResults",values:{carrier:t}}))};class P extends i.PureComponent{render(){var{carrier:e,toggleCarrierFilter:t,inwardView:a}=this.props,r=(0,L.L)(e);return[e&&i.createElement("div",{key:"DPIHeader",className:(0,n.css)(D.container,D.infoText)},i.createElement(T.pl,{name:e,testId:e}),i.createElement(R.FormattedMessage,{id:"page.results.deepLinkInfo.sponsoredBy",values:{carrier:r}})),i.createElement(N,{key:"carrierToggle",carrier:e,toggleCarrierFilter:t,inwardView:a})]}}const F=P;const I=(0,o.connect)(void 0,(e=>({toggleCarrierFilter:()=>{e((0,x.AE)())}})))(F);var M=a(72222);const k=(0,R.injectIntl)((e=>{var{cheapestCachedPrice:t}=e;return t&&t.amount&&t.currencyCode?i.createElement(i.Fragment,null,i.createElement("span",null,"Â "),i.createElement(R.FormattedMessage,{id:"page.priceCalendar.from",values:{price:i.createElement(M.Z,{value:t.amount,currency:t.currencyCode,hideDecimalsForIntegers:!0})}})):null}));var B=a(72750),J=a(92989),H=a(41966),V=a(28770),j=a(44481),U=a(23198),W=a(36841),O=a(23394);const z=W.StyleSheet.create({container:{display:"flex",justifyContent:"center",backgroundColor:Z.dp_app_backdrop_base,height:44,alignItems:"center",border:"1px solid ".concat(Z.dp_app_border_base),width:"100%",[O.cy.min.m]:{borderRadius:O.E0.m},[O.cy.max.s]:{borderLeft:0,borderRight:0}},containerHover:{cursor:"pointer",":active":{backgroundColor:O.O9.palette.grey_60,borderColor:Z.dp_app_border_base},":hover":{backgroundColor:O.O9.palette.grey_60,borderColor:Z.dp_app_border_base},[O.cy.min.m]:{":active":{backgroundColor:Z.dp_comp_button_tertiary_background_pressed},":hover":{backgroundColor:O.O9.palette.grey_60}}},earlier:{[O.cy.min.m]:{marginBottom:O.W0.s3}},later:{marginTop:O.W0.s2,[O.cy.min.m]:{marginTop:"11px"}},element:(0,U.Z)((0,U.Z)({},O.cp.small),{},{color:Z.dp_app_text_base,display:"flex",alignItems:"center",fontWeight:600,[O.cy.min.m]:{cursor:"pointer",color:Z.dp_app_text_base}}),elementDisabled:{display:"flex",alignItems:"center",fontWeight:600},icon:{width:14,height:14,marginRight:6},earlierChevron:{transform:"rotate(180deg)"},loadingContainer:{marginLeft:O.W0.s2,color:Z.dp_app_text_base,fontWeight:600,[O.cy.min.m]:{color:Z.dp_app_text_subtle}}});const Q=(0,R.injectIntl)((e=>{var{type:t,transportMode:a,onNavigate:r,intl:l,inwardView:o,isDisabled:s,isAvailable:c,isLoading:d,isPending:u,cheapestCachedPrice:m,shouldDisplayCheapestCachedPrice:p}=e,v=(0,n.css)(z.container,!d&&!s&&z.containerHover,"previous"===t?z.earlier:z.later),h=Boolean(p&&m&&m.amount&&m.currencyCode);return d?i.createElement("div",{className:v,"data-test":t},i.createElement(V.Z,{size:17,borderWidth:3,spinnerColor:Z.dp_brand_secondary_duller,borderColor:Z.dp_brand_secondary_brighter}),i.createElement("div",{className:(0,n.css)(z.loadingContainer)},i.createElement(R.FormattedMessage,{id:"page.matrix.directionHeader.loading"}))):i.createElement("button",{className:v,onClick:()=>r(t,o?j.t.INWARD:j.t.OUTWARD,o,h),disabled:s,"data-test":t,"aria-label":l.formatMessage({id:"tooltip.resultsPage.".concat(t).concat("coach"===a?".coach":"")}),"data-a11y":!0},i.createElement("div",{className:s?(0,n.css)(z.elementDisabled):(0,n.css)(z.element),title:l.formatMessage({id:"tooltip.resultsPage.".concat(t).concat("coach"===a?".coach":"")}),"data-test":"button-content","aria-hidden":!h},c||u?i.createElement(i.Fragment,null,i.createElement(H.Z,{className:(0,n.css)(z.icon,"previous"===t&&z.earlierChevron),ariaHidden:!0}),i.createElement(R.FormattedMessage,{id:"page.matrix.directionHeader.".concat(t)}),h&&i.createElement(k,{cheapestCachedPrice:m})):i.createElement(R.FormattedMessage,{id:"".concat("previous"===t?"page.matrix.directionHeader.unavailableEarlier":"page.matrix.directionHeader.unavailableLater")})))}));const q=e=>{var{type:t,inwardView:a,transportMode:r,selectorParams:n,isLoading:l,isPaginating:s,isPending:c,cheapestCachedPrice:d}=e,u=(0,o.useDispatch)(),m=(0,i.useCallback)(((e,t,a,n)=>{var i=a?B.cF:B.NJ;u(i({temporalDirection:e,transitDefinitionDirection:t,transportModes:[r],paginationPriceDisplayed:n}))}),[r]),p=(0,o.useSelector)((e=>(0,J.kr)(e,n))),v=(0,o.useSelector)((e=>(0,J.H_)(e,n))),h=(0,o.useSelector)((e=>(0,J.HT)(e,n))),g=(0,o.useSelector)((e=>(0,J.f3)(e,n))),f=(0,o.useSelector)((e=>(0,J.r1)(e,n))),y=(0,o.useSelector)((e=>(0,J.W0)(e,n))),E=(0,o.useSelector)((e=>(0,J.Z8)(e,n))),C=(0,o.useSelector)((e=>(0,J.Td)(e,n))),S=(0,o.useSelector)(b.Yq),_=(0,o.useSelector)((e=>(0,A.Px)(e,n))),w=S&&_,x=a?"previous"===t?h:C:"previous"===t?p:v,R=a?"previous"===t?E:g:"previous"===t?f:y;return i.createElement(Q,{type:t,inwardView:a,isDisabled:x,isAvailable:R,isLoading:l,onNavigate:m,shouldDisplayCheapestCachedPrice:w,cheapestCachedPrice:d,isPaginating:s,isPending:c,transportMode:r})};var Y=a(31616),G=a(67292);const $=e=>{var{className:t,fill:a}=e;return i.createElement("svg",{fill:a,className:t,viewBox:"0 0 24 24",width:"24px",height:"24px"},i.createElement("path",{d:"M2,8 L18,8 L18,20 L2,20 L2,8 Z M13.9798254,0 L13.9798254,2 L6,2 L6,0 L3,0 L3,2 L2.00104344,2 C0.895897664,2 1.04665405e-13,2.89821238 9.79822387e-14,3.99079514 L-7.88860905e-31,20.0092049 C-6.72539167e-15,21.1086907 0.898212381,22 1.99079514,22 L18.0092049,22 C19.1086907,22 20,21.1017876 20,20.0092049 L20,3.99079514 C20,2.89130934 19.1090599,2 17.9997971,2 L16.9760131,2 L17,0 L13.9798254,0 Z M10,18 L16,18 L16,12 L10,12 L10,18 Z"}))};var K=a(6924),X=a(82194),ee=a(33439),te=n.StyleSheet.create({smallGray:{width:"1.5em",height:"1.5em",objectFit:"contain",paddingRight:O.W0.s2}}),ae=n.StyleSheet.create({container:(0,U.Z)((0,U.Z)({display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:O.O9.palette.grey_60,borderLeft:"1px solid ".concat(Z.dp_app_border_base),borderRight:"1px solid ".concat(Z.dp_app_border_base),paddingTop:O.W0.s2,paddingBottom:O.W0.s2},ee.O),{},{[O.cy.max.s]:{height:40,borderLeft:0,borderRight:0},[O.cy.min.m]:{height:48,paddingLeft:O.W0.s4,paddingRight:O.W0.s4}}),firstRowContainer:{[O.cy.min.m]:{borderTopLeftRadius:O.E0.m,borderTopRightRadius:O.E0.m,borderTop:"1px solid ".concat(Z.dp_app_border_base),borderLeft:"1px solid ".concat(Z.dp_app_border_base),borderRight:"1px solid ".concat(Z.dp_app_border_base),borderBottom:"1px solid ".concat(Z.dp_app_border_base)}},item:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:Z.dp_app_text_base},travelHeadingContainer:{display:"flex",flex:2},businessPremier:{marginRight:0},travelHeading:{textAlign:"center",fontWeight:600,lineHeight:1.2,[O.cy.max.s]:{justifyContent:"flex-end",fontWeight:400}},date:{justifyContent:"flex-start",flex:2,[O.cy.min.m]:(0,U.Z)((0,U.Z)({},O.cp.body),{},{fontWeight:700,letterSpacing:0,fontFamily:O.cp.title1.fontFamily})}}),re=a(75853),ne=a(71695),ie=a(94575),le=["deviceType"],oe=["standard","1stClass"],se=e=>{var t,{date:a,showAfterTimeLabel:r=!1}=e,{enableUSLocalisation:n}=(0,re.x)(),{locale:l}=(0,ie.YB)(),o=l===ne.vi.AMERICANENGLISH&&n;return t=o?"dateTimeFormat.dateUSFormat":r?"dateTimeFormat.dateAfterTime":"dateTimeFormat.date",i.createElement(R.FormattedMessage,{id:t,values:{weekday:i.createElement(R.FormattedDate,{value:a,weekday:"short",timeZone:"UTC"}),day:i.createElement(R.FormattedDate,{value:a,day:"numeric",timeZone:"UTC"}),month:i.createElement(R.FormattedDate,{value:a,month:"short",timeZone:"UTC"}),year:i.createElement(R.FormattedDate,{value:a,year:"numeric",timeZone:"UTC"}),time:r?i.createElement(R.FormattedTime,{value:a,hour12:o,timeZone:"UTC"}):void 0}})},ce=e=>{var{firstDepartAt:t,lastJourneySearchStatus:a,isPaginating:r,isFirstRowHeader:l,inwardView:o=!1}=e,c=a===s.LoadStatus.PENDING&&!r,d=t&&(0,G.Qb)(t),u=o?"inward":"outward",m="".concat("page.europe.journeys.header",".").concat(u);return i.createElement("div",{className:(0,n.css)(ae.container,l&&ae.firstRowContainer)},i.createElement("div",{className:(0,n.css)(ae.item,ae.date),"data-test":"eu-matrix-date"},!c&&d&&i.createElement(se,{date:d})),i.createElement("div",{className:(0,n.css)(ae.travelHeadingContainer)},!c&&i.createElement(R.FormattedMessage,{id:m},(e=>i.createElement("div",{className:(0,n.css)(ae.item,ae.travelHeading)},e)))))},de=e=>{var{firstDepartAt:t,lastJourneySearchStatus:a,headerSuffix:r="",isPaginating:l,hideSuffix:o,isFirstRowHeader:c,departureOfFirstJourney:d=""}=e,u=a===s.LoadStatus.PENDING&&!l,{filters:m}=(0,X.Z)(),p=Boolean((0,K.Yb)(m)&&c&&d),h=p?(0,G.Qb)(d):t&&(0,G.Qb)(t);return i.createElement("div",{className:(0,n.css)(ae.container,c&&ae.firstRowContainer),"data-test":"euresult-row-header"},i.createElement("div",{className:(0,n.css)(ae.item,ae.date),"data-test":"eu-matrix-date"},!u&&i.createElement($,{fill:"#757575",className:(0,n.css)(te.smallGray)}),!u&&h&&i.createElement(se,{date:h,showAfterTimeLabel:p})),i.createElement("div",{className:(0,n.css)(ae.travelHeadingContainer)},oe.slice(v.q4===r?1:0).map((e=>i.createElement("div",{key:e,className:(0,n.css)(ae.item,ae.travelHeading,v.q4===r&&ae.businessPremier)},!u&&!o&&i.createElement(R.FormattedMessage,{id:"page.europe.journeys.".concat(e).concat(r&&"."+r)}))))))};const ue=(0,r.FZ)((e=>{var{deviceType:t}=e,a=(0,Y.Z)(e,le);return"mobile"===t?i.createElement(ce,a):i.createElement(de,a)}));var me=a(64321),pe=a(11576),ve=a(81295),he=a(46184);const ge={hash:"1",isBus:!1,hasBus:!1,hasFerry:!1,carrierLogos:[],standardAlternativeContainer:{hash:[],price:{amount:85,currencyCode:"EUR"},isCheapest:!1,isCheapestFullPrice:!1,isBestComfort:!1},firstAlternativeContainer:{hash:[],price:{amount:85,currencyCode:"EUR"},isCheapest:!1,isCheapestFullPrice:!1,isBestComfort:!1},departAt:"2017-10-31T11:30:05+00:00",arriveAt:"2017-10-31T11:30:05+00:00",legs:[""],journeyId:"abc10"};var fe=a(52068),ye=n.StyleSheet.create({wrapper:{display:"flex",width:"100%"},container:{minHeight:60,backgroundColor:"white",borderWidth:1,borderStyle:"solid",borderColor:Z.dp_brand_neutral_brighter,marginTop:-1,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:fe.R.body.weights.semiBold,color:Z.dp_app_text_subtle,fontStyle:"italic",width:"100%"}});const be=e=>i.createElement("div",{className:(0,n.css)(ye.wrapper)}," ",i.createElement("div",{className:(0,n.css)(ye.container)},e.children));var Ee=e=>{var{journeyDay:t}=e,a=(0,G.Qb)(t),r=i.createElement(R.FormattedMessage,{id:"dateTimeFormat.date",values:{weekday:i.createElement(R.FormattedDate,{value:a,weekday:"short",timeZone:"UTC"}),day:i.createElement(R.FormattedDate,{value:a,day:"numeric",timeZone:"UTC"}),month:i.createElement(R.FormattedDate,{value:a,month:"short",timeZone:"UTC"}),year:i.createElement(R.FormattedDate,{value:a,year:"numeric",timeZone:"UTC"})}});return i.createElement(be,null,i.createElement(R.FormattedMessage,{id:"page.europe.matrix.noTrainTicketsFound",values:{journeyDay:r}}))};const Ce=(0,i.memo)(Ee);var Se=a(18353),Ae=a(93776),_e=a(19408),we=a(33695);const xe=(e,t)=>{var a=(0,o.useSelector)((e=>(0,_e.eB)(e,we.zA.ENABLE_EXCLUSIVE_JOURNEY))),{enableExclusiveJourney:r}=(0,re.x)(),{sendTracking:n}=(0,c.rS)(),{getIsExclusiveJourney:i}=(0,Ae.a)(t,e),l=e.some((e=>i(e)));a&&r&&l&&n((0,c.k1)({category:"exclusive journey",action:"label",label:"",coreProperties:{}}))};var Re=["inwardView","journeyDay","rows","lastJourneySearchStatus","onRequestOpenJourneySummaryModal","shouldShowCarrierSpecificJourneyPlan","isLastJourneyDay","recommendedEuJourneyHash","isRecommendedJourneyEnabled","directJourneysFilterSelected","firstSmartPriceJourneyId","flexibility","isPending","cheapestFirstClassJourneyHash"];const Te=(0,pe.t$)({rows:[ge,ge,ge,ge,ge]},(e=>e.lastJourneySearchStatus===s.LoadStatus.PENDING&&(e.isPaginating&&Array.isArray(e.rows)&&!e.rows.length||!e.isPaginating)))((e=>{var{inwardView:t,journeyDay:a,rows:n,lastJourneySearchStatus:l,onRequestOpenJourneySummaryModal:o,shouldShowCarrierSpecificJourneyPlan:c,isLastJourneyDay:d,recommendedEuJourneyHash:u,isRecommendedJourneyEnabled:m,directJourneysFilterSelected:p=!1,firstSmartPriceJourneyId:v,flexibility:h,isPending:g,cheapestFirstClassJourneyHash:f}=e,y=(0,Y.Z)(e,Re),{todayCount:b,totalViews:E,handleBannerShown:C}=(0,Se.ig)(),{dayViewsLimit:S,totalViewsLimit:A}=Se.tD,{mobile:_}=(0,r.zw)(),{shouldRenderMobile:w,shouldRenderDesktop:x}=(0,Se.Pb)();xe(n,g);var R=v&&b<S&&E<A;if(i.useEffect((()=>{R&&C()}),[R]),l===s.LoadStatus.SUCCESS&&0===n.length&&!p)return i.createElement(Ce,{journeyDay:a});var T,L,Z,D,N=(L=-1,Z=0,D=-1,(T=n).forEach(((e,t)=>{if(e.journeyId&&!e.unsellableReason){-1===L&&(L=t);var a=new Date(e.arriveAt).getTime();(-1===D||a<Z)&&(D=t,Z=a)}})),D>0&&Z>0&&L>=0&&L!==D&&Object.assign(T[D],{doesArriveFirst:!0}),T);return i.createElement(ve.Z,{tabId:h,skin:"noStyle",focusable:!1},N.map(((e,a)=>i.createElement(i.Fragment,{key:"".concat(e.journeyId,"-").concat(a)},R&&_&&w&&v===e.journeyId&&i.createElement(Se.SJ,null),i.createElement(he.ZP,(0,me.Z)({isRecommendedJourneyEnabled:m,row:e,isRecommendedEuJourney:Boolean(e&&e.hash===u&&u),inwardView:t,testId:"eu-journey-row-".concat(a),onRequestOpenJourneySummaryModal:o,shouldShowCarrierSpecificJourneyPlan:c,isLastRow:d&&a===N.length-1,isLastItemDay:a===n.length-1,cheapestFirstClassJourneyHash:f,isPending:g},y)),R&&!_&&x&&v===e.journeyId&&i.createElement(Se.RM,null)))))}));var Le=a(89426),Ze=a(14023),De=a(92510);const Ne=n.StyleSheet.create({root:{textAlign:"center",[O.cy.min.m]:{padding:"".concat(O.W0.s4," ").concat(O.W0.s8)}},paragraph:{paddingBottom:O.W0.s4},button:{marginBottom:O.W0.s4}});const Pe=(0,c.v8)((e=>{var{currentDayRows:t,isLastDay:a=!1,isInwardView:r=!1,sendTracking:l}=e,{filters:o,setDirectTrainFilter:d}=(0,X.Z)(),u=(0,re.x)(),m=u.portal===s.Portal.TRAINLINE,p=(0,s.isItaloPortal)(u.portal);return!(0,K.Yb)(o)||!d||m||p||0!==(0,K.O)(t,o).length?null:a?i.createElement("div",{"data-test":"no-direct-journeys-last-day",className:(0,n.css)(De.Z.wrapper,De.Z.wrapperLastItem,Ne.root)},i.createElement(Ze.Z,{as:"p",textType:"body",styleSheet:Ne.paragraph},i.createElement(R.FormattedMessage,{id:"page.results.noDirectTrainExtended"})),i.createElement(Le.ZP,{level:Le.Ue.SECONDARY,size:"m",depot:!0,onClick:()=>{d(),l((0,c.k1)({coreProperties:{},category:"Direct only filter selected",action:"Show all results button clicked",label:"No direct journeys displayed on ".concat(r?"return":"outbound"," search results page")}))},styleSheet:Ne.button},i.createElement(R.FormattedMessage,{id:"page.results.showAllResults"}))):i.createElement("div",{"data-test":"no-direct-journeys",className:(0,n.css)(De.Z.wrapper,Ne.root)},i.createElement(Ze.Z,{as:"p",textType:"body"},i.createElement(R.FormattedMessage,{id:"page.results.noDirectTrain"})))}));var Fe=e=>{var t;return null===(t=e.rows.filter((e=>void 0===e.unsellableReason))[0])||void 0===t?void 0:t.departAt};W.StyleSheet.create({root:{marginLeft:O.W0.s6,marginRight:O.W0.s6}});const Ie=W.StyleSheet.create({listWrapper:{background:Z.dp_app_backdrop_dull,[O.cy.min.m]:{background:"none",borderRadius:O.E0.m}}});var Me=a(52718),ke=a(37956);const Be=n.StyleSheet.create({container:{minHeight:"24.5rem",backgroundColor:"#fff",borderRadius:"0 0 ".concat(O.E0.m," ").concat(O.E0.m),borderColor:Z.dp_app_border_base,borderStyle:"solid",borderWidth:"0px 1px 1px",textAlign:"center",display:"grid",gridTemplateColumns:"1fr 2fr 3fr 2fr 1fr",gridTemplateRows:"2fr auto auto 3fr",rowGap:O.W0.s8,justifyItems:"center",alignItems:"center",gridTemplateAreas:'\n      ". title title title ."\n\n      ". subtitle subtitle subtitle ."\n\n      ". logos logos logos ."\n\n      "landscape landscape landscape landscape landscape"\n\n    '},title:{gridArea:"title",fontWeight:"bold",fontSize:O.cp.title3.fontSize,lineHeight:O.cp.title3.lineHeight,letterSpacing:O.cp.title3.letterSpacing,alignSelf:"end",marginBottom:"-".concat(O.W0.s8),color:Z.dp_brand_neutral_duller},subtitle:{gridArea:"subtitle",fontSize:"1rem",alignSelf:"start",fontWeight:400,color:Z.dp_brand_neutral_duller},logos:{gridArea:"logos",listStyle:"none",display:"inline-grid",gridAutoFlow:"column",minHeight:"var(--DEPRECATED-84px)",gap:O.W0.s6,width:"fit-content",":nth-child(1n) > li":{flex:"1 1 0"},":nth-child(1n) > li > span > svg":{width:"100%",height:"100%",minHeight:"2.1rem"}},carrier:{maxHeight:"var(--DEPRECATED-35px)"},landscape:{gridArea:"landscape",alignSelf:"end",borderRadius:"inherit",":nth-child(1n) > g > #train":{animationDuration:"20s",animationTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",animationName:{"0%":{transform:"translate(-2100px, 31px)"},"100%":{transform:"translate(0px, 31px)"}}}}});const Je=e=>i.createElement("svg",(0,me.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 573 93"},e),i.createElement("g",{transform:"translate(18.13)"},i.createElement("g",{id:"secondTree",transform:"translate(10 12)"},i.createElement("path",{d:"M387,27.5a7.5,7.5,0,0,0-6.946-7.472A7.491,7.491,0,0,0,374.5,7.5,7.5,7.5,0,0,0,367,0h-5a7.5,7.5,0,0,0-7.5,7.5,7.489,7.489,0,0,0-6.965,10.269,7.491,7.491,0,0,0,0,14.462A7.489,7.489,0,0,0,354.5,42.5h20A7.5,7.5,0,0,0,382,35c0-.145-.014-.286-.022-.428A7.5,7.5,0,0,0,387,27.5Z",fill:"#00705f",fillRule:"evenodd"}),i.createElement("path",{d:"M374.126,33.376a1.24,1.24,0,0,0-1.752-1.751l-.008-.009-5.917,5.916-.742-13.4a1.25,1.25,0,0,0-2.5,0l-.334,6.226-3.744-3.744-.007.009a1.24,1.24,0,0,0-1.751,1.751l-.009.007,5.331,5.331-1.876,34.968A1.249,1.249,0,0,0,362.068,70h4.861a1.25,1.25,0,0,0,1.248-1.319l-1.541-27.8,7.5-7.5Z",fill:"#003e34",fillRule:"evenodd"})),i.createElement("rect",{width:"600",transform:"translate(-18 82)",height:"11",fill:"#00705F"}),i.createElement("g",{id:"train",transform:"translate(-2143 31)"},i.createElement("rect",{width:"655",height:"51",transform:"translate(1330.88 0.594)",fill:"#e6f5f0"}),i.createElement("g",{id:"trainBack",transform:"translate(1488.679 -25.406)"},i.createElement("path",{d:"M1964.561,18.576C1985.664,6.392,1982.356.5,2013.718,1h104.242V51.971H1983.7v-.015c-26.394-.178-35.742-11.068-35.742-15.276,0-4.243,5.61-8.007,5.61-8.007Z",transform:"translate(-2251.87 25.029)",fill:"#e2f6f0",fillRule:"evenodd"}),i.createElement("path",{d:"M1683.38,36.711c23.95-.607,34.35,3.008,48.4,15.285H1578.49V51.98C1561.88,51.8,1556,40.917,1556,36.711Z",transform:"translate(-1859.91 25.004)",fill:"#00a88f",fillRule:"evenodd"}),i.createElement("path",{d:"M2063.13,20.075C2076.22,7.107,2094.01,0,2112.01,1h1c0,17.514-10.2,28.162-27.71,28.162l-31.3-.068Z",transform:"translate(-2352.91 25.406)",fill:"#003e34",fillRule:"evenodd"})),i.createElement("path",{d:"M2101.358,18.576C2080.255,6.392,2083.563.5,2052.2,1H1947.96V51.971h134.258v-.015c26.394-.178,35.742-11.068,35.742-15.276,0-4.243-5.61-8.007-5.61-8.007Z",transform:"translate(-0.08 -0.377)",fill:"#e2f6f0",fillRule:"evenodd"}),i.createElement("path",{d:"M1604.4,36.711C1580.45,36.1,1570.05,39.718,1556,52h153.29V51.98c16.61-.178,22.49-11.064,22.49-15.27Z",transform:"translate(0.6 -0.402)",fill:"#00a88f",fillRule:"evenodd"}),i.createElement("path",{d:"M1604.4,36.711C1580.45,36.1,1570.05,39.718,1556,52h153.29V51.98c16.61-.178,22.49-11.064,22.49-15.27Z",transform:"translate(386.1 -0.402)",fill:"#00a88f",fillRule:"evenodd"}),i.createElement("path",{d:"M2103.88,20.075C2090.79,7.107,2073,0,2055,1h-1c0,17.514,10.2,28.162,27.71,28.162l31.3-.068Z",transform:"translate(-0.13)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M2031.77,8.688h-35.66a2.342,2.342,0,0,0-2.55,2.548V26.521a2.342,2.342,0,0,0,2.55,2.548h35.66a2.347,2.347,0,0,0,2.55-2.548V11.235A2.347,2.347,0,0,0,2031.77,8.688Z",transform:"translate(-0.13)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1975.73,8.688h-35.67a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.67a2.339,2.339,0,0,0,2.54-2.548V11.235A2.339,2.339,0,0,0,1975.73,8.688Z",transform:"translate(-0.096)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1919.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.52a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1919.09,8.688Z",transform:"translate(-0.082)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("clipPath",{d:"M1863.05,8.688h-35.67a2.339,2.339,0,0,0-2.54,2.548V26.52a2.339,2.339,0,0,0,2.54,2.548h35.67a2.347,2.347,0,0,0,2.55-2.548V11.235A2.347,2.347,0,0,0,1863.05,8.688Z",transform:"translate(-0.068)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1806.26,8.688h-35.67a2.339,2.339,0,0,0-2.54,2.548V26.52a2.339,2.339,0,0,0,2.54,2.548h35.67a2.347,2.347,0,0,0,2.55-2.548V11.235A2.347,2.347,0,0,0,1806.26,8.688Z",transform:"translate(-0.055)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1750.21,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.52a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1750.21,8.688Z",transform:"translate(-0.041)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1694.77,8.688h-35.66a2.342,2.342,0,0,0-2.55,2.548V26.521a2.342,2.342,0,0,0,2.55,2.548h35.66a2.347,2.347,0,0,0,2.55-2.548V11.235A2.347,2.347,0,0,0,1694.77,8.688Z",transform:"translate(-0.027)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1638.73,8.688h-35.67a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.67a2.339,2.339,0,0,0,2.54-2.548V11.235A2.339,2.339,0,0,0,1638.73,8.688Z",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",transform:"translate(-56.023 0)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",transform:"translate(-112.045 0)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",transform:"translate(-168.068 0)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",transform:"translate(-224.09 0)",fill:"#003e34",fillRule:"evenodd"}),i.createElement("path",{d:"M1582.09,8.688h-35.66a2.347,2.347,0,0,0-2.55,2.548V26.521a2.347,2.347,0,0,0,2.55,2.548h35.66a2.342,2.342,0,0,0,2.55-2.548V11.235A2.342,2.342,0,0,0,1582.09,8.688Z",transform:"translate(-280.113 0)",fill:"#003e34",fillRule:"evenodd"})),i.createElement("g",{id:"firstTree"},i.createElement("path",{d:"M215,27.5a7.5,7.5,0,0,0-7.5-7.5h-6.325a8.444,8.444,0,0,0,.075-1.073v-.355A8.574,8.574,0,0,0,192.677,10h-3.114A7.5,7.5,0,0,0,182.5,5h-10a7.5,7.5,0,0,0-7.5,7.5h-.178a8.567,8.567,0,0,0-8.5,7.5h-2.753A8.573,8.573,0,0,0,145,28.572v.355a8.569,8.569,0,0,0,7.947,8.541,7.427,7.427,0,0,0,.194,5.556,8.569,8.569,0,0,0-5.641,8.047v.355A8.573,8.573,0,0,0,156.072,60h8.114a7.5,7.5,0,0,0,7.064,5H192.5a7.5,7.5,0,0,0,7.063-5h1.864A8.574,8.574,0,0,0,210,51.427v-.355a8.557,8.557,0,0,0-4.093-7.3A8.694,8.694,0,0,0,206.646,35h.854A7.5,7.5,0,0,0,215,27.5Z",fill:"#00a88f",fillRule:"evenodd"}),i.createElement("path",{d:"M190.876,48.376a1.24,1.24,0,0,0-1.752-1.751l-.008-.009-6.507,6.506-.625-8.339,6.4-6.4-.007-.007a1.24,1.24,0,0,0-1.752-1.751l-.008-.009-4.878,4.879-.537-7.166a1.25,1.25,0,0,0-2.493,0l-.86,11.751-4.465-4.465-.007.009a1.24,1.24,0,0,0-1.752,1.751l-.008.007,5.991,5.991L177,57.728l-6.113-6.112-.007.009a1.24,1.24,0,0,0-1.752,1.751l-.008.007,7.638,7.639L175.1,83.659A1.248,1.248,0,0,0,176.344,85h7.309a1.25,1.25,0,0,0,1.246-1.342l-2.043-27.246,8.027-8.028Z",fill:"#003e34",fillRule:"evenodd"}))));const He=function(){var{carriersLogos:e}=(0,ke.z)();return i.createElement("div",{className:(0,W.css)(Be.container)},i.createElement("h3",{className:(0,W.css)(Be.title)},i.createElement(R.FormattedMessage,{id:"page.results.specificRouteLoading.title"})),i.createElement("p",{className:(0,W.css)(Be.subtitle)},i.createElement(R.FormattedMessage,{id:"page.results.specificRouteLoading.subtitle"})),i.createElement("ul",{className:(0,W.css)(Be.logos)},null==e?void 0:e.map((e=>i.createElement("li",{key:e,className:(0,W.css)(Be.carrier)},i.createElement(T.pl,{name:e,testId:e}))))),i.createElement(Je,{className:(0,W.css)(Be.landscape)}))};var Ve=a(81153),je=a(20874),Ue=a(57545),We=e=>(t,a)=>{e((0,C.g)({selections:t,mobileSelection:a})),a||e((0,f.FB)({direction:t.selectedOutward?"outward":"inward"}))},Oe=e=>{var t,{journeyDays:a,lastJourneySearchStatus:C,inwardView:x,selectorParams:R,transportMode:T,filtersEnabled:L,filters:Z,filteredJourneyDays:D,isPending:N}=e,P=T===s.AvailableTransportModes.COACH,F=L&&(Z.carrierFilterSelected||Z.priceFilterSelected)&&!P?D:a,M=(0,o.useDispatch)(),{sendTracking:k}=(0,c.rS)(),{enableCarriersComparison:B}=(0,re.x)(),{disableTrenitaliaPreferentialTreatment:J,enableRecommendedJourney:H}=(0,w.QE)(),{query:V}=(0,l.TH)(),j=JSON.parse((null==V?void 0:V.directSearch)||"false"),U=(0,_.Z)(u._,R),W=(0,_.Z)(E.Zo,R),O=(0,_.Z)(m.I,R),z=(0,_.Z)(v.JH,R),Q=(0,_.Z)(v.$i),Y=(0,o.useSelector)((e=>(0,Ve.BD)(e,R))),G=(0,_.Z)(v.ti,R),$=(0,_.Z)(E.xt,R),K=(0,o.useSelector)((()=>(0,b.FZ)(R))),X=(0,_.Z)(v.T7,R),ee=(0,_.Z)(E.s6,R),te=(0,_.Z)(A.bn,R),ae=(0,_.Z)((0,v.Ww)(y.Wl.CSFP_CARRIERS_FILTER),R),ne=(0,_.Z)(p.iZ,R),ie=H?null==ne?void 0:ne.journeyHash:void 0,le=F.map((e=>e.rows)).reduce(((e,t)=>e.concat(t)),[]),oe=null==le||null===(t=le.filter((e=>{var t;return null==e||null===(t=e.firstAlternativeContainer)||void 0===t||null===(t=t.fullPrice)||void 0===t?void 0:t.amount})))||void 0===t||null===(t=t.sort(((e,t)=>{var a,r,n=(null==e||null===(a=e.firstAlternativeContainer)||void 0===a||null===(a=a.fullPrice)||void 0===a?void 0:a.amount)||0,i=(null==t||null===(r=t.firstAlternativeContainer)||void 0===r||null===(r=r.fullPrice)||void 0===r?void 0:r.amount)||0;return n>i?1:i>n?-1:0})))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.hash,se=(0,i.useCallback)((e=>{M((0,S.Ll)({type:g.e.JOURNEY_SUMMARY_OVERLAY,params:e}))}),[]),ce=(0,i.useCallback)((e=>{M((0,f.ac)({action:e}))}),[M]),{desktop:de,mobile:me}=(0,r.zw)(),pe=(0,d.xHg)(F.map((e=>e.rows))),ve=(0,Me.DQ)(pe),{isCarriersComparisonRoute:he,isAvailableOnMobile:ge,experimentKey:fe,mobileExperimentKey:ye}=(0,ke.z)(),be="previous"===$&&N||W&&"previous"===ee,{flattenedDisruptions:Ee}=(0,_.Z)(Ve.Kz,R),Ce=(0,o.useSelector)((e=>fe&&(0,_e.eB)(e,fe))),Se=(0,o.useSelector)((e=>ye&&(0,_e.eB)(e,ye))),Ae=B&&(Ce||!fe)&&he&&!P&&N&&de&&!$,we=B&&(Ce||!fe)&&!P&&he&&de&&!be&&!N&&!(null!=Ee&&Ee.length),xe=B&&(Se||!ye)&&!P&&he&&me&&ge&&!be&&!N&&!(null!=Ee&&Ee.length);return(0,i.useEffect)((()=>{j&&k((0,c.k1)({coreProperties:{genericValue1:le.length.toString()||"0"},category:"results",action:"filter results",label:"results with direct filter applied"}))}),[j,le,k]),i.createElement("div",{className:(0,n.css)(Ie.listWrapper)},(we||xe)&&i.createElement(je.Z,{isPending:N}),me&&i.createElement(h.A,{isMobile:me}),i.createElement(q,{type:"previous",inwardView:x,cheapestCachedPrice:te.earlier,isLoading:"previous"===$&&N||W&&"previous"===ee,isPending:N,isPaginating:W,selectorParams:R,transportMode:T}),F.map(((e,t)=>{var{journeyDay:r,rows:n}=e;return i.createElement("div",{key:r},i.createElement(ue,{firstDepartAt:r,lastJourneySearchStatus:C,isPaginating:W,headerSuffix:X,isFirstRowHeader:0===t,inwardView:x,departureOfFirstJourney:0===t?Fe(a[0]):void 0}),Ae&&i.createElement(He,null),!Ae&&i.createElement(i.Fragment,null,i.createElement(Ue.H,{query:V,selectedPartnerJourneyInfo:Y}),i.createElement(Te,{isRecommendedJourneyEnabled:H,flexibility:O,inwardView:x,journeyDay:r,rows:n,recommendedEuJourneyHash:ie,lastJourneySearchStatus:C,isPaginating:W,onSelectAlternative:We(M),outwardSelection:z,inwardSelection:G,partnerSelection:Q,hideStandardColumn:X===v.q4,onRequestOpenJourneySummaryModal:se,hasAllEurostarRows:U,shouldShowCarrierSpecificJourneyPlan:ae,isLastJourneyDay:t===F.length-1,onSelectSetEventTicketActionAnalyticsFramework:ce,directJourneysFilterSelected:Z.directJourneysFilterSelected,firstSmartPriceJourneyId:ve,cheapestFirstClassJourneyHash:oe,isPending:N})),!N&&i.createElement(Pe,{currentDayRows:n,isLastDay:t===F.length-1,isInwardView:x}))})),K&&!J&&i.createElement(I,{carrier:K,inwardView:x}),i.createElement(q,{type:"next",cheapestCachedPrice:te.later,inwardView:x,selectorParams:R,transportMode:T,isLoading:"next"===$&&N||W&&"next"===ee,isPending:N,isPaginating:W}))}},2959:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(50093),n=a(29901),i=a(98184),l=a(53893),o=a(91939);const s=e=>{var{isInCJS:t}=e;return n.createElement(n.Fragment,null,n.createElement("span",{"data-test":"is-cheapest-tag","aria-hidden":!0,className:(0,r.css)(l.Z.cheapestLabel,t&&l.Z.cheapestLabelCJS)},n.createElement(i.FormattedMessage,{id:"page.europe.journeys.cheapest"})),n.createElement(o.Z,null,n.createElement(i.FormattedMessage,{id:"page.europe.journeys.cheapest.aria"})))}},53893:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(23198),n=a(51471),i=a(35779),l=a(98318),o=a(6575),s=a(50093),c=a(52068),d=a(16947);const u=s.StyleSheet.create({container:{display:"flex",flex:1},priceCTA:{display:"inline-flex",flexDirection:"column",justifyContent:"center",minWidth:86,height:50,margin:"auto",alignItems:"center",fontWeight:n.Yl,fontSize:i.Ui,color:l.dp_app_text_base,padding:"0px 4px",transition:"background-color 0.125s ease-out"},oneTag:{height:50,paddingTop:i.LS},combinedTwoTags:{height:70,margin:"".concat(i.LS," 0px")},combinedThreeTags:{height:95,margin:"".concat(i.LS," 0px")},cheapestBestComfortLimited:{margin:"".concat(i.LS," 0px")},hoveredPriceCTA:{borderRadius:o.Qz,background:l.dp_brand_neutral_brightest,cursor:"pointer"},loading:{maxWidth:86,margin:"auto"},selected:{borderRadius:o.Qz,backgroundColor:l.dp_app_selection_dull,fontWeight:n.E4,color:l.dp_app_text_inverted},selectedVariant:{backgroundColor:l.dp_brand_secondary_duller},cheapestLabel:(0,r.Z)((0,r.Z)({},d.U.isCheapest),{},{paddingLeft:o.Qz,paddingRight:o.Qz,display:"inline-flex",color:l.dp_app_text_base,fontSize:"9px",fontWeight:n.E4}),bestComfortLabel:{backgroundColor:l.dp_brand_secondary_brightest,paddingLeft:o.Qz,paddingRight:o.Qz,borderRadius:o.Qz,display:"flex",color:l.dp_brand_secondary_dull,fontSize:"9px",fontWeight:n.E4},cheapestLabelCJS:{fontSize:c.W.small.fontSize,margin:"".concat(i.zg," 0 ").concat(i.LS," 0")},smartPriceLabel:{backgroundColor:"transparent !important",margin:"0 !important"}})},84195:(e,t,a)=>{a.d(t,{Z:()=>A});var r=a(11576),n=a(50093),i=a(29901),l=a(98184),o=a(72222),s=a(10301),c=a(1160),d=a(11493),u=a(18353),m=a(2693),p=a(2959),v=a(53893),h=a(38073),g=a(21650),f=a(33695),y=a(48977),b=a(18332),E=a(32912),C=a(57839);const S=e=>{var{experimentsDict:t}=(0,b.zM)(["experimentsDict"]),{isInboundUser:a}=(0,E.ZP)(),r=(0,y.uF)(t,f.zA.ENABLE_INCREASE_LIMIT_TICKETS_LEFT),n="$1"===r&&a,l="$2"===r&&a;return(0,i.useEffect)((()=>{var{remaining:r,status:n}=null!=e?e:{};a&&(r&&r<=60||n===C.A.AVAILABLE)&&(0,y.QH)(t,[f.zA.ENABLE_INCREASE_LIMIT_TICKETS_LEFT])}),[]),{showLimitedAvailability:n,increaseOnlyXLeftRangeInbound:l}};const A=(0,r.E0)((e=>{var{amount:t,currencyCode:a,className:r="",isSelected:d,testId:E,isCheapest:C,isBestComfort:A,isHovered:_=!1,limitedAvailability:w,isSmartPrice:x,isSale:R}=e,T=C||A,{disableTrenitaliaPreferentialTreatment:L,enableRecommendedJourney:Z}=(0,s.QE)(),{showLimitedAvailability:D,increaseOnlyXLeftRangeInbound:N}=S(w),P=L||c.Wp,F=(0,m.Ts)(w,void 0,D,N)!==m.a8.NULL,I=w&&F,{experimentsDict:M}=(0,b.zM)(["experimentsDict"],{shouldTrackExperiments:!1}),k=(0,y.uF)(M,f.zA.ENABLE_SALE_TAG_SEARCH_RESULTS),B=R&&"$1"===k,J=[T,I,B].filter(Boolean).length;return i.createElement("div",{className:(0,n.css)(v.Z.container)},i.createElement("div",{className:"".concat(r," ").concat((0,n.css)(v.Z.priceCTA,!d&&!x&&_&&v.Z.hoveredPriceCTA,d&&[v.Z.selected,Z&&v.Z.selectedVariant],(B||I)&&v.Z.oneTag,2===J&&v.Z.combinedTwoTags,3===J&&v.Z.combinedThreeTags))},i.createElement(g.Z,{experimentKey:f.zA.ENABLE_SALE_TAG_SEARCH_RESULTS},(e=>{var{isVariant:t}=e;return t&&R&&i.createElement(h.Z,null)})),i.createElement(u.gA,{isSmartPrice:Boolean(x),isSelected:d,mobileEnabled:!1,additionalStyles:{wrapper:d?v.Z.smartPriceLabel:void 0}},i.createElement("div",{"data-test":E},i.createElement(o.Z,{value:t,currency:a}))),C&&t>=0?i.createElement(p.Z,null):i.createElement("div",null,A&&!P&&i.createElement("div",{"data-test":"is-best-comfort-tag"},i.createElement("span",{className:(0,n.css)(v.Z.bestComfortLabel)},i.createElement(l.FormattedMessage,{id:"page.europe.journeys.bestComfort"})))),I&&i.createElement("div",{className:(0,n.css)(T&&I&&v.Z.cheapestBestComfortLimited)},i.createElement(m.ZP,{availability:w,isSelected:d,increaseOnlyXLeftRangeInbound:N,isCheapest:!1,showLimitedAvailability:D}))))}),(()=>(0,n.css)(v.Z.loading,d.Z.loading)))},46184:(e,t,a)=>{a.d(t,{ZP:()=>fe,fI:()=>ge});var r=a(23198),n=a(50093),i=a(29901),l=a(88543),o=a(41344),s=a(14891),c=a(33695),d=a(28935),u=a(29433),m=a(43691),p=a(18332),v=a(69140),h=a(50549),g=a(37956),f=a(6102),y=a(98184),b=a(2749),E=a(98318),C=a(83367);const S=n.StyleSheet.create({text:{border:"none",borderRadius:"none",backgroundColor:E.dp_brand_primary_brighter,color:E.dp_brand_primary_dim,textAlign:"left",boxShadow:"none",display:"flex",padding:C.spacers.px8,paddingLeft:C.spacers.px15}});const A=()=>i.createElement(b.O,{dataTestId:"cheapest-first-class-journey-wrapper",color:"BRAND_PRIMARY_BRIGHTER"},i.createElement("div",{className:(0,n.css)(S.text)},i.createElement(y.FormattedMessage,{id:"page.europe.journeys.cheapestFirstClass.text"}))),_=n.StyleSheet.create({text:{border:"none",borderRadius:"none",backgroundColor:E.dp_brand_secondary_bright,color:E.dp_brand_secondary_dullest,textAlign:"left",boxShadow:"none",display:"flex",padding:C.spacers.px8,paddingLeft:C.spacers.px15}});const w=()=>i.createElement(b.O,{dataTestId:"recommended-journey-wrapper"},i.createElement("div",{className:(0,n.css)(_.text)},i.createElement(y.FormattedMessage,{id:"page.europe.journeys.recommended.text"})));var x=a(48977),R=a(18353),T=a(91939),L=a(75853),Z=a(41152),D=a(9641),N=a(56915),P=a(84195),F=a(52068);const I=n.StyleSheet.create({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",fontWeight:F.R.body.weights.semiBold,color:E.dp_app_text_base,backgroundColor:"transparent",":focus-visible":{outline:"4px solid ".concat(E.dp_comp_focus_ring),outlineOffset:"-4px"}}});var M=a(61945),k=(e,t,a)=>{var r="";return e&&(r="-selected"),t&&(r="-hovered"),"".concat(a||"eu-alternative","-ticket-container").concat(r)};const B=e=>{var{amount:t,currencyCode:a,styleSheet:r,isSelected:o,isCheapest:s,isBestComfort:c,isSale:d,testId:u,onSelectAlternative:m,limitedAvailability:p,isSmartPrice:v,travelClass:h,calculatedPrice:g}=e,[f,b]=(0,i.useState)(!1),E=(0,i.useCallback)((()=>{b(!0)}),[]),C=(0,i.useCallback)((()=>{b(!1)}),[]),S=(0,l.useDispatch)(),{isAutoApplyExperimentVariant:A}=(0,M.W)(),_=g&&(null==g?void 0:g.amount)>0&&A;return i.createElement("div",{className:(0,n.css)(r,I.wrapper)},i.createElement("button",{className:(0,n.css)(r,I.button),"data-test":k(o,f,u),onClick:()=>{m()},onMouseEnter:E,onMouseLeave:C,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(),S((0,D.cp)(!0)))},"aria-pressed":o},i.createElement(P.Z,{amount:_?g.amount:t,currencyCode:_?g.currencyCode:a,isSelected:o,isCheapest:s,isBestComfort:c,testId:"".concat(u,"-ticket-price").concat(o?"-selected":""),isHovered:f,limitedAvailability:p,isSmartPrice:v,isSale:d}),i.createElement(N.Z,null,i.createElement(y.FormattedMessage,{id:"page.europe.journeys.class.".concat(h,".aria")}))))};var J=a(14845),H=a(81153),V=a(89141),j=a(79823),U=a(92510);const W=e=>{var{unsellableReason:t}=e;return i.createElement("div",{className:(0,n.css)(U.Z.item,U.Z.noFaresAlternative),title:t.longDescription,"data-test":"unsellable-reason"},i.createElement("span",{"aria-hidden":"true",className:(0,n.css)(U.Z.unsellableReason)},t.shortDescription),i.createElement(T.Z,null,t.longDescription))};var O=a(51282),z=a(92490),Q=a(97866),q=a(61229),Y=a(83570),G=a(83504);const $=e=>{var t=(0,l.useSelector)(O.nH),a=(0,l.useSelector)(z.Yu),n=(0,l.useSelector)(G.FD),o=(0,l.useSelector)((t=>(0,Y.jJ)(t,(0,r.Z)((0,r.Z)({},n),{},{alternative:e.standardAlternativeContainer})))),s=(0,l.useSelector)((e=>(0,q.Cu)(e,n))),c=(0,l.useSelector)(Q.wr);return i.useMemo((()=>{var r,n,i,l=e.legs.length-1,d=null==s?void 0:s.legs[e.legs[0]],u=null==s?void 0:s.legs[e.legs[l]],m=d&&d.vendorQuotaIdentifier,p=d&&d.vehicleAttributes;return t.some((e=>{var t;return(null==e?void 0:e.discountCards)&&(null==e||null===(t=e.discountCards)||void 0===t?void 0:t.length)>0}))?i="discountCard":o&&(i="voucher"),{discountType:i,vendorQuotaIdentifier:m,originName:d&&(null===(r=a[d.departureLocation])||void 0===r?void 0:r.name),destinationName:u&&(null===(n=a[u.arrivalLocation])||void 0===n?void 0:n.name),enableViewInAppSectionFromDisruption:c,vehicleAttributes:p}}),[t,o,a,s,c])};var K=a(88246),X=a(64321),ee=a(12165),te=a(26625),ae=a(23394);const re=n.StyleSheet.create({exclusiveLabel:{minWidth:"121px",backgroundColor:E.dp_app_message_secondary_background,borderRadius:ae.E0.m,padding:"".concat(ae.W0.s1," ").concat(ae.W0.s2),border:"1px solid ".concat(E.dp_brand_secondary_bright),borderTop:"none",borderTopRightRadius:0,borderTopLeftRadius:0,fontSize:ae.cp.mini.fontSize,lineHeight:ae.cp.mini.lineHeight,textAlign:"center",fontWeight:600,color:E.dp_app_text_base,position:"relative",[ae.cy.max.m]:{padding:"0 ".concat(ae.W0.s1)}},bubbleTitle:{fontSize:ae.cp.body.fontSize,lineHeight:ae.cp.body.lineHeight,fontWeight:"bold",marginBottom:ae.W0.s2},bubbleContent:{fontSize:ae.cp.small.fontSize,lineHeight:ae.cp.small.lineHeight},wrapper:{marginLeft:ae.W0.s4}});const ne=()=>{var e=ee.Z.Bubble({as:"dialog"}),t=i.useRef(null),{targetProps:a,bubbleProps:r,visible:l,setVisible:o}=(0,ee.Z)({direction:"up right",maxWidth:"331px",offset:"20%"}),{sendTracking:s}=(0,te.rS)(),c=()=>{o(!0),s((0,te.k1)({category:"exclusive journey",action:"label",label:"hover",coreProperties:{}}))},d=()=>i.createElement(i.Fragment,null,i.createElement("p",{className:(0,n.css)(re.bubbleTitle)},i.createElement(y.FormattedMessage,{id:"page.results.exclusiveJourney.label"})),i.createElement("div",{className:(0,n.css)(re.bubbleContent)},i.createElement(y.FormattedMessage,{id:"page.results.exclusiveJourney.bubble.content"})));return i.createElement("div",{className:(0,n.css)(re.wrapper)},i.createElement(ee.Z.Target,a,i.createElement("div",{"data-test":"exclusive-journey-label",className:(0,n.css)(re.exclusiveLabel),ref:t,onMouseOver:c,onFocus:c,onMouseLeave:()=>o(!1),role:"tooltip"},i.createElement(y.FormattedMessage,{id:"page.results.exclusiveJourney.label"})),i.createElement(e,(0,X.Z)({},r,{visible:l}),i.createElement(d,null))))};var ie=a(56373),le=a(19408);const oe=e=>{var t,a,r,o,s,d,u,m,v,g,{row:f,testId:y,inwardView:b,isStandardSelected:E,isFirstSelected:C,hideStandardColumn:S,onRequestOpenJourneySummaryModal:A,onSelectAlternative:_,selectCheapestAlternativeInRow:w,exclusiveJourney:D}=e,{vendorQuotaIdentifier:N,originName:P,destinationName:F,enableViewInAppSectionFromDisruption:I}=$(f),{shouldRenderDesktop:M}=(0,R.Pb)(),{experimentsDict:k}=(0,p.zM)(["experimentsDict"]),{enableIconsInSearchComparision:O,enableExclusiveJourney:z}=(0,L.x)(),Q=(0,l.useSelector)((e=>(0,le.eB)(e,c.zA.ENABLE_EXCLUSIVE_JOURNEY))),q=null==f?void 0:f.isBus,Y=(0,l.useSelector)((e=>(0,H.eA)(e))),G=(0,l.useSelector)(ie.hh),X=(null===(t=f.standardAlternativeContainer)||void 0===t||null===(t=t.fareType)||void 0===t?void 0:t.pricingCategory)===K.y.SALE||(null===(a=f.standardAlternativeContainer)||void 0===a||null===(a=a.fareType)||void 0===a?void 0:a.farePricingCategory)===K.y.SALE,ee=(null===(r=f.firstAlternativeContainer)||void 0===r||null===(r=r.fareType)||void 0===r?void 0:r.pricingCategory)===K.y.SALE||(null===(o=f.firstAlternativeContainer)||void 0===o||null===(o=o.fareType)||void 0===o?void 0:o.farePricingCategory)===K.y.SALE,te=z&&Q&&D;return z&&G&&D&&(0,x.QH)(k,[c.zA.ENABLE_CLASS_COMPARISON_MODAL_ON_DESKTOP]),i.createElement(i.Fragment,null,te&&i.createElement(ne,null),i.createElement("div",{className:(0,n.css)(U.Z.break)}),i.createElement(V.ZP,{departAt:f.departAt,arriveAt:f.arriveAt,changes:f.legs.length-1,onRequestOpenJourneySummaryModal:A,journeyId:f.journeyId,onClick:Y?void 0:w,disruptions:f.disruptions,isMobile:!1,vendorQuotaIdentifier:!f.unsellableReason&&N,originName:P,destinationName:F,enableViewInAppSectionFromDisruption:I}),i.createElement(J.V,{className:(0,n.css)(U.Z.carrierLogo),carrierLogos:(0,Z.kx)(f.carrierLogos),onClick:w}),i.createElement("div",{className:(0,n.css)(U.Z.alternativesContainer)},void 0!==f.unsellableReason?"engine.unsellable.imminent_departure"!==f.unsellableReason.code&&"engine.SNCF.unsellable.full_train"!==f.unsellableReason.code?i.createElement("div",{className:(0,n.css)(U.Z.item,U.Z.noFaresAlternative,U.Z.doubleColumn),title:f.unsellableReason.longDescription,"data-test":"unsellable-reason-container"},i.createElement("span",{"aria-hidden":"true",className:(0,n.css)(U.Z.unsellableReasonDesktop)},f.unsellableReason.shortDescription),i.createElement(T.Z,null,f.unsellableReason.longDescription)):i.createElement(i.Fragment,null,i.createElement(W,{unsellableReason:f.unsellableReason}),!S&&i.createElement(W,{unsellableReason:f.unsellableReason})):[!S&&(null!==(s=f.standardAlternativeContainer)&&void 0!==s&&s.price?i.createElement(B,{key:"".concat(f.hash,"-outward"),inwardView:b,isSelected:E,journeyHash:f.hash,alternativeHash:f.standardAlternativeContainer.hash,onSelectAlternative:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>{_(h.U9.STANDARD,E)})),amount:f.standardAlternativeContainer.price.amount,currencyCode:f.standardAlternativeContainer.price.currencyCode,styleSheet:U.Z.item,isCheapest:f.standardAlternativeContainer.isCheapestFullPrice,isBestComfort:f.standardAlternativeContainer.isBestComfort,testId:"".concat(y,"-standard"),limitedAvailability:null==f||null===(d=f.standardAlternativeContainer)||void 0===d?void 0:d.limitedAvailability,isSmartPrice:M&&f.standardAlternativeContainer.isSmartPrice,travelClass:h.U9.STANDARD,isSale:X,calculatedPrice:null===(u=f.standardAlternativeContainer)||void 0===u?void 0:u.calculatedPrice}):i.createElement("div",{key:"".concat(f.hash,"-outward-no-fares"),className:(0,n.css)(U.Z.item,U.Z.noFaresAlternative)},i.createElement("span",{className:(0,n.css)(U.Z.noFaresHypen)})))||null,null!==(m=f.firstAlternativeContainer)&&void 0!==m&&m.price?i.createElement(B,{key:"".concat(f.hash,"-inward"),inwardView:b,isSelected:C,journeyHash:f.hash,alternativeHash:f.firstAlternativeContainer.hash,onSelectAlternative:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>{_(h.U9.FIRST,C)})),amount:f.firstAlternativeContainer.price.amount,currencyCode:f.firstAlternativeContainer.price.currencyCode,styleSheet:U.Z.item,isCheapest:f.firstAlternativeContainer.isCheapestFullPrice,isBestComfort:f.firstAlternativeContainer.isBestComfort,testId:"".concat(y,"-first-class"),limitedAvailability:null==f||null===(v=f.firstAlternativeContainer)||void 0===v?void 0:v.limitedAvailability,isSmartPrice:M&&(null==f?void 0:f.firstAlternativeContainer.isSmartPrice),travelClass:h.U9.FIRST,isSale:ee,calculatedPrice:null===(g=f.firstAlternativeContainer)||void 0===g?void 0:g.calculatedPrice}):i.createElement("div",{key:"".concat(f.hash,"-inward-no-fares"),"data-test":"no-first-alternative",className:(0,n.css)(U.Z.item,U.Z.noFaresAlternative)},i.createElement("span",{className:(0,n.css)(U.Z.noFaresHypen)}))]),!q&&O&&(null==f?void 0:f.extras)&&i.createElement(i.Fragment,null,i.createElement("div",{className:(0,n.css)(U.Z.break)}),i.createElement(j.Z,{extras:f.extras,rowHash:f.hash})))};var se=a(79549),ce=a(78877),de=a(15910),ue=a(2693);const me=e=>{var t,a,r,o,s,d,u,m,v,h,g,f,y,b,{row:C,onRequestOpenJourneySummaryModal:S,exclusiveJourney:A}=e,{originName:_,destinationName:w,discountType:R,vendorQuotaIdentifier:T,enableViewInAppSectionFromDisruption:D,vehicleAttributes:N}=$(C),P=(null===(t=C.standardAlternativeContainer)||void 0===t?void 0:t.price)&&C.standardAlternativeContainer.isCheapestFullPrice,F=(null===(a=C.firstAlternativeContainer)||void 0===a?void 0:a.price)&&C.firstAlternativeContainer.isCheapestFullPrice,I=!C.unsellableReason&&(P||F),M=(null===(r=C.standardAlternativeContainer)||void 0===r?void 0:r.limitedAvailability)||(null===(o=C.firstAlternativeContainer)||void 0===o?void 0:o.limitedAvailability),{experimentsDict:k}=(0,p.zM)(["experimentsDict"]),B=(0,x.uF)(k,c.zA.ENABLE_LIMITED_TICKETS_MWEB),{enableExclusiveJourney:H}=(0,L.x)(),j=(0,l.useSelector)((e=>(0,le.eB)(e,c.zA.ENABLE_EXCLUSIVE_JOURNEY))),O=(0,l.useSelector)(ie.hh),z=M&&(0,ue.Ts)(M)!==ue.a8.NULL,Q=I&&"$1"!==B||I&&!z,q=(null===(s=C.standardAlternativeContainer)||void 0===s||null===(s=s.fareType)||void 0===s?void 0:s.pricingCategory)===K.y.SALE||(null===(d=C.standardAlternativeContainer)||void 0===d||null===(d=d.fareType)||void 0===d?void 0:d.farePricingCategory)===K.y.SALE,Y=(null===(u=C.firstAlternativeContainer)||void 0===u||null===(u=u.fareType)||void 0===u?void 0:u.pricingCategory)===K.y.SALE||(null===(m=C.firstAlternativeContainer)||void 0===m||null===(m=m.fareType)||void 0===m?void 0:m.farePricingCategory)===K.y.SALE,G=H&&j&&O&&A;return i.createElement(i.Fragment,null,i.createElement("div",{className:(0,n.css)(U.Z.container)},i.createElement(V.ZP,{departAt:C.departAt,arriveAt:C.arriveAt,changes:C.legs.length-1,onRequestOpenJourneySummaryModal:S,journeyId:C.journeyId,disruptions:C.disruptions,isMobile:!0,vendorQuotaIdentifier:!C.unsellableReason&&T,originName:_,destinationName:w,hasBus:C.hasBus,hasFerry:C.hasFerry,enableViewInAppSectionFromDisruption:D,isNightTrain:Boolean(N&&N.some((e=>"sleeper"===e)))}),i.createElement(x.hh,{experiments:k,experimentKey:c.zA.ENABLE_LIMITED_TICKETS_MWEB,variants:{$0:null,$1:z&&i.createElement("div",{className:(0,n.css)(se.t.topRightAttached)},i.createElement(ue.ZP,{availability:M,isSelected:!1,isCheapest:Boolean(I)}))}}),Q&&i.createElement("div",{"data-test":"cheapest-label",className:(0,n.css)(se.t.topRightAttached)},i.createElement(ce.J,{roundedBottom:!0,labelTextId:"page.matrix.cheapest"})),G&&i.createElement("div",{"data-test":"exclusive-journey-label-wrapper",className:(0,n.css)(se.t.exclusiveJourney)},i.createElement(ne,null)),C.doesArriveFirst&&!G&&i.createElement("div",{"data-test":"arrives-first-label",className:(0,n.css)(se.t.topLeftAttached)},i.createElement(ce.J,{backgroundColor:E.dp_app_info_brighter,roundedBottom:!0,labelTextId:"page.ukresults.arrivesFirst"})),C.unsellableReason?i.createElement(W,{unsellableReason:C.unsellableReason}):i.createElement(de.LD,{standardClassAlternative:{price:C.standardAlternativeContainer?C.standardAlternativeContainer.price:void 0,fullPrice:C.standardAlternativeContainer?C.standardAlternativeContainer.fullPrice:void 0,isAvailable:!C.unsellableReason,isSmartPrice:null===(v=C.standardAlternativeContainer)||void 0===v?void 0:v.isSmartPrice,originalPrice:null===(h=C.standardAlternativeContainer)||void 0===h?void 0:h.originalPrice,isSale:q,calculatedPrice:null===(g=C.standardAlternativeContainer)||void 0===g?void 0:g.calculatedPrice},firstClassAlternative:{price:C.firstAlternativeContainer?C.firstAlternativeContainer.price:void 0,fullPrice:C.firstAlternativeContainer?C.firstAlternativeContainer.fullPrice:void 0,isAvailable:!C.unsellableReason,isSmartPrice:null===(f=C.firstAlternativeContainer)||void 0===f?void 0:f.isSmartPrice,originalPrice:null===(y=C.firstAlternativeContainer)||void 0===y?void 0:y.originalPrice,isSale:Y,calculatedPrice:null===(b=C.firstAlternativeContainer)||void 0===b?void 0:b.calculatedPrice},discountType:R})),i.createElement(J.V,{className:(0,n.css)(U.Z.carrierLogo),carrierLogos:(0,Z.kx)(C.carrierLogos)}))};var pe=(e,t)=>(a,r)=>!!a&&e.hash===a.journeyHash&&t===a.travelClass||!!r&&e.hash===r.journeyHash&&t===r.travelClass,ve=e=>"number"==typeof e&&e>=0,he=a(93776),ge=e=>t=>{var a,{hasAllEurostarRows:r,isMobile:n,isSelected:i,onSelectAlternative:l,row:o,selection:c}=t;"abc10"===(null==o?void 0:o.journeyId)||""===(null==o||null===(a=o.legs)||void 0===a?void 0:a[0])||i&&!n||l(c,n),r||e((0,s.Mw)(d.h.NON_FLEXIBLE))};const fe=e=>{var t,a,{row:s,testId:d,isLastRow:y,isRecommendedEuJourney:b,isRecommendedJourneyEnabled:E,inwardSelection:C,outwardSelection:S,partnerSelection:_,inwardView:R,isLastItemDay:T,hideStandardColumn:L,hasAllEurostarRows:Z,cheapestFirstClassJourneyHash:D,isPending:N,onSelectSetEventTicketActionAnalyticsFramework:P,onRequestOpenJourneySummaryModal:F,onSelectAlternative:I}=e,M=(0,l.useDispatch)(),{mobile:k}=(0,o.zw)(),{route:B}=(0,g.z)(),J=(0,l.useSelector)(u.GW),V=m.O.GoogleTravelTransport,[j,W]=i.useState(!1),O=B===f.Wr.PARIS_LYON,z=D===s.hash,Q=s.isBus,q=s.hash===(null==_?void 0:_.journeyHash),Y=!s.unsellableReason,{experimentsDict:G}=(0,p.zM)(["experimentsDict"]),$=(0,x.$n)(G,c.zA.ENABLE_GREEN_HIGHLIGHT_CHEAPEST_FIRST_CLASS)&&!k&&O&&z&&!b&&!Q&&!N&&((null==s||null===(t=s.firstAlternativeContainer)||void 0===t||null===(t=t.fullPrice)||void 0===t?void 0:t.amount)||0)>((null==s||null===(a=s.standardAlternativeContainer)||void 0===a||null===(a=a.fullPrice)||void 0===a?void 0:a.amount)||0),K=i.useCallback((()=>{W(!0)}),[]),X=i.useCallback((()=>{W(!1)}),[]),ee=i.useMemo((()=>({isStandardSelected:pe(s,h.U9.STANDARD)(C,S),isFirstSelected:pe(s,h.U9.FIRST)(S,C)})),[s,S,C]),te=i.useCallback(((e,t)=>{P("user");var a=e===h.U9.FIRST?"firstAlternativeContainer":"standardAlternativeContainer",n=_?(0,r.Z)({},_):void 0,i={[R?"selectedInward":"selectedOutward"]:{travelClass:e,journeyHash:s.hash,alternativeHash:s[a].hash,journeyId:s.journeyId},selectedPartner:n};ge(M)({hasAllEurostarRows:Z,isMobile:k,isSelected:t,onSelectAlternative:I,row:s,selection:i})}),[s,k,R,Z,P,I,M,_]),ae=i.useCallback((e=>{e&&e.preventDefault&&e.preventDefault();var t=((e,t)=>{var a=(null==e?void 0:e.price)&&e.price.amount,r=(null==e?void 0:e.fullPrice)&&e.fullPrice.amount,n=(null==t?void 0:t.price)&&t.price.amount,i=(null==t?void 0:t.fullPrice)&&t.fullPrice.amount;if(ve(a)||ve(n))return ve(a)?ve(n)&&(a===n&&r===i||a>n)?h.U9.FIRST:h.U9.STANDARD:h.U9.FIRST})(s.standardAlternativeContainer,s.firstAlternativeContainer);(k?!!t:t===h.U9.STANDARD&&!ee.isStandardSelected||t===h.U9.FIRST&&!ee.isFirstSelected)&&te(t,!1)}),[s,k,ee,te]),re=s&&"1"===s.hash,{isStandardSelected:ne,isFirstSelected:ie}=ee,le=!re&&(ne||ie),se=k?Y?U.Z.partnerJourneyMobile:U.Z.partnerJourneyMobileUnavailable:Y?U.Z.partnerJourney:U.Z.partnerJourneyUnavailable,ce=[U.Z.wrapper,E&&le&&!k&&U.Z.wrapperSelected,y&&U.Z.wrapperLastItem,k&&T&&U.Z.wrapperLastItemDay,j&&U.Z.wrapperSelected,$&&U.Z.wrapperCheapestFirstClass,q&&J&&se],de=(0,l.useSelector)((e=>(0,H.eA)(e))),ue=[U.Z.container,de&&U.Z.containerNoPointerCursor,y&&U.Z.containerLastItem,k&&U.Z.verticalContainer],fe="result-row-".concat(s.journeyId),ye=!k&&E&&b&&!q,be=q&&J&&!N,{getIsExclusiveJourney:Ee}=(0,he.a)(N);return i.createElement("div",{className:(0,n.css)(ce),"data-test":"".concat(d,"-wrapper"),onClick:k?ae:void 0,onMouseDown:K,onMouseUp:X,onTouchStart:K,onTouchEnd:X,"data-test-unsellable":!!s.unsellableReason,"aria-labelledby":fe,role:"button",tabIndex:0,onKeyDown:e=>{var{code:t}=e;k&&"13"===t&&ae()}},i.createElement("div",{id:fe},ye&&i.createElement(w,null),be&&i.createElement(v.H,{searchPartner:V,isSelected:le}),$&&i.createElement(A,null),i.createElement("div",{className:(0,n.css)(ue),"data-test":"".concat(d,"-container")},k?i.createElement(me,{row:s,onRequestOpenJourneySummaryModal:F,exclusiveJourney:Ee(s)}):i.createElement(oe,{row:s,testId:d,inwardView:R,isStandardSelected:ne,isFirstSelected:ie,hideStandardColumn:L,onRequestOpenJourneySummaryModal:F,onSelectAlternative:te,selectCheapestAlternativeInRow:ae,exclusiveJourney:!ye&&Ee(s)}))))}},45712:(e,t,a)=>{a.d(t,{Z:()=>o});Math.pow(10,8);var r=6e4,n=36e5,i=a(4175),l=a(33646);function o(e,t){var a;(0,i.Z)(1,arguments);var o=(0,l.Z)(null!==(a=null==t?void 0:t.additionalDigits)&&void 0!==a?a:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var g,f=function(e){var t,a={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return a;/:/.test(r[0])?t=r[0]:(a.date=r[0],t=r[1],s.timeZoneDelimiter.test(a.date)&&(a.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length)));if(t){var n=s.timezone.exec(t);n?(a.time=t.replace(n[1],""),a.timezone=n[1]):a.time=t}return a}(e);if(f.date){var y=function(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(a);if(!r)return{year:NaN,restDateString:""};var n=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?n:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(f.date,o);g=function(e,t){if(null===t)return new Date(NaN);var a=e.match(c);if(!a)return new Date(NaN);var r=!!a[4],n=m(a[1]),i=m(a[2])-1,l=m(a[3]),o=m(a[4]),s=m(a[5])-1;if(r)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,o,s)?function(e,t,a){var r=new Date(0);r.setUTCFullYear(e,0,4);var n=r.getUTCDay()||7,i=7*(t-1)+a+1-n;return r.setUTCDate(r.getUTCDate()+i),r}(t,o,s):new Date(NaN);var d=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(v[t]||(h(e)?29:28))}(t,i,l)&&function(e,t){return t>=1&&t<=(h(e)?366:365)}(t,n)?(d.setUTCFullYear(t,i,Math.max(n,l)),d):new Date(NaN)}(y.restDateString,y.year)}if(!g||isNaN(g.getTime()))return new Date(NaN);var b,E=g.getTime(),C=0;if(f.time&&(C=function(e){var t=e.match(d);if(!t)return NaN;var a=p(t[1]),i=p(t[2]),l=p(t[3]);if(!function(e,t,a){if(24===e)return 0===t&&0===a;return a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,i,l))return NaN;return a*n+i*r+1e3*l}(f.time),isNaN(C)))return new Date(NaN);if(!f.timezone){var S=new Date(E+C),A=new Date(0);return A.setFullYear(S.getUTCFullYear(),S.getUTCMonth(),S.getUTCDate()),A.setHours(S.getUTCHours(),S.getUTCMinutes(),S.getUTCSeconds(),S.getUTCMilliseconds()),A}return b=function(e){if("Z"===e)return 0;var t=e.match(u);if(!t)return 0;var a="+"===t[1]?-1:1,i=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,l))return NaN;return a*(i*n+l*r)}(f.timezone),isNaN(b)?new Date(NaN):new Date(E+C+b)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function m(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400==0||e%4==0&&e%100!=0}}}]);