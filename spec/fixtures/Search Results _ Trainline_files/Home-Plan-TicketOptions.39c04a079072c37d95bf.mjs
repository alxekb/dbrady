"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[76665],{45715:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(29901);const n=e=>{var{className:t,fill:a="#192325"}=e;return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",className:t,viewBox:"0 0 12 12"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("g",{fillRule:"nonzero"},r.createElement("g",null,r.createElement("path",{stroke:"#004FF9",strokeLinecap:"square",strokeWidth:".5",d:"M2.25 10.75L2.25 10.75",transform:"translate(-295 -721) translate(295 721)"}),r.createElement("path",{fill:a,d:"M4.75 1.75h5l.053.003.093.019.086.035.07.045.052.044.037.042.042.062.03.06.02.062.015.082.002.046v5c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V3.456L3.104 9.604c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07L8.543 2.75 4.75 2.75c-.276 0-.5-.224-.5-.5 0-.245.177-.45.41-.492l.09-.008z",transform:"translate(-295 -721) translate(295 721)"})))))}},79969:(e,t,a)=>{function r(e,t,a){switch(t.length){case 0:return e;case 1:return a(t[0],"common.listFormatter.start",e);default:var n=t.length;return r(a(t[n-1],"common.listFormatter.middle",e),t.slice(0,n-1),a)}}function n(e,t){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],"common.listFormatter.2",e[1]);default:var a=(e=e.slice())[e.length-1];return r(t(e[e.length-2],"common.listFormatter.end",a),e.slice(0,e.length-2),t)}}a.d(t,{C:()=>n,Z:()=>i});const i=(e,t)=>n(e,((e,a,r)=>e?a?t.formatMessage({id:a},[e,r]):e:""))},35454:(e,t,a)=>{a.d(t,{qF:()=>l.Z,Jp:()=>s});a(86173),a(94961),a(29901),a(94575);var r=a(88543),n=a(29433),i=a(75853);const s=()=>{var{enableCO2Emissions:e}=(0,i.x)(),t=(0,r.useSelector)(n.SU);return e&&t};var l=a(29760)},98988:(e,t,a)=>{a.d(t,{k:()=>d});var r=a(23198),n=a(88543),i=a(82768),s=a(42292),l=a(61229),o=a(83504),c=a(51059),d=()=>{var e,t,a,d,m=["Standard","2nd class"],u=(0,n.useStore)().getState(),f=(0,o.FD)(u),p=(0,s.b7)(u,f),g=(0,l.AE)(u,f),v=(0,l.ng)(u,f),b=(0,l.ft)(u,f),E=(0,c.fE)(u,f),h=(0,s.rF)(u,f);if(p&&p.legs&&(null==p||null===(e=p.legs)||void 0===e?void 0:e.length)>1)return[];var y=null==g||null===(t=g[null!==(a=null==p||null===(d=p.sections)||void 0===d?void 0:d[0])&&void 0!==a?a:0])||void 0===t?void 0:t.alternatives,x=Object.values(b).filter((e=>{var t;return null==y?void 0:y.includes(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"")})),S=null==x?void 0:x.map((e=>{var t,a,n=null==v?void 0:v[null!==(t=null==e||null===(a=e.fares)||void 0===a?void 0:a[0])&&void 0!==t?t:0];return(0,r.Z)((0,r.Z)((0,r.Z)({},e),n),{},{alternativeHash:null==e?void 0:e.hash,fareHash:null==n?void 0:n.hash})})),_=Object.values((0,i.vMG)((e=>{var t,{fareLegs:a}=e;return(null==a||null===(t=a[0])||void 0===t||null===(t=t.travelClass)||void 0===t?void 0:t.code)||""}),S)).reduce(((e,t)=>e.concat(Object.values((0,i.vMG)((e=>{var t,{fareLegs:a}=e;return(null==a||null===(t=a[0])||void 0===t||null===(t=t.comfort)||void 0===t?void 0:t.code)||""}),t)).map((e=>1===e.length?e[0]:e.slice().sort(((e,t)=>{var a,r;return((null==e||null===(a=e.fullPrice)||void 0===a?void 0:a.amount)||0)-((null==t||null===(r=t.fullPrice)||void 0===r?void 0:r.amount)||0)}))[0])))),[]).map((e=>{var t,a;return(0,r.Z)((0,r.Z)({},e),{},{typeOfClass:Boolean((null==e||null===(t=e.fareLegs)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.travelClass)||void 0===t?void 0:t.name)&&m.includes(null==e||null===(a=e.fareLegs)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.travelClass)||void 0===a?void 0:a.name))?2:1})})).slice().sort(((e,t)=>t.typeOfClass-e.typeOfClass)),C=(0,i.xHg)(_.map((e=>null==e?void 0:e.selectedExtras))).map((e=>(0,r.Z)((0,r.Z)({},e),{},{availableOnComfortOption:!1}))),T=(0,i.mNm)((e=>{var t;return null==e||null===(t=e.extraType)||void 0===t?void 0:t.name}),C);return _.map((e=>{var t,a,n,i,s,l,o,c,d,u,f,g=Boolean((null==e||null===(t=e.fareLegs)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.travelClass)||void 0===t?void 0:t.name)&&!m.includes(null==e||null===(a=e.fareLegs)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.travelClass)||void 0===a?void 0:a.name)),v=T.map((t=>{var a,n;return(0,r.Z)((0,r.Z)({},t),{},{availableOnComfortOption:null!==(a=null==e||null===(n=e.selectedExtras)||void 0===n?void 0:n.some((e=>{var a,r;return(null==t||null===(a=t.extraType)||void 0===a?void 0:a.name)===(null==e||null===(r=e.extraType)||void 0===r?void 0:r.name)})))&&void 0!==a&&a})})).filter(Boolean);return{comfortId:null==e||null===(n=e.fareLegs)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.comfort)||void 0===n?void 0:n.id,title:null==e||null===(i=e.fareLegs)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.comfort)||void 0===i?void 0:i.name,label:null==e||null===(s=e.fareLegs)||void 0===s||null===(s=s[0])||void 0===s||null===(s=s.travelClass)||void 0===s?void 0:s.name,isFirstClass:g,flexibilityCode:null==e||null===(l=e.flexibility)||void 0===l?void 0:l.code,extras:v,imageUrl:null==e||null===(o=e.fareLegs)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.comfort)||void 0===o?void 0:o.imageUrl,price:null==e||null===(c=e.fullPrice)||void 0===c?void 0:c.amount,currency:null==e||null===(d=e.fullPrice)||void 0===d?void 0:d.currencyCode,legId:null==e||null===(u=e.fareLegs)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.legId,selection:{journeyId:null==p?void 0:p.id,journeyHash:null==p?void 0:p.hash,alternativeHash:[e.alternativeHash]},isInwardView:E,carrierLogo:null==h||null===(f=h[0])||void 0===f||null===(f=f.legs)||void 0===f||null===(f=f[0])||void 0===f?void 0:f.carrierLogo}}))}},29395:(e,t,a)=>{a.d(t,{ZP:()=>ce});var r=a(23198),n=a(88543),i=a(96172),s=a(2031),l=a(32034),o=a(51282),c=a(7739),d=a(92490),m=a(94018),u=a(40939),f=a(37935),p=a(51059),g=a(45499),v=a(83504),b=a(24087),E=a(33695),h=a(51807),y=a(34570),x=a(42292),S=a(32554),_=a(50093),C=a(29901),T=a(98184);a(14023);const N=e=>{var{className:t}=e;return C.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},C.createElement("path",{d:"M24.4205 19.1818C24.4205 19.9157 23.8248 20.5114 23.0909 20.5114C22.357 20.5114 21.7614 19.9157 21.7614 19.1818C21.7614 18.4479 22.357 17.8523 23.0909 17.8523C23.8248 17.8523 24.4205 18.4479 24.4205 19.1818Z"}),C.createElement("path",{d:"M8.90909 20.5114C9.643 20.5114 10.2386 19.9157 10.2386 19.1818C10.2386 18.4479 9.643 17.8523 8.90909 17.8523C8.17518 17.8523 7.57955 18.4479 7.57955 19.1818C7.57955 19.9157 8.17518 20.5114 8.90909 20.5114Z"}),C.createElement("path",{d:"M4.18182 25.0909C3.52912 25.0909 3 24.5618 3 23.9091V17.6065C3 15.9157 4.01098 14.4662 5.47652 13.7502L6.95986 5.96074C7.06601 5.40331 7.55337 5 8.12082 5H23.8792C24.4466 5 24.934 5.40331 25.0401 5.96074L26.5235 13.7502C27.989 14.4662 29 15.9157 29 17.6065V23.9091C29 24.5618 28.4709 25.0909 27.8182 25.0909H26.6364V26.2733C26.6364 26.926 26.1072 27.4551 25.4545 27.4551C24.8018 27.4551 24.2727 26.926 24.2727 26.2733V25.0909H7.72727V26.2733C7.72727 26.926 7.19815 27.4551 6.54545 27.4551C5.89275 27.4551 5.36364 26.926 5.36364 26.2733V25.0909H4.18182ZM5.36364 17.6065V22.7273H26.6364V17.6065C26.6364 16.5372 25.6714 15.6364 24.4417 15.6364H7.55827C6.32861 15.6364 5.36364 16.5372 5.36364 17.6065ZM9.09882 7.36364L7.97356 13.2727H24.0264L22.9012 7.36364H9.09882Z"}))};const A=e=>{var{className:t}=e;return C.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},C.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.9623 4.03771C26.5787 2.6541 24.3354 2.6541 22.9518 4.03771L18.3916 8.59793L8.86857 6.69332C7.70697 6.461 6.50613 6.82459 5.66849 7.66223L4.63661 8.69411C4.01039 9.32033 4.14794 10.37 4.91437 10.8137L12.0466 14.9429L9.82127 17.1682L7.69911 16.6785C6.50882 16.4038 5.26098 16.7617 4.3972 17.6255L3.3949 18.6278C2.77484 19.2478 2.90258 20.2855 3.65452 20.7367L8.39346 23.5801L8.41005 23.59L8.41994 23.6065L11.2633 28.3455C11.7145 29.0974 12.7522 29.2252 13.3722 28.6051L14.3745 27.6028C15.2383 26.739 15.5962 25.4912 15.3215 24.3009L14.8318 22.1787L17.0571 19.9534L21.1863 27.0856C21.63 27.8521 22.6797 27.9896 23.3059 27.3634L24.3378 26.3315C25.1754 25.4939 25.539 24.293 25.3067 23.1314L23.4021 13.6084L27.9623 9.04819C29.3459 7.66459 29.3459 5.42131 27.9623 4.03771ZM24.4601 5.54604C25.0107 4.99546 25.9034 4.99546 26.454 5.54604C27.0045 6.09662 27.0045 6.98928 26.454 7.53986L21.0865 12.9073L23.215 23.5498C23.3074 24.012 23.1628 24.4899 22.8294 24.8232L22.5202 25.1324L17.512 16.4818L12.4874 21.5064L13.243 24.7805C13.3523 25.2542 13.2099 25.7507 12.8662 26.0945L12.575 26.3857L10.2508 22.5121L10.2491 22.5091L10.233 22.4816L10.2176 22.4539L10.2159 22.4508L9.98185 22.0181L9.54912 21.784L9.54605 21.7824L9.5184 21.767L9.49093 21.7509L9.48793 21.7492L5.61435 19.425L5.90553 19.1338C6.24925 18.7901 6.74581 18.6477 7.21946 18.757L10.4936 19.5126L15.5182 14.488L6.86762 9.47976L7.17682 9.17056C7.51015 8.83724 7.988 8.69255 8.45023 8.785L19.0927 10.9135L24.4601 5.54604Z"}))};var F=a(43763),I=(a(23312),a(94575),a(99366));var L=a(35779),w=a(98318);_.StyleSheet.create({chart:{display:"flex",alignItems:"flex-end",justifyContent:"center",width:"100%",height:"250px",gap:L.cr},compactChart:{gap:L.eR},line:{width:"100%",color:w.dp_brand_black,border:"1.5px solid ".concat(w.dp_app_backdrop_duller)},columnWrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",height:"100%",width:"100%",maxWidth:"98px"},aboveColumnIcon:{marginBottom:L.eR},train:{fill:w.dp_brand_primary_dim,width:"26px",height:"26px"},car:{fill:w.dp_brand_tertiary_dim,width:"26px",height:"26px"},plane:{fill:w.dp_brand_tertiary_dim},legend:{display:"block",textAlign:"center",lineHeight:"24px",marginTop:L.OT,fontSize:(0,I.Q1)("16px"),color:w.dp_app_text_subdued}});var O=function(e){return e.TRAIN="train",e.CAR="car",e.PLANE="plane",e}({});O.TRAIN,F.Z,O.CAR,O.PLANE;var D=a(80934),R=a(64321),Z=a(83661),P=a(84752),k=a(37977),B=a(42018),M=a(7726),W=a(67292),H=a(75853),j=a(75769),U=a(58591),z=function(e){return e[e.IS_OVER_NIGHT=0]="IS_OVER_NIGHT",e[e.IS_COACH_TAB=1]="IS_COACH_TAB",e[e.IS_ONLY_BUS_AND_NOT_COACH_TAB=2]="IS_ONLY_BUS_AND_NOT_COACH_TAB",e[e.IS_PART_BUS=3]="IS_PART_BUS",e[e.IS_PART_BUS_NOT_COACH_TAB=4]="IS_PART_BUS_NOT_COACH_TAB",e[e.IS_PART_NOT_SEMI_FLEX=5]="IS_PART_NOT_SEMI_FLEX",e[e.IS_PART_NOT_FULLY_FLEX=6]="IS_PART_NOT_FULLY_FLEX",e[e.IS_PART_NOT_FIRST_CLASS=7]="IS_PART_NOT_FIRST_CLASS",e[e.IS_NOT_ON_THE_DAY_OF_SEARCH_AND_HAVE_JOURNEY_DEPART_AT=8]="IS_NOT_ON_THE_DAY_OF_SEARCH_AND_HAVE_JOURNEY_DEPART_AT",e}({}),J={[z.IS_OVER_NIGHT]:"page.results.overnightJourney",[z.IS_ONLY_BUS_AND_NOT_COACH_TAB]:"page.results.bookingIsByBus",[z.IS_PART_BUS]:"page.results.bookingIsPartiallyByBus",[z.IS_PART_NOT_SEMI_FLEX]:"page.results.bookingIsPartiallyNotSemiFlexible",[z.IS_PART_NOT_FULLY_FLEX]:"page.results.bookingIsPartiallyNotFullyFlexible",[z.IS_PART_NOT_FIRST_CLASS]:"page.results.bookingIsPartiallyNotFirstClass"},V={[c.zK]:"page.results.warningMessage.bookingHorizon.tgvmax"},G=e=>{var{textId:t,journeyStationName:a,distance:r,isResultInMiles:n,queryStationName:i}=e;return C.createElement(k.ZP,{id:t,values:{queryStationName:i,journeyStationName:a,distance:C.createElement(T.FormattedPlural,{key:"distance-measure",one:C.createElement(T.FormattedMessage,{id:n?"distance.mile":"distance.kilometer",values:{distance:C.createElement(T.FormattedNumber,{key:"distance",value:r,minimumFractionDigits:0,maximumFractionDigits:2})}}),other:C.createElement(T.FormattedMessage,{id:n?"distance.miles":"distance.kilometers",values:{distance:C.createElement(T.FormattedNumber,{key:"distance",value:r,minimumFractionDigits:0,maximumFractionDigits:2})}}),value:r})},tagsMap:{b:P.Z}})},X=e=>null!=e&&e.origin||null!=e&&e.destination?C.createElement(Z.gX,{styleSheet:j.Z.informationAlert},C.createElement("div",{className:(0,_.css)(j.Z.departureAndArrivalMismatch)},(null==e?void 0:e.origin)&&C.createElement(G,(0,R.Z)({},null==e?void 0:e.origin,{textId:"page.results.departureLocationDifferentFromRequested"})),(null==e?void 0:e.destination)&&C.createElement(G,(0,R.Z)({},null==e?void 0:e.destination,{textId:"page.results.arrivalLocationDifferentFromRequested"})))):null;const Q=(0,T.injectIntl)((e=>{var t,{journeyDepartAt:a,revalidationDataForUIHash:r,revalidationUIState:n,stationMismatchWarningData:i,hasSelection:s,euFlowPassengers:l,showRailcardRecommendBanner:o,isPassengerCarteAvantageCandidate:d,cappedFare:m,legMismatchWarning:u,alertMessages:f,bookingWarningsAsWarningAlert:p=[],hasDiscountCardApplied:g,warningsWithLocalTransport:v=[]}=e,{enableMismatchStationAtLegLevel:b}=(0,H.x)(),E=s&&n&&n.showWarning&&!f.includes(z.IS_COACH_TAB),h=!!p.length,y=s&&(h||f.some((e=>[z.IS_NOT_ON_THE_DAY_OF_SEARCH_AND_HAVE_JOURNEY_DEPART_AT,z.IS_OVER_NIGHT,z.IS_ONLY_BUS_AND_NOT_COACH_TAB,z.IS_PART_BUS_NOT_COACH_TAB,z.IS_PART_NOT_FULLY_FLEX,z.IS_PART_NOT_SEMI_FLEX,z.IS_PART_NOT_FIRST_CLASS].includes(e)))),x=!!y||!!E||!!X(i);return C.createElement("div",{className:(0,_.css)(j.Z.root)},x||g?null:d&&m?C.createElement(M.Z,{text:C.createElement(k.ZP,{id:"page.results.cappedFare",tagsMap:{b:P.Z},values:{cappedFare:m}}),icon:"railcard"}):o?C.createElement(B.Z,{passengers:l,slimVariant:!1}):null,s&&!h&&X(i),(t={[c.Xs]:"page.results.originLocalAreaTransportIncluded",[c.Hm]:"page.results.originLocalAreaTransportExcluded",[c.TQ]:"page.results.destinationLocalAreaTransportIncluded",[c.A]:"page.results.destinationLocalAreaTransportExcluded"},v.map(((e,a)=>{var r;return C.createElement(Z.gX,{key:null!==(r=e.code)&&void 0!==r?r:""+a,styleSheet:j.Z.informationAlert},C.createElement(k.ZP,{id:t[e.code],values:{actualLocation:e.actualLocation,requestedLocation:e.requestedLocation,localTransportNetwork:e.carrierName,distance:C.createElement(T.FormattedPlural,{key:"distance-measure",one:C.createElement(T.FormattedMessage,{id:e.isResultInMiles?"distance.mile":"distance.kilometer",values:{distance:C.createElement(T.FormattedNumber,{key:"distance",value:e.distance,minimumFractionDigits:0,maximumFractionDigits:2})}}),other:C.createElement(T.FormattedMessage,{id:e.isResultInMiles?"distance.miles":"distance.kilometers",values:{distance:C.createElement(T.FormattedNumber,{key:"distance",value:e.distance,minimumFractionDigits:0,maximumFractionDigits:2})}}),value:e.distance})},tagsMap:{b:P.Z}}))}))),E&&r&&C.createElement(U.ZP,{revalidationDataForUIHash:r,revalidationUIState:n}),y&&!h&&C.createElement(Z.gX,{styleSheet:j.Z.informationAlert},f.includes(z.IS_NOT_ON_THE_DAY_OF_SEARCH_AND_HAVE_JOURNEY_DEPART_AT)&&C.createElement(T.FormattedMessage,{id:"page.results.bookingIsForDate",tagName:"p",values:{date:C.createElement(T.FormattedDate,{value:new Date((0,W.Qb)(a)),weekday:"long",month:"long",day:"numeric",timeZone:"UTC"})}}),f.map((e=>{var t=J[e];return t&&C.createElement(T.FormattedMessage,{id:t,tagName:"p"})}))),y&&p.map((e=>e.code&&V[e.code]&&C.createElement(Z.gX,{key:e.code,styleSheet:j.Z.informationAlert},C.createElement(T.FormattedMessage,{id:V[e.code],tagName:"p"})))),b&&!!u.length&&u.map((e=>C.createElement(Z.gX,{key:e.journeyStationName,styleSheet:j.Z.informationAlert},C.createElement(G,(0,R.Z)({},e,{textId:"page.results.departureLocationDifferentFromRequested"}))))))}));var Y=a(19408),q=a(32143),K=a(82768),$=(0,l.P1)(h.co,(e=>{var t={};if(!e)return t;for(var a of e){var{code:r,target:n}=a,i=n&&n[0]&&n[0].id;i&&(t[i]=t[i]||{},r===c.Rl&&(t[i].hasOriginWarning=!0),r===c.vF&&(t[i].hasDestinationWarning=!0))}return t})),ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&e.longitude&&e.latitude&&t.longitude&&t.latitude)return{journeyStationName:t.name,queryStationName:e.name,distance:(0,f.JV)(e.latitude,e.longitude,t.latitude,t.longitude,a),isResultInMiles:a}},te=(0,l.P1)(p.fE,q.sy,q.m3,((e,t,a)=>e?a:t)),ae=(0,l.P1)(te,x.PW,((e,t)=>{var a=new Map;return null==e||e.fareLegs.forEach((e=>{var r=t.find((t=>e.legId===t.id));void 0!==r&&null!=e.id&&a.set(e.id,r)})),a})),re=(0,l.P1)(h.Fn,(e=>{var t=new Map;return null==e||e.forEach((e=>{var a,r,n=null===(a=e.target)||void 0===a||null===(a=a.find((e=>"fareLeg"===e.type)))||void 0===a?void 0:a.id;void 0!==n&&t.set(n,(null!==(r=t.get(n))&&void 0!==r?r:[]).concat(e))})),t})),ne=(0,l.P1)(re,te,ae,S.$h,S.JN,u.pv,p.fE,((e,t,a,n,i,s,l)=>{if(!t)return[];var o=t.fareLegs.map((t=>{var o,c;return(null!==(o=e.get(null!==(c=t.id)&&void 0!==c?c:""))&&void 0!==o?o:[]).map((e=>{var o,c,d,m=null===(o=e.target)||void 0===o||null===(o=o.find((e=>"localTransport"===e.type)))||void 0===o?void 0:o.id,u=null===(c=t.localTransport)||void 0===c?void 0:c.find((e=>e.id===m)),f=a.get(null!==(d=t.id)&&void 0!==d?d:""),p=null==u?void 0:u.carrier.name,g="OriginLocalAreaTransportIncluded"===e.code||"OriginLocalAreaTransportExcluded"===e.code,v=g?null==f?void 0:f.origin:null==f?void 0:f.destination,b=ee(g?l?i:n:l?n:i,v,s);return(0,r.Z)((0,r.Z)({},e),{},{actualLocation:null==b?void 0:b.journeyStationName,requestedLocation:null==b?void 0:b.queryStationName,distance:null==b?void 0:b.distance,isResultInMiles:s,carrierName:p})}))}));return(0,K.xHg)(null!=o?o:[])})),ie=(0,l.P1)($,x.b7,((e,t)=>t&&e&&e[t.id])),se=(0,l.P1)(ie,x.PW,S.$h,S.JN,p.fE,u.pv,((e,t,a,r,n,i)=>{var s={};if(!e||!t||0===t.length)return s;var l=t[0].origin,o=t[t.length-1].destination,c=n?r:a,d=n?a:r;return e.hasOriginWarning&&(s.origin=ee(c,l,i)),e.hasDestinationWarning&&(s.destination=ee(d,o,i)),s})),le=(0,l.P1)(x.PW,d.Yu,p.fE,u.pv,((e,t,a,r)=>e.map(((a,r)=>{var n,i,s;return{origin:{location:t[null===(n=a.destination)||void 0===n?void 0:n.id],transportModeName:a.transportModeName},destiny:{location:t[null===(i=e[r+1])||void 0===i||null===(i=i.origin)||void 0===i?void 0:i.id],transportModeName:null===(s=e[r+1])||void 0===s?void 0:s.transportModeName}}})).filter((e=>{var{origin:t,destiny:a}=e;return t.location&&a.location&&t.transportModeName===O.TRAIN&&a.transportModeName===O.TRAIN&&t.location.name!==a.location.name})).map((e=>{var{origin:t,destiny:n}=e;return ee(a?n.location:t.location,a?t.location:n.location,r)})).filter(Boolean)));function oe(e,t,a){var r=[],n=(0,x.eh)(e,t),i=(0,x.VW)(e,t),s=(0,x.oY)(e,t),l=(0,x.D3)(e,t),o=n.some((e=>{var{mode:t}=e;return"bus"===t})),c=n.some((e=>{var{mode:t}=e;return"train"===t}));(0,x.OL)(e,t)&&a&&r.push(z.IS_NOT_ON_THE_DAY_OF_SEARCH_AND_HAVE_JOURNEY_DEPART_AT),(0,x.hB)(e,t)&&r.push(z.IS_OVER_NIGHT);var d=(0,m.vR)(e)===b.ZP.COACH;d&&r.push(z.IS_COACH_TAB);var u=o&&c;return u&&r.push(z.IS_PART_BUS),u&&!d&&r.push(z.IS_PART_BUS_NOT_COACH_TAB),o&&!c&&!d&&r.push(z.IS_ONLY_BUS_AND_NOT_COACH_TAB),s&&r.push(z.IS_PART_NOT_SEMI_FLEX),l&&r.push(z.IS_PART_NOT_FULLY_FLEX),i&&r.push(z.IS_PART_NOT_FIRST_CLASS),r}const ce=(0,s.compose)(i.EN,D.Z,(0,n.connect)(((e,t)=>{var{filters:a,filteredJourneys:r}=t,n=(0,v.FD)(e),i=(0,h.yj)(e,n),s=(0,y.pJ)(e),l=(0,y.JX)(e),c=(0,o.gH)(e),d=(0,x.XD)(e,n),m=(0,x.mz)(e),u=(0,x.SB)(e,n);return{journeyDepartAt:d,bookingWarningsAsWarningAlert:i,revalidationDataForUIHash:s,revalidationUIState:l,stationMismatchWarningData:se(e,n),legMismatchWarning:le(e,n),hasSelection:(0,x.GB)(e,n,{filters:a,filteredJourneys:r}),euFlowPassengers:c.euFlowPassengers,hasDiscountCardApplied:(0,x.R6)(e,n),isPassengerCarteAvantageCandidate:m&&(0,Y.eB)(e,E.zA.ENABLE_PRICE_CAP_BANNER),cappedFare:u,showRailcardRecommendBanner:(0,g.PB)(e),alertMessages:oe(e,n,d),warningsWithLocalTransport:ne(e,n)}}),{}))(Q)},88963:(e,t,a)=>{a.d(t,{Z:()=>an});var r=a(41344),n=a(88543),i=a(96172),s=a(2031),l=a(46206),o=a(81153),c=a(21168),d=a(9187),m=a(72750),u=a(59770),f=a(14891),p=a(98094),g=a(29011),v=a(29433),b=a(65737),E=a(51059),h=a(51807),y=a(7173),x=a(89034),S=a(83504),_=a(79257),C=a(95444),T=a(63062),N=a(82768),A=a(32034),F=a(65033),I=(0,A.P1)(u.uh,T.tN,((e,t)=>{if(e===F.H.MORE&&void 0!==t){var{comforts:a}=t.legs[0];return a.slice(2,a.length)}return t&&(0,N.xHg)(t.legs[0].comforts.filter((t=>t.code===e)))})),L=a(42292),w=a(29901),O=a(24114),D=a(94575),R=a(50549),Z=a(37415),P=a(50093),k=a(37754),B=a(72222),M=a(34412),W=a(6615),H=a(98318),j=a(8888),U=a(52068);const z=P.StyleSheet.create({tabWrapper:{flexDirection:"column",display:"flex",width:"100%",alignItems:"center",flex:"1",position:"relative",":hover .tab-tooltip":{visibility:"visible"}},tab:{minHeight:"64px",justifyContent:"center",textAlign:"center",padding:"".concat(j.Z.sizes.spacersValues.xxs,"rem 0 0"),fontFamily:U.R.brand.face.fontFamily,fontSize:U.W.small.fontSize,fontWeight:U.R.brand.weights.normal,lineHeight:1,borderWidth:0,color:H.dp_app_text_base,flexDirection:"column"},activeTab:{backgroundColor:H.dp_app_backdrop_base,color:H.dp_app_text_base},inactiveTab:{backgroundColor:H.dp_app_backdrop_base},title:{fontWeight:U.R.brand.weights.book,fontSize:"var(--DEPRECATED-18px)",opacity:.9},description:{opacity:.8},fullPrice:{fontSize:"var(--DEPRECATED-14px)",fontWeight:"normal",color:H.dp_app_text_subtle,marginBottom:"".concat(j.Z.sizes.spacersValues.s,"rem"),marginTop:"".concat(j.Z.sizes.spacersValues.s,"rem")},deltaPrice:{marginLeft:"-0.35rem"},activeText:{fontWeight:U.R.brand.weights.bold,opacity:1},activeBorder:{backgroundColor:H.dp_app_selection_dull,borderTopLeftRadius:"4px",borderTopRightRadius:"4px",height:"4px",width:"100%"},inactiveBorderSpacer:{minHeight:"4px"},titleContainer:{flexGrow:1,display:"flex",alignItems:"center"},tabTooltip:{position:"absolute",visibility:"hidden",zIndex:1,width:"100%",fontSize:U.W.body.fontSize,fontWeight:U.R.brand.weights.book,top:"-150%",color:H.dp_app_text_base}});const J=e=>{var{testId:t,isActive:a,onClick:r,title:n,description:i,fullPrice:s,deltaPrice:l,styleSheet:o,isLoading:c}=e,[d,m]=(0,w.useState)(!1);return w.createElement(W.Z,{isActive:a,onClick:r,disabled:c,testId:t,styleSheet:[z.tab,o,a?z.activeTab:z.inactiveTab]},w.createElement("div",{"data-test":"flexibility-filter-".concat(t),className:(0,P.css)(z.tabWrapper)},d&&w.createElement("div",{className:"".concat((0,P.css)(z.tabTooltip)," tab-tooltip")},w.createElement(k.ZP,{arrow:k.nD.BOTTOM,isDismissible:!1},n)),w.createElement("div",{className:(0,P.css)(z.titleContainer)},w.createElement("div",{className:(0,P.css)(z.title,a?z.activeText:"")},w.createElement(M.Z,{lineLimit:2,onTruncate:()=>m(!0)},n))),w.createElement("div",{className:(0,P.css)(z.description)},i),w.createElement("div",{className:(0,P.css)(z.fullPrice)},s?w.createElement("div",{"data-test":"full-price"},w.createElement(B.Z,{value:s.amount,currency:s.currencyCode})):l&&w.createElement("div",{className:(0,P.css)(z.deltaPrice),"data-test":"delta-price"},"+ ",w.createElement(B.Z,{value:l.amount,currency:l.currencyCode})))),w.createElement("div",{className:(0,P.css)(a?z.activeBorder:z.inactiveBorderSpacer)}))};var V=a(35779);const G=P.StyleSheet.create({tabListWrapper:{display:"flex",justifyContent:"space-between",marginBottom:V.eR},severalTabs:{marginTop:V.VG,marginBottom:V.cr,borderBottom:"1px solid ".concat(H.dp_app_border_base)}});var X=e=>{var{comfortOption:t,comfortType:a,selectedTab:r,isLoading:n,onClick:i}=e,{formatMessage:s}=(0,D.YB)(),l=a===F.H.MORE?s({id:"customerJourneySummary.europe.comfortOptions.moreClasses"}):t.name,o=(0,w.useCallback)((()=>i(t,a)),[i,t,a]);return w.createElement(J,{testId:a,isActive:r===a,isLoading:n,onClick:o,title:l,fullPrice:t.cheapestPrice||void 0})};const Q=e=>{var{selectedTab:t,isLoading:a,comforts:r,isInwardView:n,journeyHash:i,setComfortFilterSelectedTab:s,onSelectAlternative:l}=e,o=(0,w.useCallback)(((e,t)=>{var{selection:a,selectedComfort:r}=function(e,t,a,r){var n,i=(n=e).fares&&n.fares[0]&&n.fares[0].hash;return{selection:{[a?"selectedInward":"selectedOutward"]:{travelClass:e.fares.some(R.rE)?"First":"Standard",journeyHash:r,alternativeHash:[i]}},selectedComfort:t}}(e,t,n,i);s(r),l(a)}),[n,i,s,l]),[c,d]=function(e){var t=2===e.length?2:e.length<2?0:3;return[(0,w.useMemo)((()=>e.slice(0,t)),[e,t]),e.length>3]}(r);return w.createElement(Z.Z,{styleSheet:[G.tabListWrapper,c.length>1&&G.severalTabs]},c.map(((e,r)=>w.createElement(X,{key:e.id,comfortOption:e,comfortType:d&&2===r?F.H.MORE:F.U[e.code],selectedTab:t,isLoading:a,onClick:o}))))};var Y=a(7041),q=a(32554),K=a(83367);const $=P.StyleSheet.create({root:{margin:K.spacers.m}});var ee=a(61490);const te=e=>{var{from:t,to:a}=e,r=(0,Y.K7)(t.arriveAt,a.departAt),n=(0,q.Qw)(t.destination,a.origin);return w.createElement(ee.Z,{duration:r,inSameStation:n,styleSheet:$})};var ae=a(64321),re=a(98184),ne=a(50453);const ie=e=>{var{trainNumber:t,vendorQuotaIdentifier:a,className:r}=e;return w.createElement("span",{className:r},a&&a.length>t.length?a:t)},se=P.StyleSheet.create({root:{display:"flex",margin:"".concat(K.spacers.m," 0 ").concat(K.spacers.s),fontFamily:U.R.brand.face.fontFamily,fontSize:15,color:"#333333",width:"100%",justifyContent:"space-between"},fromTo:{flexShrink:1},routeDetails:{display:"flex",flexShrink:0,justifyContent:"flex-end",alignItems:"center"},trainNumber:{fontWeight:"normal",lineHeight:"1em"},carrierLogoWrapper:{width:"68px",textAlign:"right"},carrierLogo:{width:"100%",verticalAlign:"middle",marginBottom:"2px"}});const le=e=>{var{origin:t,destination:a,routeDetails:r,styleSheet:n,showFullStationNames:i}=e,s=i?t.name:(0,L.Nx)(t),l=i?a.name:(0,L.Nx)(a),o=s&&l&&s===l;return w.createElement("div",{className:(0,P.css)(se.root,n&&n.root)},w.createElement("span",{className:(0,P.css)(se.fromTo,n&&n.fromTo)},o?w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.trip"}):w.createElement(re.FormattedMessage,{id:"common.route",values:{origin:s||t.name,destination:l||a.name}})),r&&w.createElement("span",{className:(0,P.css)(se.routeDetails,n&&n.routeDetails),"data-test":"route-details-container"},r.timetableId&&w.createElement("span",{className:(0,P.css)(se.trainNumber,n&&n.trainNumber),"data-test":"route-details-train-number"},w.createElement(ie,{trainNumber:r.timetableId,vendorQuotaIdentifier:r.vendorQuotaIdentifier})),r.carrierLogos&&r.carrierLogos.map(((e,t)=>w.createElement(ne.pl,(0,ae.Z)({key:"carrier-logo-".concat(t),className:(0,P.css)(se.carrierLogoWrapper,n&&n.carrierLogoWrapper),iconClassName:(0,P.css)(se.carrierLogo,n&&n.carrierLogo),testId:e.name||e.mode},e))))))};var oe=a(86234),ce=a(75290),de=a(85924),me=a(79239),ue=a(93902),fe=a(79969),pe=a(23198),ge=a(60289),ve={label:{alignSelf:"flex-start",flex:1},name:{display:"flex",flex:1,[ge.ZP.small.min]:{justifyContent:"flex-start"},alignItems:"center"},price:{whiteSpace:"nowrap",[ge.ZP.small.min]:{color:H.dp_app_text_subtle},marginLeft:V.OT},visuallyHidden:{width:0,height:0,overflow:"hidden"},newPromoLabel:{display:"flex",marginLeft:V.eR},mealIncludedPromoLabel:{display:"flex",marginTop:V.OT,marginBottom:V.OT}};const be=P.StyleSheet.create((0,pe.Z)({},ve));var Ee=P.StyleSheet.create({name:(0,pe.Z)((0,pe.Z)({display:"flex",justifyContent:"space-between"},U.W.title5),{},{fontWeight:U.R.body.weights.semiBold,color:H.dp_app_text_base}),description:{display:"block",color:H.dp_app_text_subtle,padding:"".concat(j.Z.sizes.spacers.xs," ").concat(j.Z.sizes.spacers.xl," 0 ").concat(j.Z.sizes.spacers.s)},label:(0,pe.Z)({},ve.label),price:(0,pe.Z)((0,pe.Z)((0,pe.Z)({},ve.price),{},{color:H.dp_app_text_base},U.W.title5),{},{fontWeight:U.R.body.weights.semiBold}),comfortContainer:{flex:"1"}});const he=(0,re.injectIntl)((e=>{var{price:t,name:a,description:r,availableOnTrainList:n,intl:i}=e;return w.createElement("div",{className:(0,P.css)(Ee.comfortContainer)},w.createElement("div",{className:(0,P.css)(Ee.label)},w.createElement("span",{className:(0,P.css)(Ee.name)},w.createElement("span",{"data-test":"comfort-option-name"},a),w.createElement("span",{className:(0,P.css)(Ee.price),"data-test":"comfort-option-price"},t&&w.createElement(w.Fragment,null,w.createElement("span",null,"+ "),w.createElement(B.Z,{currency:t.currencyCode,value:t.amount})))),w.createElement("div",{"data-test":"comfort-option-description",className:(0,P.css)(Ee.description)},n&&n.length>0?w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.descriptionWithTrain",values:{trainList:(0,fe.Z)(n,i),description:r}}):r)))}));var ye=a(56674),xe=a(23394);const Se=P.StyleSheet.create({title:(0,pe.Z)({marginTop:j.Z.sizes.spacers.m},U.W.title4),radioContainer:{marginTop:j.Z.sizes.spacers.l,display:"flex",justifyContent:"space-between",[ge.ZP.small.min]:{marginRight:K.spacers.m}},photoUpsellContainer:{width:144,minWidth:144,height:70,overflow:"hidden",marginLeft:j.Z.sizes.spacers.m,border:"solid 1px ".concat(H.dp_brand_neutral_brighter),borderRadius:xe.E0.l},photoUpsell:{width:"100%"},tick:{color:H.dp_brand_primary_mid,margin:"6px 4px 0 0",padding:"0px 4px 4px 4px",width:"13px",height:"13px",verticalAlign:"middle",flexShrink:0},single:{marginTop:j.Z.sizes.spacers.s,display:"flex",flexDirection:"column"},link:{padding:0,marginTop:xe.W0.s1,":hover":{background:"none"},":nth-child(2) > span":{padding:0}},frame:{margin:"".concat(K.spacers.px24," 0"),padding:"".concat(K.spacers.px20," ").concat(K.spacers.px16),boxShadow:"0 0 ".concat(K.spacers.px4," 0 ").concat(H.dp_brand_neutral_brighter)},legNameSection:{display:"flex",alignItems:"center",padding:"0 0 ".concat(K.spacers.px4)},legName:{flex:"3"},legIcons:{display:"flex",flexDirection:"column",alignItems:"center",flex:"1"},legIcon:{objectFit:"contain",height:"var(--DEPRECATED-14px)"}});var _e=P.StyleSheet.create((0,pe.Z)((0,pe.Z)({},ye.j),{},{root:(0,pe.Z)((0,pe.Z)({},ye.j.root),{},{alignItems:"flex-start",flex:1})})),Ce=P.StyleSheet.create({root:{alignItems:"flex-start"},inputContainer:{alignSelf:"flex-start"},input:{marginLeft:"0",marginTop:"0"}}),Te=P.StyleSheet.create({root:{alignItems:"flex-start",flex:"1"},inputContainer:{alignSelf:"flex-start",paddingTop:"".concat(j.Z.sizes.spacersValues.px3,"rem")},input:{marginLeft:"0",marginTop:"0"},radioContainer:{flex:1,background:"transparent",transition:"background 0.5s",marginTop:j.Z.sizes.spacers.s,paddingLeft:j.Z.sizes.spacers.px9,paddingTop:j.Z.sizes.spacers.s,paddingBottom:j.Z.sizes.spacers.s,borderRadius:xe.E0.m,display:"flex",justifyContent:"space-between",cursor:"pointer",":hover":{background:xe.O9.palette.grey_50}}}),Ne=(0,s.compose)(i.EN,(0,n.connect)(((e,t)=>{var a=(0,S.FD)(e);return{comfortOptions:t.comfort,hasJourneyOneSingleLeg:(0,L.Qh)(e,a),isInwardView:(0,E.fE)(e,a),journeyHash:t.journeyHash,selectedOutward:(0,E.k$)(e),selectedInward:(0,E.vs)(e)}}),((e,t)=>{var{legs:a}=t;return{onSelectComfort:t=>{var{comfortId:r}=t;e((0,m.TD)({comfortId:r,legs:a.map((e=>e.id))}))},onSelectAlternative:t=>{e((0,m.HE)(t,{}))}}})))((e=>{var{onSelectAlternative:t,isInwardView:a,journeyHash:r,comfortOptions:n,onSelectComfort:i,selectedOutward:s,selectedInward:l}=e,o=n&&n.fares[0]&&n.fares[0].fullPrice,c=((e,t,a)=>e&&t?t.split(":")[1]:a?a.split(":")[1]:"")(a,l,s),d=n.fares.some((e=>e.hash===c))?c:n&&n.fares[0]&&n.fares[0].hash;return w.createElement(w.Fragment,null,n.fares.map((e=>{var s,l,{fareType:c}=e;return w.createElement("div",{className:(0,P.css)(Te.radioContainer),key:e.id},w.createElement(ue.Z,{name:e.id,styleSheet:Te,id:e.id,value:e.id,checked:e.hash===d,onClick:()=>{return s=e.hash,l=n.id,o=n.fares.some((e=>(0,R.rE)(e))),[t({[a?"selectedInward":"selectedOutward"]:{travelClass:o?"First":"Standard",journeyHash:r,alternativeHash:[s]}}),i({comfortId:l})];var s,l,o},testId:"comfort-option-radio-input"},w.createElement(he,{name:c.name,description:c.conditionsSummary,price:(s=o,l=e.price,l&&s&&l.amount-s.amount!=0?{amount:l.amount-s.amount,currencyCode:l.currencyCode}:void 0),availableOnTrainList:void 0})))})))})),Ae=a(41966),Fe=P.StyleSheet.create({container:{background:"transparent",transition:"background 0.5s",transitionTimingFunction:"ease",margin:"-".concat(K.spacers.px19),padding:K.spacers.px19,cursor:"pointer",":hover":{background:xe.O9.palette.grey_50},':hover [data-test="comfort-class-more"]':{color:H.dp_app_text_base}},nameTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:K.spacers.m},descriptionHeader:{display:"flex",alignItems:"baseline",justifyContent:"space-between"},name:(0,pe.Z)((0,pe.Z)({},U.W.title3),{},{letterSpacing:U.W.title2.letterSpacing}),fareTitle:(0,pe.Z)((0,pe.Z)({},U.W.title3),{},{fontWeight:"normal",letterSpacing:"-0.0175rem"}),price:(0,pe.Z)((0,pe.Z)({},U.W.title3),{},{fontWeight:U.R.body.weights.normal}),descriptionExpander:{display:"flex",justifyContent:"space-between",marginTop:K.spacers.px4},description:(0,pe.Z)((0,pe.Z)({},U.W.title5),{},{paddingRight:K.spacers.m}),reverseChevron:{transform:"rotate(180deg)"},expander:{alignSelf:"flex-end",display:"flex",flexShrink:0,alignItems:"baseline",margin:"".concat(K.spacers.px4," 0 0 ").concat(K.spacers.px4)},more:{marginRight:K.spacers.px8,fontWeight:600,color:"transparent",lineHeight:1.6,transition:"color 0.3s",transitionTimingFunction:"ease"},close:{marginRight:K.spacers.px8,fontWeight:U.R.body.weights.semiBold,lineHeight:1.6},chevron:{minHeight:K.spacers.px9}}),Ie=e=>{var{comfortClassName:t,comfortDescription:a,extras:r,fareTitle:n,selectedComfortPrice:i,cheapestAvailablePrice:s,isOverflowTab:l,isExpanded:o,onClick:c}=e,d=o?i:s;return w.createElement("div",{role:"button",tabIndex:0,onClick:c,onKeyDown:c,className:(0,P.css)(l&&!o&&Fe.container),"data-test":"comfort-description-container"},w.createElement("div",{className:(0,P.css)(Fe.descriptionHeader)},w.createElement("span",{className:(0,P.css)(Fe.nameTitle)},w.createElement("span",{className:(0,P.css)(Fe.name),"data-test":"comfort-class-name"},t),l&&n&&w.createElement("span",{className:(0,P.css)(Fe.fareTitle),"data-test":"comfort-class-fare-title"}," - ".concat(n))),l&&n&&w.createElement("span",{"data-test":"comfort-class-fare-price",className:(0,P.css)(Fe.price)},d&&w.createElement(B.Z,{currency:d.currencyCode,value:d.amount}))),w.createElement("div",{className:(0,P.css)(Fe.descriptionExpander)},w.createElement("span",{className:(0,P.css)(Fe.description),"data-test":"comfort-class-description"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=null!==e&&e.length?"."===e.charAt(e.length-1)?t.length?"".concat(e," "):e:"".concat(e,". "):"",r="".concat(a.charAt(0).toUpperCase()).concat(a.slice(1)),n=t.map(((e,t)=>{var a=e.extraType.name,r=0===t?a.charAt(0).toUpperCase():a.charAt(0).toLowerCase();return"".concat(r).concat(a.slice(1))})).join(", ");return n?"".concat(r).concat(n,"."):r}(a,r)),l&&w.createElement("div",{className:(0,P.css)(Fe.expander)},o?w.createElement(re.FormattedMessage,{id:"page.europe.matrix.cjs.close"},(e=>w.createElement("span",{className:(0,P.css)(Fe.close),"data-test":"comfort-class-close"},e))):w.createElement(re.FormattedMessage,{id:"page.europe.matrix.cjs.more"},(e=>w.createElement("span",{className:(0,P.css)(Fe.more),"data-test":"comfort-class-more"},e))),w.createElement(Ae.Z,{className:(0,P.css)(Fe.chevron,o&&Fe.reverseChevron)}))))};const Le=P.StyleSheet.create({comfortContainer:{":not(:last-child)":{borderBottom:"".concat(K.spacers.px1," solid ").concat(H.dp_app_border_base),paddingBottom:K.spacers.xl,marginBottom:K.spacers.xl}},overflowTab:{border:"".concat(K.spacers.px1," solid ").concat(H.dp_brand_neutral_brighter),borderRadius:xe.E0.m,padding:K.spacers.px20,":not(:last-child)":{marginBottom:K.spacers.m}},isExpanded:{border:"".concat(K.spacers.xxs," solid ").concat(H.dp_brand_secondary_duller)},flexibilityOptions:{fontWeight:U.R.body.weights.semiBold,marginTop:K.spacers.l}});var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return JSON.stringify(e.map((e=>e.id)))};class Oe extends w.Component{constructor(){super(...arguments),(0,de.Z)(this,"isExpanded",(e=>e===this.props.selectedComfortID)),(0,de.Z)(this,"onTabClick",((e,t)=>this.isExpanded(e.id)?this.props.setSelectedComfortID(void 0):(this.props.setSelectedComfortID(e.id),this.props.onTabClick({journeyHash:this.props.journeyHash,comfort:e,alternativeHash:e.fares[0].hash,legs:t})))),(0,de.Z)(this,"isSelected",((e,t)=>this.props.selectedComfortID?this.isExpanded(e):e===t))}render(){var{multipleSections:e,section:{legs:t,mixedLegComforts:a},isEuropeCoachExperience:r,selectedComfort:n,journeyHash:i,selectedComfortDetails:s,isOverflowTab:l}=this.props,o=t.map((e=>e.fareTypes)),c=!e&&1===t.length,d=!a&&t.length>1,m=c||d;if((e=>{var[t,...a]=e,r=we(t);return a.every((e=>we(e)===r))})(o)&&(d||!e)&&!t[0])throw new Error("No fare to display");var u=m&&!r,f=l?Le.overflowTab:Le.comfortContainer;return w.createElement(w.Fragment,null,n.map((e=>{var a=s&&this.isSelected(e.id,s.selectedComfortId)&&l&&Le.isExpanded;return w.createElement("div",{className:(0,P.css)(f,a),key:e.id,"data-test":"section-csfp-container"},w.createElement(me.Z,{shouldAnimate:!0,shouldAnimateOnMount:!1,expanded:!l||this.isExpanded(e.id),element:w.createElement(Ie,{comfortClassName:e.name,comfortDescription:e.description,extras:e.extras,fareTitle:s&&s.selectedComfortId===e.id?s&&s.selectedComfortName:e.fares&&e.fares[0]&&e.fares[0].fareType.name,selectedComfortPrice:s&&s.selectedComfortPrice,cheapestAvailablePrice:e.cheapestPrice,isOverflowTab:l,isExpanded:this.isExpanded(e.id),onClick:()=>this.onTabClick(e,t)})},u?w.createElement(w.Fragment,null,l&&w.createElement("div",{className:(0,P.css)(Le.flexibilityOptions),"data-test":"flexibility-options"},w.createElement(re.FormattedMessage,{id:"page.europe.matrix.cjs.flexibilityOptions"})),w.createElement(Ne,{comfort:e,journeyHash:i,legs:t,key:"".concat(e.id,"-").concat(t.map((e=>e.id)).join("-"))})):void 0))})))}}const De=Oe;const Re=(0,s.compose)(i.EN,(0,n.connect)((e=>{var t=(0,S.FD)(e);return{selectedComfortDetails:(0,ce.P5)(e,t),isOverflowTab:(0,ce.u)(e,t),selectedComfortID:(0,oe.uh)(e)}}),(e=>({onTabClick:t=>{t&&t.comfort&&t.comfort.fares&&t.comfort.fares[0]&&e((0,ce.bn)({hash:t.comfort.fares[0].hash})),e((0,ce.GC)(t))},setSelectedComfortID:t=>e((0,oe.SV)(t))}))))(De);var Ze=a(67292),Pe=a(89141),{sizes:ke}=j.Z;const Be=P.StyleSheet.create({wrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:xe.E0.l,border:"solid 1px ".concat(H.dp_brand_neutral_brighter),marginTop:ke.spacers.l,paddingLeft:ke.spacers.m,paddingRight:ke.spacers.m,paddingTop:ke.spacers.px6,paddingBottom:ke.spacers.px6},durationAndCarriersWrapper:{display:"flex",flexDirection:"column"},durationAndChanges:(0,pe.Z)((0,pe.Z)({},U.W.body),{},{fontWeight:U.R.body.weights.normal,alignSelf:"flex-end",paddingRight:"unset"}),carriersDetails:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-end"},timesAndLocationsWrapper:{paddingBottom:ke.spacers.px6,paddingTop:ke.spacers.px6},location:(0,pe.Z)((0,pe.Z)({},U.W.body),{},{fontWeight:U.R.body.weights.normal,paddingLeft:ke.spacers.px16}),time:(0,pe.Z)((0,pe.Z)({},U.W.body),{},{fontWeight:U.R.body.weights.semiBold}),vendorQuotaIdentifier:{marginLeft:ke.spacers.xs}});var Me=e=>{var{time:t,location:a}=e;return w.createElement("div",null,w.createElement(re.FormattedTime,{value:new Date((0,Ze.Qb)(t)),hour12:!1,timeZone:"UTC"},(e=>w.createElement("span",{className:(0,P.css)(Be.time),"data-test":"formatted-time"},e))),w.createElement("span",{className:(0,P.css)(Be.location),"data-test":"formatted-location-".concat(a.name)},a.name))},We=e=>{var{origin:t,destination:a,journey:{departAt:r,arriveAt:n,id:i},legs:s,onRequestOpenJourneySummaryModal:l}=e;return w.createElement("div",{className:(0,P.css)(Be.wrapper)},w.createElement("div",{className:(0,P.css)(Be.timesAndLocationsWrapper)},w.createElement(Me,{time:r,location:t}),w.createElement(Me,{time:n,location:a})),w.createElement("div",{className:(0,P.css)(Be.durationAndCarriersWrapper)},w.createElement(Pe.Hb,{styleSheet:Be.durationAndChanges,departAt:r,arriveAt:n,changes:s.length>0?s.length-1:0,journeyId:i,onRequestOpenJourneySummaryModal:l}),s.map(((e,t)=>{var{carrierLogo:a={},vendorQuotaIdentifier:r=""}=e;return w.createElement("div",{className:(0,P.css)(Be.carriersDetails),key:"carrier-details-".concat(t)},(a.name||a.mode)&&w.createElement(ne.pl,{name:a.name,mode:a.mode,testId:a.name||a.mode}),r&&w.createElement("span",{className:(0,P.css)(Be.vendorQuotaIdentifier),"data-test":"vendor-quota-identifier"},r))}))))};const He=e=>{var{journey:{sections:t},isEuropeCoachExperience:a,onComfortChange:r,isPaginating:n,comfortClassJourneyDetails:i,onRequestOpenJourneySummaryModal:s,selectedComfort:l,onSelectAlternative:o,isInwardView:c,selectedTab:d,setComfortFilterSelectedTab:m}=e,u=t.length>1,f=(0,O.Z)(t),{journey:p}=i,g=(0,N.YMb)(t),v=g&&(0,N.YMb)(g.legs),b=(0,N.Z$Q)(t),E=b&&(0,N.Z$Q)(b.legs),h=v&&v.origin,y=E&&E.destination;return p&&w.createElement(w.Fragment,null,h&&y&&w.createElement(w.Fragment,null,w.createElement(We,{origin:h,destination:y,journey:p,legs:i.legs,onRequestOpenJourneySummaryModal:s}),w.createElement(Q,{isLoading:n,onChange:r,comforts:i.legs[0].comforts,onSelectAlternative:o,isInwardView:c,journeyHash:p.hash,selectedTab:d,setComfortFilterSelectedTab:m})),t.map(((e,t)=>{var r=!e.mixedLegComforts&&e.legs.length>1&&u,n=u&&t<f.length,i=(0,N.YMb)(e.legs),s=(0,N.Z$Q)(e.legs),o=n&&(0,N.YMb)(f[t][1].legs),c=n&&(0,N.Z$Q)(f[t][0].legs);return w.createElement(w.Fragment,{key:e.id},r&&i&&s&&w.createElement(le,{origin:i.origin,destination:s.destination}),w.createElement(Re,{section:e,multipleSections:u,isEuropeCoachExperience:a,selectedComfort:l,journeyHash:p.hash}),c&&o&&w.createElement(te,{from:c,to:o}))})))};var je=a(89082),Ue=a(28935),ze=a(26146);const Je=P.StyleSheet.create({tabListWrapper:{display:"flex",justifyContent:"space-between",marginTop:j.Z.sizes.spacers.l,marginBottom:j.Z.sizes.spacers.xl,borderBottom:"1px solid ".concat(H.dp_comp_input_border)}});var Ve=(e,t)=>(0,w.useMemo)((()=>[Ue.h.NON_FLEXIBLE,Ue.h.SEMI_FLEXIBLE,Ue.h.FLEXIBLE].map((a=>()=>(e(a),void t())))),[e,t]);const Ge=(0,s.compose)(r.FZ,re.injectIntl,(0,n.connect)((e=>({isEnableSmartPriceBookingFlowUIMobileOnly:(0,v.CW)(e)}))))((e=>{var{flexibilityFilterSelectedTab:t,intl:a,isLoading:r,shouldHideFirstTab:n,semiFlexibleTabDeltaPrice:i,flexibleTabDeltaPrice:s,displayPriceDeltas:l,deviceType:o,journeyAlternatives:c,selectedAlternative:d,onSelectAlternativeFromAlternative:m,isInwardView:u,hasAllEurostarRows:f,hasJourneyOnlyOneFareAvailable:p,cheapestAlternative:g,cheapestSemiFlexAlternative:v,cheapestFlexibleAlternative:b,isEnableSmartPriceBookingFlowUIMobileOnly:E,setFlexibilityFilterSelectedTab:h,onChange:y}=e,[x,S,_]=Ve(h,y),C=(e,t)=>{var r="".concat(a.formatMessage({id:"smartPrice.title"})," - ").concat(a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.".concat(t,".title")}));return e?r:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.".concat(t,".title")})},T=(0,je.Z)(n);n&&t===Ue.h.NON_FLEXIBLE&&h(Ue.h.SEMI_FLEXIBLE),T&&!n&&h(Ue.h.NON_FLEXIBLE);var N,A="mobile"===o;if(f&&A&&d)return w.createElement(w.Fragment,null,c.map((e=>w.createElement(ze.Z,{key:e.fareTypeName,testId:e.fareTypeName,name:"flexibility-type",onClick:()=>m(e.travelClass,e.journeyHash,[e.alternativeHash],u),checked:!!d&&d.alternativeHash[0]===e.alternativeHash,label:e.fareTypeName,price:e.price}))));if(p&&A&&d){var F=c.find((e=>!!d&&d.alternativeHash[0]===e.alternativeHash));if(!F)return null;var I=E&&(!n&&(null==g?void 0:g.isSmartPrice)||(null==v?void 0:v.isSmartPrice)||(null==b?void 0:b.isSmartPrice)),L=F.fares.length>1,O=I?{label:w.createElement(re.FormattedMessage,{id:"smartPrice.title"}),testId:"smartPrice"}:L?(N=null==v?void 0:v.price,(null==b?void 0:b.price)?{label:w.createElement(re.FormattedMessage,{id:"page.europe.matrix.flexilbilityFilter.Flexible.title"}),testId:"flexible"}:N?{label:w.createElement(re.FormattedMessage,{id:"page.europe.matrix.flexilbilityFilter.SemiFlexible.title"}),testId:"semi-flexible"}:{label:w.createElement(re.FormattedMessage,{id:"page.europe.matrix.flexilbilityFilter.lowestprice.title"}),testId:"non-flexible"}):{label:F.fareTypeName,testId:F.fareTypeName};return w.createElement(ze.Z,(0,ae.Z)({onClick:()=>{},key:F.fareTypeName,name:"flexibility-type",checked:!0,price:!n&&(null==g?void 0:g.price)||(null==v?void 0:v.price)||(null==b?void 0:b.price),isSmartPrice:I},O))}var D=E&&(null==g?void 0:g.isSmartPrice),R=E&&(null==v?void 0:v.isSmartPrice),P=E&&(null==b?void 0:b.isSmartPrice),k=n||Boolean(null==g?void 0:g.price)||Boolean(null==v?void 0:v.price)||Boolean(null==b?void 0:b.price);return A?w.createElement(w.Fragment,null,n||w.createElement(ze.Z,{name:"flexibility-type",testId:"non-flexible",onClick:x,checked:t===Ue.h.NON_FLEXIBLE,label:C(!(!k||!D),"lowestprice"),price:null==g?void 0:g.price,isSmartPrice:D}),(null==v?void 0:v.price)&&w.createElement(ze.Z,{name:"flexibility-type",testId:"semi-flexible",onClick:S,checked:t===Ue.h.SEMI_FLEXIBLE,label:C(!(!k||!R),"SemiFlexible"),price:v.price,isSmartPrice:R}),(null==b?void 0:b.price)&&w.createElement(ze.Z,{name:"flexibility-type",testId:"flexible",onClick:_,checked:t===Ue.h.FLEXIBLE,label:C(!(!k||!P),"Flexible"),price:b.price,isSmartPrice:P})):w.createElement(Z.Z,{styleSheet:Je.tabListWrapper},n||w.createElement(J,{testId:Ue.h.NON_FLEXIBLE,isActive:t===Ue.h.NON_FLEXIBLE,isLoading:r,onClick:x,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.lowestprice.title"}),fullPrice:null==g?void 0:g.price}),!!i&&w.createElement(J,{testId:Ue.h.SEMI_FLEXIBLE,isActive:t===Ue.h.SEMI_FLEXIBLE,isLoading:r,onClick:S,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.SemiFlexible.title"}),fullPrice:l?n?null==g?void 0:g.price:void 0:null==v?void 0:v.price,deltaPrice:l?i:void 0}),!!s&&w.createElement(J,{testId:Ue.h.FLEXIBLE,isActive:t===Ue.h.FLEXIBLE,isLoading:r,onClick:_,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.Flexible.title"}),fullPrice:l||null==b?void 0:b.price,deltaPrice:l?s:void 0}))}));var Xe=a(10798),Qe=a(45682),Ye=a(51361),qe=a(20752),Ke=a(14023);const $e=e=>{var{className:t}=e;return w.createElement("svg",{viewBox:"0 0 24 24",width:"24px",height:"24px",className:t},w.createElement("g",{stroke:"none",fill:"currentColor"},w.createElement("path",{d:"M7.23862829,21.0055431 C7.32960772,21.1214847 7.43491996,21.229086 7.55429192,21.3257515 C8.41868834,22.025726 9.67349025,21.886791 10.3703376,21.0262562 L22.9505195,5.49102539 C23.6477563,4.63000955 23.516393,3.36937657 22.6579813,2.67424846 C21.7935849,1.97427405 20.538783,2.11320899 19.8419356,2.97374383 L8.79794144,16.6119408 L5.11259835,12.0609211 C4.41620509,11.2009471 3.15270914,11.0635127 2.29429742,11.7586408 C1.429901,12.4586152 1.3059216,13.7161298 2.0040145,14.5782027 L7.02784118,20.782112 C7.09335443,20.8630141 7.16388661,20.9375217 7.23862829,21.0055431 Z"})))};var et=a(59999),tt=a(65368),at=a(26625),rt=a(48977),nt=a(80110),it={description:{display:"block",[ge.ZP.small.min]:{color:H.dp_app_text_subtle}}};const st=P.StyleSheet.create((0,pe.Z)({},it));var lt=e=>{var{children:t,displaySubduedDescription:a,id:r}=e;return w.createElement(Ke.Z,{testId:"comfort-option-description",textType:"small",textColor:a?"subdued1":"normal",className:(0,P.css)(st.description),id:r},t)};const ot=(0,re.injectIntl)((e=>{var{fareLegsByComfort:t,originDestinationByTrain:a,reservationTypes:r,comfortOptionBaseDescription:n,intl:i,isMobile:s,hideStationNames:l,displaySubduedDescription:o,id:c}=e;if(!r.some((e=>e!==nt.U.NONE&&e!==nt.U.OVERBOOKED))||!a)return n?w.createElement(lt,{displaySubduedDescription:o,id:c},n):null;var d=Object.keys(t),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return r=>{if((0,N.xbD)(e)||(0,N.xbD)(t))return[];var n=e[r];if(!n)return[];var{availableOnTrainList:i}=n;return i?i.map((e=>{var r=t[e];return a?e:"".concat(r.origin," - ").concat(r.destination,": ").concat(e)})):[]}}(t,a,l);return w.createElement(lt,{displaySubduedDescription:o,id:c},d.map((e=>{var a=m(e);return w.createElement(w.Fragment,{key:"comfort-option-text-".concat(e)},s?w.createElement("span",{"data-test":"comfort-option-mobile-description"},t[e].description):w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.descriptionWithTrain",values:{trainList:(0,fe.Z)(a,i),description:t[e].description}}),w.createElement("br",null))})))}));var ct=a(17970),dt="urn:trainline:ilsa:comfort:ilsa.infinita_bistro";const mt=e=>{var{deltaPrice:t,name:a,originDestinationByTrain:r,fareLegsByComfort:n,comfortOptionBaseDescription:i,reservationTypes:s,isMobile:l,hideStationNamesInDescription:o,displaySubduedDescription:c,styleSheet:d,headerId:m,descriptionId:u,code:f}=e,p=t&&1===Math.sign(t.amount)?"+":"",g=!(null==t||!t.amount)&&w.createElement(B.Z,{currency:t.currencyCode,value:t.amount});return w.createElement("div",{className:(0,P.css)(be.label,d&&d.label)},w.createElement(Ke.Z,{className:(0,P.css)(be.name,d&&d.name),textWeight:"700",id:m},w.createElement("span",{"data-test":"comfort-option-name"},a),!(null==t||!t.amount)&&w.createElement(w.Fragment,null,w.createElement("span",{className:(0,P.css)(be.visuallyHidden)},"."),w.createElement("span",{"data-test":"comfort-option-price",className:(0,P.css)(be.price,d&&d.price),"aria-hidden":!0},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.price",values:{sign:p,price:g}})),w.createElement("span",{className:(0,P.css)(be.visuallyHidden)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.price.aria",values:{sign:p,price:g}}))),f===dt&&w.createElement("span",{className:(0,P.css)(be.newPromoLabel)},w.createElement(ct.r,{theme:"lightgreen"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.promoLabel.new"})))),f===dt&&w.createElement("span",{className:(0,P.css)(be.mealIncludedPromoLabel)},w.createElement(ct.r,{theme:"lightblue"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.promoLabel.mealIncluded"}))),w.createElement(ot,{id:u,isMobile:l,comfortOptionBaseDescription:i,reservationTypes:s,fareLegsByComfort:n,originDestinationByTrain:r,hideStationNames:o,displaySubduedDescription:c}))};var ut=e=>{var{comfortId:t,hash:a,mixedComfort:r,travelClass:n,sectionMap:i,onSelectAlternative:s,onSelectComfort:l,journey:o,isInwardView:c}=e;if(a&&r&&i&&o&&n){var d=Object.entries(i).map((e=>{var[t,r]=e;return r.selectedHash===a||r.otherHash.includes(a)?"":r.selectedHash})).map((e=>e||a));s({[c?"selectedInward":"selectedOutward"]:{travelClass:n,journeyHash:o.hash,journeyId:o.id,alternativeHash:d}})}else l({comfortId:t})},ft=(e,t,a,r,n)=>a&&r&&n?n.includes(r):e===t,pt=a(24518);const gt=P.StyleSheet.create({wrapper:{display:"flex",alignItems:"center",backgroundColor:H.dp_app_selected_background_base,padding:"".concat(xe.W0.s3," ").concat(xe.W0.s4),":hover":{cursor:"pointer"},gap:xe.W0.s4,borderRadius:xe.E0.l,[xe.cy.max.s]:{gap:xe.W0.s1,marginTop:xe.W0.s6}},icon:{flexGrow:0,flexShrink:0},iconWrapper:{width:"48px",height:"32px"},titleAndDescription:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"378px",":nth-child(1n) > span:first-of-type":{fontWeight:"bold",fontSize:xe.W0.s4,lineHeight:xe.W0.s6},[xe.cy.max.s]:{fontSize:xe.cp.small.fontSize,lineHeight:xe.cp.small.lineHeight,":nth-child(1n) > span:first-of-type":{fontWeight:"bold",fontSize:xe.cp.small.fontSize}}}});const vt=e=>{var{onClick:t,onKeyDown:a}=e;return w.createElement("div",{role:"button",tabIndex:0,className:(0,P.css)(gt.wrapper),onClick:t,onKeyDown:a,"data-test":"comfort-options-banner"},w.createElement("div",{className:(0,P.css)(gt.iconWrapper)},w.createElement(pt.default,null)),w.createElement("div",{className:(0,P.css)(gt.titleAndDescription),"data-test":"comfort-options-banner-title-desc"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptionsBanner.title"}),w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptionsBanner.description"})),w.createElement(Ye.default,{className:(0,P.css)(gt.icon)}))};var bt=a(19408),Et=a(94018),ht=a(75853),yt=a(24087),xt=a(33695),St=a(98988),_t=(e,t,a)=>{var i=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_CLASS_COMPARISON_MODAL_ON_DESKTOP,!0))),s=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_MOBILE_CLASS_COMPARISON_MODAL,!0))),{mobile:l}=(0,r.zw)(),{enableClassComparisonModalOnDesktop:o,enableMobileClassComparisonModal:c}=(0,ht.x)(),d=(0,n.useSelector)(Et.vR),m=(0,St.k)().length>1,u=["ES","IT"],f=u.includes(null==t?void 0:t.countryCode)&&u.includes(null==a?void 0:a.countryCode),p=(null==e?void 0:e.legs)&&1===e.legs.length,g=f&&d===yt.ZP.TRAIN&&p;return{showClassComparisonBannerOnDesktop:g&&o&&!l,showClassComparisonBannerOnMobile:g&&c&&l,isClassComparisonModalDesktopVariant:i,isClassComparisonModalMobileVariant:s,hasMoreThanOneComfortOption:m}},Ct=a(18332),Tt=["urn:trainline:trenitalia:comfort:trenitalia.business","urn:trainline:trenitalia:comfort:trenitalia.business_area_silenzio","urn:trainline:trenitalia:comfort:trenitalia.executive"];const Nt=e=>{var t,{comfortOptions:a,hasJourneyOneSingleLeg:r,selectedComfortOptionId:i,isTrenitaliaPreferentialTreatmentDisabled:s,originDestinationByTrain:l,deviceType:o,legs:c,shouldShowTitle:d,selectedAlternative:m,sectionMap:u,onSelectAlternative:f,onSelectComfort:p,journey:g,isInwardView:v,onClickViewServices:b}=e,{sendTracking:h}=(0,at.rS)(),{experimentsDict:y}=(0,Ct.zM)(["experimentsDict"]),x=1===a.length,[S={}]=a,{comfort:_={}}=S,C="mobile"===o,T=a.length>0,N=(0,n.useSelector)(E.VS),A=(0,n.useSelector)(E.NA),{showClassComparisonBannerOnMobile:F,hasMoreThanOneComfortOption:I,isClassComparisonModalMobileVariant:L}=_t(g,N,A),O=null===(t=(0,St.k)().filter((e=>e.comfortId===i))[0])||void 0===t?void 0:t.label,D="Standard"!==O&&"2nd class"!==O,Z=C?qe.Z:w.Fragment,k=C?{bordered:!0,styles:Se.frame}:{};if(F&&(0,rt.QH)(y,[xt.zA.ENABLE_MOBILE_CLASS_COMPARISON_MODAL]),C&&x&&T&&!a[0].comfort.allowsComfortChoice)return d?w.createElement(Ke.Z,{as:"h2",textType:"title2",testId:"comfortTitleId"},w.createElement(re.FormattedMessage,{id:"page.travelOptions.comfort.title"})):null;var B=x?_.allowsComfortChoice&&w.createElement("div",{"data-test":"single-comfort-options-title",className:(0,P.css)(Se.title)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.title"})):w.createElement("div",{"data-test":"multiple-comfort-options-title",className:(0,P.css)(Se.title)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.title"}));return w.createElement("div",null,C&&d&&w.createElement(w.Fragment,null,w.createElement(Ke.Z,{as:"h2",textType:"title2",testId:"comfortTitleId"},w.createElement(re.FormattedMessage,{id:"page.travelOptions.comfort.title"})),F&&I&&L&&w.createElement(vt,{onClick:()=>{null==b||b(D),h((0,at.k1)({category:"class comparison",action:"expanded",label:"",coreProperties:{}}))}})),T?w.createElement(Z,k,C?c.map((e=>w.createElement("div",{className:(0,P.css)(Se.legNameSection),key:e.id,"data-id":"comfort-route-section"},w.createElement("div",{className:(0,P.css)(Se.legName)},w.createElement(Ke.Z,{as:"div",textWeight:"700",testId:"comfort-route"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.route",values:{origin:e.origin.name,destination:e.destination.name}}))),w.createElement("div",{className:(0,P.css)(Se.legIcons)},w.createElement(ne.pl,(0,ae.Z)({},e.carrierLogo,{iconClassName:(0,P.css)(Se.legIcon),testId:e.carrierLogo.name||e.carrierLogo.mode})),w.createElement(Ke.Z,{textType:"micro",testId:"comfort-vendor-identifier"},e.vendorQuotaIdentifier))))):B,a.map((e=>{var{comfort:{id:t,name:a,description:n,code:o,allowsComfortChoice:c},reservationTypes:d,fareLegsByComfort:b,hash:E,deltaPrice:h,legIds:y,mixedComfort:S,travelClass:_}=e,T=r&&Tt.includes(o),N="".concat(et.kK,"/comfort-options/").concat((0,tt.Pb)(o));return w.createElement("div",{key:[...y,t,E].join("-"),"data-test":["comfort-option",...y,t].join("-")},x&&!C&&c&&w.createElement("div",{className:(0,P.css)(Se.single),"data-test":"single-comfort-option"},w.createElement($e,{className:(0,P.css)(Se.tick)}),w.createElement(mt,{reservationTypes:d,name:a,comfortOptionBaseDescription:n,fareLegsByComfort:b,originDestinationByTrain:l,code:o})),(!x||C)&&w.createElement("div",{className:(0,P.css)(Se.radioContainer)},w.createElement(ue.Z,{name:[...y,E].join("-"),styleSheet:C?_e:Ce,id:[...y,t,E].join("-"),value:a,checked:ft(i,t,S,E,m),onClick:()=>ut({comfortId:t,hash:E,mixedComfort:S,travelClass:_,sectionMap:u,onSelectAlternative:f,onSelectComfort:p,journey:g,isInwardView:v}),testId:"comfort-option-radio-input"},w.createElement(mt,{reservationTypes:d,isMobile:C,name:a,comfortOptionBaseDescription:n,deltaPrice:h,fareLegsByComfort:b,originDestinationByTrain:l,code:o})),!C&&T&&!s&&w.createElement("div",{className:(0,P.css)(Se.photoUpsellContainer)},w.createElement("img",{className:(0,P.css)(Se.photoUpsell),"data-test":"comfort-option-photo",src:"".concat(N,"@1x.jpg"),srcSet:"".concat(N,"@2x.jpg 2x, ").concat(N,"@3x.jpg 3x"),alt:a}))))})),F&&!I&&L&&w.createElement(re.FormattedMessage,{id:"classComparison.entryPoint.text"},(e=>w.createElement(Qe.Z,{text:e,icon:Ye.default,alignIcon:"trailing",buttonType:"inline",typeSize:"small",fontWeight:"semibold",className:(0,P.css)(Se.link),onClick:()=>{null==b||b(O===R.U9.STANDARD||"2nd class"===O),h((0,at.k1)({category:"class comparison",action:"expanded",label:"",coreProperties:{}}))},sidePadding:!1,"data-test":"view-mobile-single-comfort"})))):null)};var At=a(59838);const Ft=P.StyleSheet.create({container:{border:"1px solid ".concat(H.dp_app_border_base),borderRadius:xe.E0.l,padding:"0 ".concat(K.spacers.px25," ").concat(K.spacers.px20," ").concat(K.spacers.px25),margin:"".concat(K.spacers.px13," 0")}});var It=P.StyleSheet.create((0,pe.Z)((0,pe.Z)({},ye.j),{},{root:(0,pe.Z)((0,pe.Z)({},ye.j.root),{},{alignItems:"unset"})})),Lt=P.StyleSheet.create({fromTo:{fontFamily:U.R.body.face.fontFamily,fontSize:U.W.title5.fontSize,fontWeight:U.R.body.weights.bold}}),wt=P.StyleSheet.create({price:{fontWeight:U.R.body.weights.normal,fontSize:U.W.body.fontSize,color:H.dp_app_text_base,[ge.ZP.small.min]:{color:H.dp_app_text_base}}}),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t&&t.legs&&t.legs.length>1?(0,N.jj$)(e.map((e=>e.carrierLogo)).filter(At.v)):[]},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?{origin:e[0].origin,destination:e[e.length-1].destination}:{}},Rt=(e,t)=>{try{return(0,Xe.U)(e().comfortLegs,t[0].id)}catch(e){return""}},Zt=(e,t)=>{var a=(0,S.FD)(e),r=t.legs.map((e=>e.id)),n=t.comfortOptions||(0,L.Eb)(e,a),i=r.reduce(((e,a)=>{var r=t.legs.find((e=>e.id===a));if(!r||!r.timetableId)return e;var{vendorQuotaIdentifier:n,timetableId:i}=r;return e[n&&n.length>i.length?n:i]={origin:r.origin.name,destination:r.destination.name},e}),{}),s=(0,L.wJ)(e,a),l=s&&Object.entries(s).map((e=>{var[t,a]=e;return a.selectedHash}));return{originDestinationByTrain:i,comfortOptions:n.filter((e=>e.legIds.some((e=>r.includes(e))))),selectedComfortOptionId:Rt((()=>(0,L.Pn)(e,a)),t.legs),hasJourneyOneSingleLeg:(0,L.Qh)(e,a),isTrenitaliaPreferentialTreatmentDisabled:(0,v.ec)(e),sectionMap:s,selectedAlternative:l,journey:t.journey&&t.journey,isInwardView:(0,E.fE)(e,a)}},Pt=(e,t)=>{var{legs:a}=t;return{onSelectAlternative:t=>e((0,m.HE)(t,{ignoreCache:!0})),onSelectComfort:t=>{var{comfortId:r}=t;return e((0,m.TD)({comfortId:r,legs:a.map((e=>e.id))}))},onClickViewServices:t=>e((0,x.Ll)({type:c.e.CLASS_COMPARISON_MODAL,params:{secondClass:t}}))}};const kt=(0,s.compose)(i.EN,r.FZ,(0,n.connect)(Zt,Pt))(Nt);var Bt=(0,s.compose)(i.EN,r.FZ,(0,n.connect)(Zt,Pt))((e=>{var{originDestinationByTrain:t,comfortOptions:a,sectionMap:r,onSelectAlternative:n,onSelectComfort:i,journey:s,isInwardView:l,selectedComfortOptionId:o,selectedAlternative:c,legs:d,showFullStationNames:m,showClassComparisonBanner:u=!1,onClickViewServices:f,travelClassType:p=R.U9.STANDARD}=e,g=1===a.length,v=Boolean(g&&!a[0].comfort.allowsComfortChoice),{origin:b,destination:E}=Dt(d),{sendTracking:h}=(0,at.rS)();return a.length&&!v?w.createElement("div",{className:(0,P.css)(Ft.container)},b&&E&&w.createElement(le,{origin:b,destination:E,routeDetails:{carrierLogos:Ot(d,s)},styleSheet:Lt,showFullStationNames:m}),a.map((e=>{var{comfort:{id:a,name:d,description:m,allowsComfortChoice:v,code:b},reservationTypes:E,fareLegsByComfort:y,hash:x,deltaPrice:S,legIds:_,mixedComfort:C,travelClass:T}=e,N=[..._,a,x].join("-"),A="".concat(N,"-heading"),F="".concat(N,"-description"),I=w.createElement(mt,{reservationTypes:E,name:d,comfortOptionBaseDescription:m,fareLegsByComfort:y,originDestinationByTrain:t,deltaPrice:g?void 0:S,styleSheet:wt,hideStationNamesInDescription:!0,displaySubduedDescription:!0,headerId:A,descriptionId:F,code:b});return w.createElement("div",{key:N,"data-test":"comfort-option-".concat(N)},g&&v&&w.createElement("div",{className:(0,P.css)(Se.single),"data-test":"simple-single-comfort-option"},I,u&&w.createElement(re.FormattedMessage,{id:"classComparison.entryPoint.text"},(e=>w.createElement(Qe.Z,{text:e,icon:Ye.default,alignIcon:"trailing",buttonType:"inline",typeSize:"small",fontWeight:"semibold",className:(0,P.css)(Se.link),onClick:()=>{null==f||f(T===R.U9.STANDARD||p===R.U9.STANDARD||"2nd class"===p),h((0,at.k1)({category:"class comparison",action:"expanded",label:"",coreProperties:{}}))},sidePadding:!1,"data-test":"view-single-comfort"})))),!g&&w.createElement("form",{className:(0,P.css)(Se.radioContainer),"data-test":"simple-radio-comfort-option"},w.createElement(ue.Z,{name:"comfort-option",styleSheet:It,id:N,value:d,ariaLabelledBy:A,ariaDescribedBy:F,checked:ft(o,a,C,x,c),onChange:()=>ut({comfortId:a,hash:x,mixedComfort:C,travelClass:T,sectionMap:r,onSelectAlternative:n,onSelectComfort:i,journey:s,isInwardView:l}),testId:"simple-comfort-option-radio-input"},I)))}))):null}));const Mt=P.StyleSheet.create({title:(0,pe.Z)({marginTop:j.Z.sizes.spacers.m,marginBottom:j.Z.sizes.spacers.s},U.W.title4),name:{color:H.dp_app_text_base},price:{color:H.dp_app_text_subtle,marginLeft:j.Z.sizes.spacers.s},tick:{color:H.dp_brand_primary_mid,margin:"0 4px 0 0",padding:"0px 4px 4px 4px",width:"13px",height:"13px",verticalAlign:"middle"}});const Wt=e=>{var{extras:t,legId:a}=e;return t.length>0?w.createElement("div",null,w.createElement("div",{"data-test":"extras-title",className:(0,P.css)(Mt.title)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.extras.title"})),t.map((e=>{var{extraType:t,id:r}=e;return w.createElement("div",{key:"".concat(a,"-").concat(r),"data-test":"extra-option-".concat(a,"-").concat(r)},w.createElement($e,{className:(0,P.css)(Mt.tick)}),w.createElement("span",{className:(0,P.css)(Mt.name)},w.createElement("span",{"data-test":"extra-option-name"},t.name),w.createElement("span",{className:(0,P.css)(Mt.price)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.extras.free"}))))}))):null};var Ht=a(20471),jt=a(89426);class Ut extends w.Component{constructor(e){super(e),(0,de.Z)(this,"ownRef",void 0),(0,de.Z)(this,"checkClamp",((e,t)=>{for(var{charLimit:a,charTarget:r,onTruncate:n}=this.props,i=Boolean(t.textContent&&t.textContent.length>a),s=t.textContent+" ",l=e.clientHeight,o=r||a;i&&t.textContent.length>o;){var c=this.getTruncatedText(t.textContent);if(!c)break;t.textContent=c}t.textContent+=" ",this.setState({isTruncated:i,truncated:{text:t.textContent,height:e.clientHeight},expanded:{text:s,height:l}}),i&&n&&n()})),(0,de.Z)(this,"getTruncatedText",(e=>{var t=/\W*\s\S*$/;return t.test(e)?e.replace(t,"..."):void 0})),(0,de.Z)(this,"toggleExpanded",(()=>{var{isExpanded:e,truncated:t,expanded:a}=this.state,r=e?t:a;this.ownRef.current.querySelector("span").textContent=r.text,this.setState({isExpanded:!e})})),(0,de.Z)(this,"getStyle",(()=>{var{isTruncated:e,isExpanded:t,truncated:a,expanded:r}=this.state,n=t?r:a,i={transition:"height 0.2s ease-in-out",overflow:"hidden"};return e&&n.height&&(i.height=n.height),i})),this.ownRef=w.createRef(),this.state={isTruncated:!0,isExpanded:!1,truncated:{text:"",height:0},expanded:{text:"",height:0}}}componentDidMount(){var e=this.ownRef.current,t=e.querySelector("span");(0,Ht.flushToStyleTag)(),this.checkClamp(e,t)}render(){var{children:e,expandable:t,linkStyle:a}=this.props,{isTruncated:r,isExpanded:n}=this.state;return w.createElement("div",{style:this.getStyle(),ref:this.ownRef},w.createElement("span",null,e),t&&r&&w.createElement(jt.Qj,{styleSheet:a,onClick:this.toggleExpanded,testId:"expansion-toggle"},w.createElement(re.FormattedMessage,{id:n?"components.charClamp.showLess":"components.charClamp.showMore"})))}}const zt=Ut;var Jt=a(96885),{sizes:Vt}=j.Z;H.dp_brand_neutral_dullest;const Gt=P.StyleSheet.create({fareRoot:{marginTop:Vt.spacers.m},header:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontWeight:"bold",marginBottom:Vt.spacers.xs},conditions:{color:H.dp_app_text_subtle,fontSize:"14px",lineHeight:"1.35187rem"},truncateFareLink:{fontSize:"13px"}});const Xt=e=>{var{fareType:t,truncatedFareConditions:a}=e;return t?w.createElement("div",{"data-test":"european-ticket-summary",className:(0,P.css)(Gt.fareRoot)},w.createElement("div",{className:(0,P.css)(Gt.header)},w.createElement("div",null,t.name)),w.createElement("div",{className:(0,P.css)(Gt.conditions),"data-test":"european-ticket-summary-description"},t.conditions&&t.conditions.map((e=>w.createElement("div",{key:e.title},a?w.createElement(zt,{charLimit:250,charTarget:150,expandable:!0,linkStyle:Gt.truncateFareLink},(0,Jt.j)(e.description)):(0,Jt.j)(e.description)))))):null};var Qt=a(31807),Yt=a(32443),qt=a(31942),Kt=P.StyleSheet.create({root:{fontSize:12,color:H.dp_app_text_base,display:"flex",justifyContent:"flex-start",flex:"1 0 auto",":not(:first-child)":{paddingTop:K.spacers.s}},time:{fontFamily:U.R.brand.face.fontFamily,fontWeight:U.R.brand.weights.bold},location:{paddingLeft:16,paddingRight:16},address:{fontStyle:"normal",whiteSpace:"normal",display:"inline",color:H.dp_app_text_subtle},mapLink:{marginLeft:"1em",color:H.dp_app_info_mid}});const $t=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(Kt.root)},e)),ea=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(Kt.time)},e)),ta=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(Kt.location)},e)),aa=e=>w.createElement("address",(0,ae.Z)({className:(0,P.css)(Kt.address)},e)),ra=e=>w.createElement("a",(0,ae.Z)({className:(0,P.css)(Kt.mapLink)},e));const na=e=>{var{time:t,location:a,"data-test":r}=e,n=(0,L.Kn)(a);return w.createElement($t,{"data-test":r},w.createElement(ea,null,w.createElement(re.FormattedTime,{value:new Date((0,Ze.Qb)(t)),hour12:!1,timeZone:"UTC"})),w.createElement(ta,null,w.createElement("div",null,a.name),n&&w.createElement("div",null,w.createElement(aa,null,n),w.createElement(ra,{href:$r(n),target:"_blank"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.map"})))))};var ia=P.StyleSheet.create({row:{display:"flex",flexDirection:"row"},column:{display:"flex",flexDirection:"column",justifyContent:"center"},timeLocationCell:{display:"flex",flexDirection:"column",flex:1},durationCell:{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"0 1 auto",whiteSpace:"nowrap",fontSize:12},logoCell:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"0 1 auto",marginRight:".5em"},boardingTime:{marginBottom:K.spacers.s},trainInformations:{fontSize:10,color:H.dp_app_text_subtle},co2EmissionCell:{color:H.dp_app_text_subtle,display:"flex",alignItems:"center",fontSize:12}});const sa=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(ia.row)},e)),la=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(ia.column)},e)),oa=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(ia.timeLocationCell)},e)),ca=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(ia.logoCell)},e)),da=e=>w.createElement("div",(0,ae.Z)({className:(0,P.css)(ia.durationCell)},e));const ma=e=>{var{leg:t,bordered:a,shouldDisplayLogo:r,children:n,totalPassengersCount:i}=e;return w.createElement(qe.Z,{bordered:a},t.boardBeforeGuaranteed&&t.boardBeforeGuaranteed>0&&w.createElement(Qt.Z,{boardBeforeGuaranteed:t.boardBeforeGuaranteed,className:(0,P.css)(ia.boardingTime)}),w.createElement(sa,null,w.createElement(oa,null,w.createElement(na,{time:t.departAt,location:t.origin,"data-test":"from-".concat(t.hash)}),w.createElement(na,{time:t.arriveAt,location:t.destination,"data-test":"to-".concat(t.hash)})),r&&w.createElement(ca,null,w.createElement(ne.pl,(0,ae.Z)({},t.carrierLogo,{testId:t.carrierLogo.name||t.carrierLogo.mode})),t.timetableId&&w.createElement(ie,{trainNumber:t.timetableId,vendorQuotaIdentifier:t.vendorQuotaIdentifier,className:(0,P.css)(ia.trainInformations)})),w.createElement(la,null,w.createElement(da,null,w.createElement(Yt.Z,{start:t.departAt,end:t.arriveAt})),t.co2EmissionInGramsPerPassenger&&w.createElement(qt.Z,{emissionsInGrams:t.co2EmissionInGramsPerPassenger,totalPassengersCount:i}))),n)};var ua=a(61130);const fa=e=>{var{multipleSections:t,section:{legs:a,mixedLegComforts:r},isEuropeCoachExperience:n,totalPassengersCount:i,journey:s}=e,l=!t&&1===a.length,o=!r&&a.length>1,c=o&&t,d=a.map((e=>e.fareTypes)),m=(0,ua.TO)(d),u=(0,ua.AX)(d)&&(o||!t),f=l||o,p=l&&!c;if(u&&!a[0])throw new Error("No fare to display");var g=(0,O.Z)(a);return w.createElement(qe.Z,{bordered:c},a.map(((e,t)=>{var r=a.length>1&&t<g.length;return w.createElement(w.Fragment,{key:e.id},!c&&w.createElement(le,{origin:e.origin,destination:e.destination,routeDetails:{vendorQuotaIdentifier:e.vendorQuotaIdentifier,timetableId:e.timetableId,carrierLogos:[e.carrierLogo]}}),w.createElement(ma,{leg:e,bordered:!c,shouldDisplayLogo:c,totalPassengersCount:i},!u&&e.fareTypes.map((t=>w.createElement(Xt,{key:"".concat(e.id,"—").concat(t.id),fareType:t}))),!f&&!n&&w.createElement(kt,{legs:[e]}),!p&&w.createElement(Wt,{extras:e.extras,legId:e.id})),r&&w.createElement(te,{from:g[t][0],to:g[t][1]}))})),u&&m.map((e=>w.createElement(Xt,{key:e.id,fareType:e}))),f&&!n&&w.createElement(kt,{legs:a,journey:s}),p&&w.createElement(Wt,{extras:a[0].extras,legId:a[0].id}))};var pa=a(60054),ga=["urn:trainline:db:fare:0e48f9bfc928e6cccf840c8d5a7efa06","urn:trainline:db:fare:1d7e20d5e587ecfbcf3a84820fd2bf74","urn:trainline:db:fare:281f81e8d3de8ff57207a987dd5d8ed0","urn:trainline:db:fare:548770177613073b799f6727f6a98ab8","urn:trainline:db:fare:60cabaa692fd5aad23d97522912d88b0","urn:trainline:db:fare:822fa66e36545ae1c4dc356b8c5a6897","urn:trainline:db:fare:95edb90bea1b02abc8a61b2bf6c2c038","urn:trainline:db:fare:abe1387d8dfa1e1df3611c0bb454b339","urn:trainline:db:fare:d13a2e86ef2da3fd4e93cb98fd7cdd6a","urn:trainline:db:fare:dc3f2b61611c39e55da95265cc752844","urn:trainline:sncf:fare:017d2f833951ce1f12b0d8c29154126c","urn:trainline:sncf:fare:02106775985f1eaa71eb577e82e32916","urn:trainline:sncf:fare:0562a9e5dcd510296481a3007c90ae51","urn:trainline:sncf:fare:09b592464a3e0b13a187696ce2966a4e","urn:trainline:sncf:fare:0a9f3c7c2ad894661697fa217c655099","urn:trainline:sncf:fare:0c83afc9b737f4143199556a427133e6","urn:trainline:sncf:fare:0e48f9bfc928e6cccf840c8d5a7efa06","urn:trainline:sncf:fare:1046cbe6635600502d75349f1a70643a","urn:trainline:sncf:fare:12acb147526e0cec0e51498a0609d742","urn:trainline:sncf:fare:1333df3f795fd63db65ac8f7d67d48a5","urn:trainline:sncf:fare:145d78aa11d5709184f3b7f275f082fd","urn:trainline:sncf:fare:150c1eb8769c3d60b08f402a026a8b43","urn:trainline:sncf:fare:1637a3921a236fdbfb9934978940bd96","urn:trainline:sncf:fare:17d8e82e8be3d5f975294a8ba8fb3b56","urn:trainline:sncf:fare:1837e1911403b889740ab8454d28a06f","urn:trainline:sncf:fare:1d72b9e3c490ee94887f2e6ab8410789","urn:trainline:sncf:fare:1d7e20d5e587ecfbcf3a84820fd2bf74","urn:trainline:sncf:fare:205160f8ce33cdf3b7c25b2f1621c255","urn:trainline:sncf:fare:2284c0022913caa32d2e78fb7ae45e0b","urn:trainline:sncf:fare:22b88881ef4c9f504f005d2ada6d9748","urn:trainline:sncf:fare:25ae9bd4e676308f93cd03846d9271b5","urn:trainline:sncf:fare:26fe904775f33b5bd8563a7ee06aa0a7","urn:trainline:sncf:fare:281f81e8d3de8ff57207a987dd5d8ed0","urn:trainline:sncf:fare:2943acd255577d045ef122d6de314715","urn:trainline:sncf:fare:35d0642e4f540ac198ac74808be1212c","urn:trainline:sncf:fare:38cfea44c268b333d537d255ad48cfb7","urn:trainline:sncf:fare:3a5a0da21c84183fa8de20835e06c484","urn:trainline:sncf:fare:3f8b4be25c22abd5641e51b56646fbd0","urn:trainline:sncf:fare:403b9ee3602c3aeaeaedca5c8ce06ddf","urn:trainline:sncf:fare:419e9c8effad839437e3c01e9a66c1fe","urn:trainline:sncf:fare:41c7b558eb80c09004b5aab32ba1700c","urn:trainline:sncf:fare:4227e8da5cc7ad71a39897152d4d492a","urn:trainline:sncf:fare:466f46b3dd5cfdd47a77605d35e6da36","urn:trainline:sncf:fare:491275eef90d5e1c937228987dc0ad57","urn:trainline:sncf:fare:4a3fdc21e7fa2263070acf41a5e9927c","urn:trainline:sncf:fare:4c9bb73d586113a9ac49084611d930d8","urn:trainline:sncf:fare:4dcc8b82ae5c69fb289cd7c089cdbc3a","urn:trainline:sncf:fare:4e2d0d7df61572fb426d82ba0863bdfd","urn:trainline:sncf:fare:4e7381557a77d4e55afcc8cf855dcb99","urn:trainline:sncf:fare:5299db7d1bdc89dbcb4ac8eb9b80fc0c","urn:trainline:sncf:fare:52c5b798d779a0193e6e33c38cd6fb93","urn:trainline:sncf:fare:548770177613073b799f6727f6a98ab8","urn:trainline:sncf:fare:565eee38f71b9070e08a3549340867b7","urn:trainline:sncf:fare:566d316fd9f1cc0f8a9ed34e2c011d07","urn:trainline:sncf:fare:58862d71432a3690b8dceafcf78fbaa1","urn:trainline:sncf:fare:5d24b2cb3f1610360542f98ea78616f1","urn:trainline:sncf:fare:5db1731d7ecbd9dcf187bce05b789121","urn:trainline:sncf:fare:5fb32e4d6b27b49b1f523615ffc8a6ee","urn:trainline:sncf:fare:60cabaa692fd5aad23d97522912d88b0","urn:trainline:sncf:fare:616788d342681b6bfcc3067207261efa","urn:trainline:sncf:fare:66c26858816e5155f59a89793cb15eb4","urn:trainline:sncf:fare:6a194b8ee880a3c05f820ed161d3b019","urn:trainline:sncf:fare:6a1b7b6a4b745d43a28ba0c87a26e882","urn:trainline:sncf:fare:6d0ac3d576f469162b12f67137ded65b","urn:trainline:sncf:fare:6e4f584fb99e9fb0bc4e8897786f90a0","urn:trainline:sncf:fare:718b957c1acff8487f18c549892a70c1","urn:trainline:sncf:fare:720677ad073c7f26187dde8bb4a22163","urn:trainline:sncf:fare:722dba5ce5609aa75f7d8faff47e28fa","urn:trainline:sncf:fare:79fa7da9f802e274e5adc0c95dca0d46","urn:trainline:sncf:fare:7a064ff580cc042768d8307d3ffdd7c1","urn:trainline:sncf:fare:7adc2ff2d8bcbe2839f81ebfbce9752a","urn:trainline:sncf:fare:7b6675ef6791e5bb4cc71301d6fa3d7d","urn:trainline:sncf:fare:8057a926581b70e9e38971c152ecce47","urn:trainline:sncf:fare:810262b471a6c87252c22c3cc20aeb9d","urn:trainline:sncf:fare:822fa66e36545ae1c4dc356b8c5a6897","urn:trainline:sncf:fare:83ea19071c82b43d1ba6d5b834d68556","urn:trainline:sncf:fare:84d1600510ab6cabf2ffb400a7882cb2","urn:trainline:sncf:fare:85c78848641afe252c99c132aa61c75d","urn:trainline:sncf:fare:8680a7816a3c3f01e063a378484add1c","urn:trainline:sncf:fare:8840a1ecad8a5fabdaa4b37a7ae75f0f","urn:trainline:sncf:fare:8b58565efcb5ae80b81285eef075f90a","urn:trainline:sncf:fare:8f5555928dd8021de2051f514a785675","urn:trainline:sncf:fare:92050df2b0810a41f3ca3c2b4114a90b","urn:trainline:sncf:fare:92e49d313858a72b38f7be78dd28711f","urn:trainline:sncf:fare:95edb90bea1b02abc8a61b2bf6c2c038","urn:trainline:sncf:fare:9c3780a8e9909b9ea66c489587ed39eb","urn:trainline:sncf:fare:9d93b4e7555ef07b856f316240596dd8","urn:trainline:sncf:fare:9e22b018d9014c17594e8bf13fe5f161","urn:trainline:sncf:fare:a021ef90cf08f8d5117eae940994ccc2","urn:trainline:sncf:fare:a3981731e7964cb953ca32f5063c601d","urn:trainline:sncf:fare:a4066eb83344ea689f0eb6366dabc165","urn:trainline:sncf:fare:a4c0767ed53e253bdd3ecfb3a8ca1446","urn:trainline:sncf:fare:a528888fccb340f500b8b15057e07f82","urn:trainline:sncf:fare:a6a0ed2f55a13bc471f694108846e2fc","urn:trainline:sncf:fare:a91327652fc5575dd6f08190733bf370","urn:trainline:sncf:fare:a92131db749e88028d08ea8040960b39","urn:trainline:sncf:fare:ab32c1e90fdc138397a9a4e21623f6d2","urn:trainline:sncf:fare:abe1387d8dfa1e1df3611c0bb454b339","urn:trainline:sncf:fare:acf239debb33824e97ff882cf19b8841","urn:trainline:sncf:fare:aea6d2c78fc97c4cd6ce135f76e82616","urn:trainline:sncf:fare:aed2adde478262984bec9f3331013401","urn:trainline:sncf:fare:b3d4d720684eef91fdb5e9bc9f74fedf","urn:trainline:sncf:fare:b405b57b1b4f72ec377cf903d5afc40f","urn:trainline:sncf:fare:b51d9d58e4d5aab5e8c60036b374aa33","urn:trainline:sncf:fare:b54cbfb869d2fc2e7121056fad2fbfc1","urn:trainline:sncf:fare:b63872f66dd22d1c5e0bdd19a6db5190","urn:trainline:sncf:fare:bbae695006bd13abd9429d4eeaddb850","urn:trainline:sncf:fare:bbd93d0eec8b012c89bdf445c688bdeb","urn:trainline:sncf:fare:bc4853782741c53154f9a6e9d722606c","urn:trainline:sncf:fare:bf948984ab73460b07b41f238e09161c","urn:trainline:sncf:fare:c22253ad79c00d9c2f8aa580111ae9de","urn:trainline:sncf:fare:c3efabea10c21430b3f1ea498cd5fdbe","urn:trainline:sncf:fare:c582917f50b85019e521b1b549547177","urn:trainline:sncf:fare:c696b901d2696882fbba6c7d974e4857","urn:trainline:sncf:fare:ceda3618f752555004012769997ef198","urn:trainline:sncf:fare:d0ce81209663ba80f913452f97f0fa14","urn:trainline:sncf:fare:d13a2e86ef2da3fd4e93cb98fd7cdd6a","urn:trainline:sncf:fare:d855a1ac77a70046d6774becce50fc97","urn:trainline:sncf:fare:dc3f2b61611c39e55da95265cc752844","urn:trainline:sncf:fare:dcfaf6d40e63ddfe003181b906ede300","urn:trainline:sncf:fare:df8e1c15ab080d6963f7f4a8e8249f89","urn:trainline:sncf:fare:e0761b4f02b6925ea9a89906476bd3b1","urn:trainline:sncf:fare:e0bd319e08c6d5dfb453de3a504b1265","urn:trainline:sncf:fare:e102fa63a33b83bfe2266edf6646c0ea","urn:trainline:sncf:fare:e1446a5e179e91b09e2eec204ecc5c08","urn:trainline:sncf:fare:e5cb92b4e2a14be082e7318eeb4b017b","urn:trainline:sncf:fare:e6596f83c3c31a0fb116b262413afa22","urn:trainline:sncf:fare:e666b826b7919406f9c89ef6a417816e","urn:trainline:sncf:fare:e6c7eed3cc63b543bed0a638331700d6","urn:trainline:sncf:fare:e6f46749a243e545082f7f66d3fc3853","urn:trainline:sncf:fare:ea1161b3059d877f00240a42d49b4d0f","urn:trainline:sncf:fare:ed45407fd2bb640367d5f801e45b8307","urn:trainline:sncf:fare:efbd25464562c828a22919d7a149f398","urn:trainline:sncf:fare:f3b5a6effe163fa24cf91756635e17ad","urn:trainline:sncf:fare:f51e7ec67fe057b4a6128000f0e38bdf","urn:trainline:sncf:fare:f61a8a65d3f1eaf95d0893b55222351b","urn:trainline:sncf:fare:fc4a601f57d1c4726ecd5d9fccd4b6fa","urn:trainline:sncf:fare:06a2869a1f662df4117af0259977f1b3","urn:trainline:sncf:fare:9a91ee4b6302f287c05aae34a2b99e7d","urn:trainline:sncf:fare:f93755d12b7b73a0a0d397c6c35ecb66","urn:trainline:sncf:fare:581cc1e56be65dd3db716d9614dc40d0","urn:trainline:sncf:fare:17d1eb19240e3e952574cdfc5fa7cd76","urn:trainline:sncf:fare:a1e3f45ddf1b1ec217efa6dcb38f3baa","urn:trainline:sncf:fare:8a023eb1c7683115f7e5dd2e189b3963","urn:trainline:sncf:fare:a58f607dadab7a7fc309a1714576cd27","urn:trainline:sncf:fare:9f0d4933cfe8d8a62fe1a271f47d3da3","urn:trainline:sncf:fare:25e9812e82617612da8a9b8500d87c27","urn:trainline:sncf:fare:93c9ab8c03ca8d6a41dc3c33851e922e","urn:trainline:sncf:fare:17020116f86882bdb36148b6fea9063b","urn:trainline:sncf:fare:a2f1fdc9159b0cfc75311c6a4b3825c2","urn:trainline:sncf:fare:0acc09bc6dde304f21b53891ed14935a","urn:trainline:sncf:fare:3529244f399469cb8e46390639c49379","urn:trainline:sncf:fare:7d7cee8cc215c49b5d8590bce41c1da0","urn:trainline:sncf:fare:b03fe8041786880d661e90198ce0716f","urn:trainline:sncf:fare:46c939e884c19774f9ddea1cbefec715","urn:trainline:sncf:fare:63410f493933c667bd366a5658a46f05","urn:trainline:sncf:fare:1e6609b56e0c27d0ffd33c0fa60a40c7","urn:trainline:sncf:fare:228068b88ec706bd573bb9148462b04e","urn:trainline:sncf:fare:0d6c45fb3a296b24f466f77666d97cb1","urn:trainline:sncf:fare:efe4db29df4e7f00a7e259e68ce64c88","urn:trainline:sncf:fare:612ef5a89fbb277f2a346d92134e6458","urn:trainline:sncf:fare:b767ae3d07fec570d3e8806970fb00b7","urn:trainline:sncf:fare:c9286d994c9f272488ed8772c191c669","urn:trainline:sncf:fare:a02760102f24d9345f590974e634cb00","urn:trainline:sncf:fare:2c83d1b924580e7cd014ed942d58f8c3","urn:trainline:sncf:fare:3dbf06e0826d78bbe616fa810b67892f","urn:trainline:sncf:fare:58b442c7800aadaf4f485599a65b6675","urn:trainline:sncf:fare:5eaad5ed909e8ebc71dd77a298cf0c48","urn:trainline:sncf:fare:fb12449058f95564ea6311b8184ed4b9","urn:trainline:sncf:fare:19dc881e576562ec0193aa381e0760ef","urn:trainline:sncf:fare:1c33e641c0ff053336b59b59c70655ea","urn:trainline:sncf:fare:00edafd4519686bc6565eab2a30b2304","urn:trainline:sncf:fare:cf9f9d7d16d6d907b679ec8562cd96b0","urn:trainline:sncf:fare:07944d4a8babfeebf5998ef4a231b09a","urn:trainline:sncf:fare:8e28d1795818531690e66f2c99283737","urn:trainline:sncf:fare:68ebb192ba131ad4a50f78db3f6f5ec6","urn:trainline:sncf:fare:87621a23b6831b09bae3952586ed67f8","urn:trainline:sncf:fare:4eb5015e8895ab147e262046f0860aee","urn:trainline:sncf:fare:775d2da38ba8917791d848c05834eca3","urn:trainline:sncf:fare:32630557ba51a8a816f2ccf6c7b820de","urn:trainline:sncf:fare:04126e0e2a7898c4ff37a315df5132c9","urn:trainline:sncf:fare:4eba17aa0bd2e463ae7b4c0352a745a2","urn:trainline:sncf:fare:5bbf409d9dec44b3c8ec7edd324695f1","urn:trainline:sncf:fare:0d79abbc1cccc0a25e214975959e7851","urn:trainline:sncf:fare:48e88ea26f0d80a0253213ffc9996367","urn:trainline:sncf:fare:f74fe207c325044929092cd0c882793e","urn:trainline:sncf:fare:57cee1d6e60cc3830ef01a2613de9915","urn:trainline:sncf:fare:03c4920e04ea256fbe18e2606e34679b","urn:trainline:sncf:fare:33fd9016affe215f4c26e59c83f361ea","urn:trainline:sncf:fare:dd6492bbdfe0506f6e1deb0d82037b1c","urn:trainline:sncf:fare:59f0a91d65ecdec56cd5fecac99c9906","urn:trainline:sncf:fare:c5063a6e006f49d4b6cd3849ca4c111e","urn:trainline:sncf:fare:f9632399e9d2608c2bcddea172ef0369"],va=["urn:trainline:sncf:fare:0302ca88073ebbfcb89d05af6a593123","urn:trainline:sncf:fare:56139e440604be54840f8ee03ceaefc7","urn:trainline:sncf:fare:da57b1129647444edc8567297115634b","urn:trainline:sncf:fare:b443c24bdc33d88598122ec44cdadb96","urn:trainline:sncf:fare:75154f957715dce3819ea57fb44ff9f5","urn:trainline:sncf:fare:df4f118118d6c7e48d06b41e376da935","urn:trainline:sncf:fare:8b39e223c0142ac767f546a94116d0fc","urn:trainline:sncf:fare:ad94ad62b592cee7c01b89493a0d2f22","urn:trainline:sncf:fare:c860e485ed511dd8738b6c707b4af09b","urn:trainline:sncf:fare:ef92f432ef5ac75dd621109b155d2826","urn:trainline:sncf:fare:06a43c68b9ab6e384c092a30e7c77f95","urn:trainline:sncf:fare:1bbc3a08c537aaf72b543df3ab9fce7c","urn:trainline:sncf:fare:34f751c0496665a7791e565f8436cd6d","urn:trainline:sncf:fare:e182f7e04f64f0f4a4ac475a42b2ea9d","urn:trainline:sncf:fare:eea287000be84d05fe13163e74ea80ee","urn:trainline:sncf:fare:05dec0421d4a2745b25c3830ef85b67c","urn:trainline:sncf:fare:1fcc74d6918d013a0c8195c72260d220","urn:trainline:sncf:fare:ea1e97d2244f0b22d607eef29c8e4f0b","urn:trainline:sncf:fare:c0e81f7ce739f28e6a8de8a2907a7702","urn:trainline:sncf:fare:da778f6d96f737ad316b934f9308e57e","urn:trainline:sncf:fare:7ea5fc2aa16ab4d76e22955566c5d4e7","urn:trainline:sncf:fare:d2ad55ad1cd3476fd759ee1960b84aec","urn:trainline:sncf:fare:f14aacaefc9a9d417fa0333be5693165","urn:trainline:sncf:fare:217b2836e4c40c9772f21fc95fa3bbf9","urn:trainline:sncf:fare:8a2283e4a3ca05ccfbb4512491b1e9a2","urn:trainline:sncf:fare:c0d7f8bf99796823d84dfa4a3825f225","urn:trainline:sncf:fare:8ad8cce602fe98c9e8b723fc4cd3aa74"],ba=(0,A.P1)(pa.s9,L.rF,((e,t)=>{var a,r,n,i;return t.length?t.every((e=>{var{legs:t}=e;return t.every((e=>{var{fareTypes:t}=e;return null==t?void 0:t.every((e=>{var{code:t}=e;return va.includes(t)}))}))})):!!(null!=e&&null!==(a=e.inwardJourney)&&void 0!==a&&a.legs||null!=e&&null!==(r=e.outwardJourney)&&void 0!==r&&r.legs)&&[(null==e||null===(n=e.inwardJourney)||void 0===n?void 0:n.legs)||{},(null==e||null===(i=e.outwardJourney)||void 0===i?void 0:i.legs)||{}].every((e=>Object.values(e).every((e=>{var{fareTypes:t}=e;return null==t?void 0:t.every((e=>{var{code:t}=e;return va.includes(t)}))}))))})),Ea=(0,A.P1)(pa.s9,L.rF,((e,t)=>{var a,r,n,i;return t.length?t.every((e=>{var{legs:t}=e;return t.every((e=>{var{vendorQuotaIdentifier:t,destination:a,origin:r,carrierName:n,fareTypes:i}=e;return(null==t?void 0:t.toLocaleLowerCase().includes("ter"))&&"FR"===r.countryCode&&"FR"===a.countryCode&&(null==n?void 0:n.toLocaleLowerCase().includes("sncf"))&&(null==i?void 0:i.every((e=>{var{code:t}=e;return!ga.includes(t)})))}))})):!!(null!=e&&null!==(a=e.inwardJourney)&&void 0!==a&&a.legs||null!=e&&null!==(r=e.outwardJourney)&&void 0!==r&&r.legs)&&[(null==e||null===(n=e.inwardJourney)||void 0===n?void 0:n.legs)||{},(null==e||null===(i=e.outwardJourney)||void 0===i?void 0:i.legs)||{}].every((e=>Object.values(e).every((e=>{var{vendorQuotaIdentifier:t,destination:a,origin:r,carrierName:n,fareTypes:i}=e;return(null==t?void 0:t.toLocaleLowerCase().includes("ter"))&&"FR"===a.countryCode&&"FR"===r.countryCode&&(null==n?void 0:n.toLocaleLowerCase().includes("sncf"))&&(null==i?void 0:i.every((e=>{var{code:t}=e;return!ga.includes(t)})))}))))})),ha=(0,A.P1)(pa.s9,L.rF,((e,t)=>{var a,r,n,i;return t.length?t.every((e=>{var{legs:t}=e;return t.every((e=>{var{vendorQuotaIdentifier:t,destination:a,origin:r,brandCode:n,fareTypes:i}=e;return(null==t?void 0:t.toLocaleLowerCase().includes("tgv"))&&"urn:trainline:sncf:brand:tgv_inoui"===n&&"FR"===r.countryCode&&"FR"===a.countryCode&&(null==i?void 0:i.every((e=>{var{code:t}=e;return!ga.includes(t)})))}))})):!!(null!=e&&null!==(a=e.inwardJourney)&&void 0!==a&&a.legs||null!=e&&null!==(r=e.outwardJourney)&&void 0!==r&&r.legs)&&[(null==e||null===(n=e.inwardJourney)||void 0===n?void 0:n.legs)||{},(null==e||null===(i=e.outwardJourney)||void 0===i?void 0:i.legs)||{}].every((e=>Object.values(e).every((e=>{var{vendorQuotaIdentifier:t,origin:a,destination:r,brandCode:n,fareTypes:i}=e;return(null==t?void 0:t.toLocaleLowerCase().includes("tgv"))&&"urn:trainline:sncf:brand:tgv_inoui"===n&&"FR"===a.countryCode&&"FR"===r.countryCode&&(null==i?void 0:i.every((e=>{var{code:t}=e;return!ga.includes(t)})))}))))})),ya=a(33337),xa=a(32720),Sa=a(27835),_a=a(87886),Ca=a(82427),Ta=a(89692),Na=a(22002),Aa=a(6575);const Fa=P.StyleSheet.create({flexibilityReassuranceContainer:{display:"flex",flexDirection:"row",alignItems:"center",padding:"".concat(V.OT," ").concat(V.eR," ").concat(V.OT," ").concat(V.OT),backgroundColor:H.dp_app_info_brighter,borderRadius:Aa.sC,marginTop:V.OT,maxWidth:"410px",marginBottom:"-15px"},flexibilityReassuranceIcon:{color:H.dp_app_info_duller,marginRight:V.OT},flexibilityReassuranceText:{color:H.dp_app_info_duller}});var Ia=a(71695);function La(e,t,a,r){return w.createElement("div",{className:(0,P.css)(Fa.flexibilityReassuranceContainer),"data-test":"flexibility-reassurance-message"},function(e){switch(e){case Ia.OI.GBP:return w.createElement(xa.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)});case Ia.OI.USD:case Ia.OI.AUD:return w.createElement(Sa.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)});case Ia.OI.NOK:case Ia.OI.DKK:case Ia.OI.SEK:return w.createElement(_a.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)});case Ia.OI.JPY:return w.createElement(Ca.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)});case Ia.OI.EUR:return w.createElement(Ta.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)});default:return w.createElement(Na.default,{className:(0,P.css)(Fa.flexibilityReassuranceIcon)})}}(r),w.createElement("span",{className:(0,P.css)(Fa.flexibilityReassuranceText)},(e||t)&&a&&w.createElement(re.FormattedMessage,{id:"page.results.farePresentation.flexibilityReassurance.businessPremier"}),e&&!a&&w.createElement(re.FormattedMessage,{id:"page.results.farePresentation.flexibilityReassurance.ter"}),t&&!a&&w.createElement(re.FormattedMessage,{id:"page.results.farePresentation.flexibilityReassurance.tgv"})))}var wa=a(7256);const Oa=(0,s.compose)((0,n.connect)((e=>{var t=(0,S.FD)(e);return{hasAllTGVRows:ha(e,t),hasAllTERRows:Ea(e,t),hasAllBusinessPremierRows:ba(e,t),currencyCode:(0,wa.EI)(e)||"GBP",enableFlexibilityMessageOnSearchResultsPageFeatureFlag:(0,v.Wf)(e),enableFlexibilityMessageOnTicketOptionsFeatureFlag:(0,v.nE)(e)}})),r.FZ)((e=>{var{hasAllTGVRows:t,hasAllTERRows:a,hasAllBusinessPremierRows:r,deviceType:n,currencyCode:i,enableFlexibilityMessageOnSearchResultsPageFeatureFlag:s,enableFlexibilityMessageOnTicketOptionsFeatureFlag:l}=e,o=n===ya.WO.MOBILE,{enableSNCFFlexibilityMessage:c,enableFlexibilityMessageOnSearchResultsPage:d}=(0,ht.x)(),m=t&&!a||!t&&a;return c&&m&&o&&l||d&&s&&m&&!o?La(a,t,r,i):null})),Da=P.StyleSheet.create({flexibilityDivider:{borderBottom:"1px solid ".concat(H.dp_app_border_base),padding:"".concat(xe.W0.s1," 0 ").concat(xe.W0.s6," 0")},passengerCount:{paddingTop:V.Ui,paddingBottom:V.VG},passengerCountWithNewTcs:{paddingBottom:V.OT},passengerCountSection:{marginBottom:V.LS},ticketNameList:{listStyle:"none",margin:"".concat(V.LS," 0")},frame:{margin:"".concat(V.VG," 0"),padding:V.Ui,boxShadow:"0 0 ".concat(V.LS," 0 ").concat(H.dp_brand_neutral_brighter)},route:{fontSize:xe.cp.body.fontSize,lineHeight:xe.cp.body.lineHeight}});var Ra=a(59230);const Za=P.StyleSheet.create({fareDescription:{textDecoration:"underline",cursor:"pointer"},fareLeg:{":not(:last-child)":{marginBottom:xe.W0.s6}},legItem:{":not(:last-child)":{marginBottom:xe.W0.s2}},fareLegRouteSection:{marginBottom:xe.W0.s2},fareName:{marginBottom:xe.W0.s1},content:{display:"flex",flexDirection:"column",gap:V.Ui},fareNameAndDesc:{display:"flex",flexDirection:"column",gap:V.eR},faresWrapper:{display:"flex",flexDirection:"column",gap:V.Ui},originAndDestinationTitle:{fontWeight:600}});var Pa=P.StyleSheet.create({detailsContainer:{background:"white",padding:0,border:"none"},expandedBody:{padding:"".concat(xe.W0.s6," 0 0"),border:"none",overflow:"visible"}});const ka=e=>{var t,a,r,i,s,{sections:l,onDetailsToggle:o}=e,d=(0,n.useDispatch)(),m=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS))),{enableNewTCsOnResults:u}=(0,ht.x)();if(!l||0===l.length)return null;var f=l[0].legs[0].fareTypes[0],p=l.reduce(((e,t)=>(t.legs.forEach((t=>{t.fareTypes.forEach((a=>{e.isSingleFare&&a.id!==f.id&&(e.isSingleFare=!1),e.departAt=t.departAt;var r=e.fares.find((e=>e.id===a.id));r?r.routes.push({origin:t.origin.name,destination:t.destination.name}):e.fares.push({id:a.id,name:a.name,conditionsSummary:a.conditionsSummary,routes:[{origin:t.origin.name,destination:t.destination.name}]})}))})),e)),{isSingleFare:!0,fares:[],departAt:""}),g=p.fares.reduce(((e,t)=>{var a=e.find((e=>JSON.stringify(e.routes)===JSON.stringify(t.routes)));return a?a.group.push(t):e.push({routes:t.routes,group:[t]}),e}),[]),v=p.isSingleFare?w.createElement(Ke.Z,{textType:"small",as:"div"},(0,Jt.j)((null===(t=p.fares)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.conditionsSummary)||"")):l&&w.createElement("div",null,g.map((e=>w.createElement("div",{className:(0,P.css)(Za.fareLeg),key:JSON.stringify(e.routes)},g.length>1&&w.createElement("div",{className:(0,P.css)(Za.fareLegRouteSection)},e.routes.map((e=>w.createElement(Ke.Z,{key:"".concat(e.origin,"-").concat(e.destination),as:"div",textWeight:"700",testId:"fare-description-route"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.route",values:{origin:e.origin,destination:e.destination}}))))),e.group.map((e=>w.createElement("div",{key:e.id,className:(0,P.css)(Za.legItem)},w.createElement(Ke.Z,{textType:"small",as:"div",textWeight:"600",className:(0,P.css)(Za.fareName),testId:"fare-description-name"},e.name),w.createElement(Ke.Z,{textType:"small",as:"div",testId:"fare-description-content"},(0,Jt.j)(e.conditionsSummary||""))))))))),b=null===(a=p.fares)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.routes)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.origin,E=null===(r=p.fares)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.routes)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.destination,h=null===(i=p.fares)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.name,y=p.departAt,S=new Date((0,Ze.Qb)(y)),_=m?g.length>0:g.length>1,C=w.createElement("div",{className:(0,P.css)(Za.content),"data-test":"single-fare-content"},w.createElement("div",{"data-test":"single-fare-description-route",className:(0,P.css)(Za.originAndDestinationTitle)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.route",values:{origin:b,destination:E,date:S&&w.createElement(re.FormattedMessage,{id:"dateTimeFormat.date",values:{weekday:w.createElement(re.FormattedDate,{value:S,weekday:"short",timeZone:"UTC"}),day:w.createElement(re.FormattedDate,{value:S,day:"numeric",timeZone:"UTC"}),month:w.createElement(re.FormattedDate,{value:S,month:"short",timeZone:"UTC"}),year:w.createElement(re.FormattedDate,{value:S,year:"numeric",timeZone:"UTC"})}})}})),w.createElement("div",{className:(0,P.css)(Za.fareNameAndDesc),"data-test":"single-fare-name-conditions"},w.createElement(Ke.Z,{textType:"small",as:"p",textWeight:"600",testId:"fare-description-name"},h),w.createElement(Ke.Z,{textType:"small",as:"p"},(0,Jt.j)((null===(s=p.fares)||void 0===s||null===(s=s[0])||void 0===s?void 0:s.conditionsSummary)||"")))),T=l&&w.createElement("div",{className:(0,P.css)(Za.faresWrapper)},g.map((e=>w.createElement("div",{className:(0,P.css)(m?Za.content:Za.fareLeg),key:JSON.stringify(e.routes)},_&&w.createElement("div",{className:m?void 0:(0,P.css)(Za.fareLegRouteSection)},e.routes.map((e=>w.createElement("div",{key:"".concat(e.origin,"-").concat(e.destination),"data-test":"fare-description-route",className:(0,P.css)(Za.originAndDestinationTitle)},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.route",values:{origin:e.origin,destination:e.destination,date:S&&w.createElement(re.FormattedMessage,{id:"dateTimeFormat.date",values:{weekday:w.createElement(re.FormattedDate,{value:S,weekday:"short",timeZone:"UTC"}),day:w.createElement(re.FormattedDate,{value:S,day:"numeric",timeZone:"UTC"}),month:w.createElement(re.FormattedDate,{value:S,month:"short",timeZone:"UTC"}),year:w.createElement(re.FormattedDate,{value:S,year:"numeric",timeZone:"UTC"})}})}}))))),e.group.map((e=>w.createElement("div",{key:e.id,className:(0,P.css)(m?Za.fareNameAndDesc:Za.legItem)},w.createElement(Ke.Z,{textType:"small",as:"div",textWeight:"600",testId:"fare-description-name",className:m?void 0:(0,P.css)(Za.fareName)},e.name),w.createElement(Ke.Z,{textType:"small",as:"div",testId:"fare-description-content"},(0,Jt.j)(e.conditionsSummary||""))))))))),N=p.isSingleFare?C:T,A=e=>w.createElement(Ke.Z,{textWeight:"600"},w.createElement(re.FormattedMessage,{id:e?"page.europe.ticketOptions.fareDescription.hide":"page.europe.ticketOptions.fareDescription.show"}));return w.createElement(w.Fragment,null,u&&m?w.createElement("section",{"data-test":"clickable-fare-conditions"},w.createElement(Ke.Z,{className:(0,P.css)(Za.fareDescription),textType:"small",fontFamily:"systemFont",textWeight:"400",onClick:()=>d((0,x.Ll)({type:c.e.RESULTS_FARE_DESCRIPTION,params:{content:N,deviceType:ya.WO.MOBILE}})),testId:"view-full-ticket-conditions-title"},w.createElement(re.FormattedMessage,{id:"page.europe.ticketOptions.fareDescription"}))):w.createElement("section",{"data-test":"expandable-fare-conditions"},w.createElement(Ra.ZP,{onToggle:o,styleSheet:Pa,expandedBody:v,header:{collapsed:A(!0),expanded:A(!1)}})))};var Ba=a(18353),Ma=a(61229),Wa=a(60654),Ha=a(10526),ja=a(69918),Ua=a(22273),za=a(8590);const Ja=P.StyleSheet.create({container:{display:"flex",flexDirection:"row",width:"100%",":nth-of-type(3) > div:first-child":{width:"100%"}},newTCsContainer:{display:"flex",flexDirection:"column",border:"1px solid ".concat(H.dp_app_border_base),borderRadius:za.E0.l,paddingBottom:za.W0.s6},multipleSections:{borderTop:"0 solid transparent",borderTopRightRadius:0,borderTopLeftRadius:0}});var Va={expandedBody:{display:"block"}},Ga=P.StyleSheet.create((0,pe.Z)((0,pe.Z)({},Va),{},{detailsContainer:{borderColor:"".concat(H.dp_app_border_base),borderTopWidth:0},detailsContainerCollapsed:{borderRadius:"0 0 ".concat(za.E0.l," ").concat(za.E0.l)},detailsContainerExpanded:{borderRadius:0}})),Xa=P.StyleSheet.create((0,pe.Z)((0,pe.Z)({},Va),{},{detailsContainer:{borderColor:"".concat(H.dp_app_border_base)}})),Qa=a(93120),Ya=a(41678),qa=a(91939);const Ka=P.StyleSheet.create({container:{display:"flex",flexDirection:"column",width:"100%",color:H.dp_app_text_base,padding:V.VG},tcsContainer:{paddingBottom:V.OT},fareContainer:{display:"flex",flexDirection:"row",width:"100%"},fareContainerMargin:{marginBottom:V.VG},titlesContainer:{display:"flex",flexDirection:"column",width:"100%"},pricesContainer:{display:"flex",flexDirection:"column",width:"20%"},fareTypesContainer:{display:"flex",justifyContent:"space-between"},title:{fontSize:U.W.title4.fontSize,lineHeight:V.VG,fontWeight:U.R.body.weights.semiBold},subtitle:{flex:1,fontSize:U.W.body.fontSize,lineHeight:"20px"},badgeBase:{borderRadius:xe.E0.s,fontSize:U.W.small.fontSize,fontWeight:U.R.body.weights.semiBold,padding:"1px 8px"},badgeYellow:{backgroundColor:xe.O9.palette.yellow_70,color:H.dp_app_text_warning},badgeBlue:{backgroundColor:H.dp_app_info_brightest,color:H.dp_app_info_duller},originalPrice:{textDecoration:"line-through",fontSize:U.W.small.fontSize,lineHeight:"20px",color:H.dp_app_text_subdued,textAlign:"right"},actualPrice:{fontSize:U.W.title4.fontSize,lineHeight:V.VG,textAlign:"right"},discountBadge:{marginLeft:za.W0.s2,display:"inline-block"},chevron:{display:"flex",alignItems:"center",flexDirection:"row",marginLeft:"15px",marginBottom:"27px"},header:{padding:"0 ".concat(V.VG)},headerText:{textDecoration:"underline",cursor:"pointer"}}),$a=P.StyleSheet.create({container:{display:"flex",flexDirection:"column",width:"100%",marginTop:V.Ui,paddingTop:V.Ui,borderTop:"solid 1px ".concat(H.dp_app_border_base)},allPassengersLabel:{marginBottom:V.Ui,fontWeight:"bold"},term:{marginBottom:V.OT,display:"flex",flexDirection:"row",width:"100%"},icon:{width:"24px",height:"24px",flexShrink:0,marginRight:V.LS,[xe.cy.min.m]:{marginRight:V.OT}}});var er=a(36841),tr=a(29340),ar=a(61148),rr=a(59548),nr=a(80911),ir=(e,t,a)=>{if(e===nr.Dx.NON_REFUNDABLE)return w.createElement(tr.default,t);switch(a){case Ia.OI.GBP:return w.createElement(xa.default,t);case Ia.OI.USD:case Ia.OI.AUD:return w.createElement(Sa.default,t);case Ia.OI.NOK:case Ia.OI.DKK:case Ia.OI.SEK:return w.createElement(_a.default,t);case Ia.OI.JPY:return w.createElement(Ca.default,t);case Ia.OI.EUR:return w.createElement(Ta.default,t);default:return w.createElement(Na.default,t)}},sr=(e,t)=>e===nr.TO.NON_EXCHANGEABLE?w.createElement(ar.default,t):w.createElement(rr.default,t);function lr(e){var{nonContractualTerms:t,isMultiPassengerGroup:a}=e,r=(0,n.useSelector)(wa.EI),i=null==t?void 0:t.filter((e=>{var{code:t}=e;return Object.values(nr.TO).includes(t)||Object.values(nr.Dx).includes(t)}));return i&&2===(null==i?void 0:i.length)?w.createElement("div",{"data-test":"terms-and-conditions-labels",className:(0,P.css)($a.container)},a&&w.createElement("span",{"data-test":"terms-and-conditions-title",className:(0,P.css)($a.allPassengersLabel)},w.createElement(re.FormattedMessage,{id:"page.results.farePresentation.terms.allPassengers"})),i.map(((e,t)=>{var{code:a}=e;return w.createElement("div",{key:t,"data-test":"terms-and-conditions-term",className:(0,P.css)($a.term)},((e,t)=>{var a=(0,pe.Z)({},e?{className:(0,er.css)(e)}:{});return{[nr.Dx.NON_REFUNDABLE]:ir(nr.Dx.NON_REFUNDABLE,a,t),[nr.Dx.REFUNDABLE_90]:ir(nr.Dx.REFUNDABLE_90,a,t),[nr.Dx.REFUNDABLE_80]:ir(nr.Dx.REFUNDABLE_80,a,t),[nr.Dx.REFUNDABLE_60]:ir(nr.Dx.REFUNDABLE_60,a,t),[nr.Dx.REFUNDABLE_90_24H]:ir(nr.Dx.REFUNDABLE_90_24H,a,t),[nr.Dx.REFUNDABLE_50_24H]:ir(nr.Dx.REFUNDABLE_50_24H,a,t),[nr.Dx.REFUNDABLE_100_2DAYS]:ir(nr.Dx.REFUNDABLE_100_2DAYS,a,t),[nr.Dx.REFUNDABLE_10_FEE_24H]:ir(nr.Dx.REFUNDABLE_10_FEE_24H,a,t),[nr.Dx.REFUNDABLE_90_3DAYS]:ir(nr.Dx.REFUNDABLE_90_3DAYS,a,t),[nr.Dx.REFUNDABLE_5_FEE]:ir(nr.Dx.REFUNDABLE_5_FEE,a,t),[nr.TO.NON_EXCHANGEABLE]:sr(nr.TO.NON_EXCHANGEABLE,a),[nr.TO.EXCHANGEABLE_100]:sr(nr.TO.EXCHANGEABLE_100,a),[nr.TO.EXCHANGEABLE_80]:sr(nr.TO.EXCHANGEABLE_80,a),[nr.TO.EXCHANGEABLE_100_DEPART_TIME]:sr(nr.TO.EXCHANGEABLE_100_DEPART_TIME,a),[nr.TO.EXCHANGEABLE_100_24H]:sr(nr.TO.EXCHANGEABLE_100_24H,a),[nr.TO.EXCHANGEABLE_100_2DAYS]:sr(nr.TO.EXCHANGEABLE_100_2DAYS,a),[nr.TO.EXCHANGEABLE_50_3DAYS]:sr(nr.TO.EXCHANGEABLE_50_3DAYS,a),[nr.TO.EXCHANGEABLE_100_BASE]:sr(nr.TO.EXCHANGEABLE_100_BASE,a),[nr.TO.EXCHANGEABLE_100_STANDARD]:sr(nr.TO.EXCHANGEABLE_100_STANDARD,a)}})($a.icon,r)[a],w.createElement(re.FormattedMessage,{id:"page.results.farePresentation.terms.".concat(a)}))}))):null}var or=()=>w.createElement(Ya.Z,{type:"warning"},w.createElement(re.FormattedMessage,{id:"page.checkout.tripCard.tripSummaryJourney.discountedLabel"}));const cr=e=>{var{passengerGroups:t,deviceType:a,isExpanded:r,toggleModal:i,showDiscountedLabel:s,nonContractualTerms:l,expandedDetails:o}=e,c=a===ya.WO.MOBILE,{enableNewTCsOnResults:d}=(0,ht.x)(),{sendTracking:m}=(0,at.rS)(),{experimentsDict:u}=(0,Ct.zM)(["experimentsDict"]),f=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS))),p=t.length>1;d&&(0,rt.QH)(u,[xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS]),(0,w.useEffect)((()=>{var e=r?"Exchange Refund expanded":"Exchange Refund collapsed";o&&m((0,at.k1)({category:"Ticket Options T&C",action:e,label:e,coreProperties:{}}))}),[o,r,m]);return w.createElement(w.Fragment,null,w.createElement("div",{className:(0,P.css)(Ka.container,d&&f&&Ka.tcsContainer)},t.map(((e,a)=>{var r=Boolean(e.originalPrice&&e.originalPrice>0),n=e.fareTypeNames.join(", ");return w.createElement("div",{key:a+e.number+e.passengerTypeName,className:(0,P.css)(Ka.fareContainer,t.length-1!==a&&Ka.fareContainerMargin)},w.createElement("div",{className:(0,P.css)(Ka.titlesContainer)},w.createElement("div",{className:(0,P.css)(Ka.title)},w.createElement("span",{"aria-hidden":"true"},"".concat(e.number," x ")),w.createElement(qa.Z,null,e.number),w.createElement("span",null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.passengers.copyOnly.".concat(e.passengerTypeName),values:{[e.passengerTypeName]:e.number}})),r&&w.createElement("div",{"data-test":"discounted badge"},w.createElement(or,null))),w.createElement("div",{className:(0,P.css)(Ka.fareTypesContainer)},w.createElement("div",{className:(0,P.css)(Ka.subtitle)},n),void 0===e.actualPrice&&s?w.createElement("div",{"data-test":"discounted fare badge"},w.createElement(or,null)):null)),e.currency&&void 0!==e.actualPrice&&w.createElement("div",{className:(0,P.css)(Ka.pricesContainer)},w.createElement("div",{className:(0,P.css)(Ka.actualPrice)},w.createElement(B.Z,{value:e.actualPrice,currency:e.currency,"data-test":"actual-price-currency"})),!r&&s?w.createElement("div",{"data-test":"discounted fare badge"},w.createElement(or,null)):null,r&&w.createElement("div",{className:(0,P.css)(Ka.originalPrice)},w.createElement(B.Z,{value:e.originalPrice,currency:e.currency,"data-test":"original-price-currency"}))))})),!c&&w.createElement(Oa,null),f&&d&&w.createElement(lr,{nonContractualTerms:l,isMultiPassengerGroup:p})),f&&d?w.createElement("div",{className:(0,P.css)(Ka.header)},w.createElement(Ke.Z,{className:(0,P.css)(Ka.headerText),textType:"small",fontFamily:"systemFont",textWeight:"400",onClick:()=>{null==i||i(),m((0,at.k1)({category:"Ticket Options T&C",action:"Show conditions click",label:"Show conditions click",coreProperties:{}}))},testId:"new-clickable-fare-conditions"},w.createElement(re.FormattedMessage,{id:"page.europe.ticketOptions.fareDescription"}))):w.createElement("div",{className:(0,P.css)(Ka.chevron)},w.createElement(Ra.bf,{isExpanded:r}),w.createElement(re.FormattedMessage,{id:"page.checkout.tripCard.tripSummaryJourney.viewExchangeAndRefundConditions"})))};var dr=a(97866),mr=(e,t,a)=>{var r=[];return!a||a.length<1||(t.forEach((t=>{if(!(t.length<1)&&t[0]){var n=(0,ja.Qf)(e,t[0].passengerType),i=(0,N.xHg)(t.map((t=>t.fareIds.reduce(((t,r)=>{var n=(0,N.xHg)(a).find((e=>!!e&&e.id===r));if(n&&n.fareType){var i=(0,Ha.oH)(e,n.fareType);i&&t.push(i)}return t}),[])))),s=t.reduce(((e,t)=>{var{actualPrice:a=NaN}=t;return e+a}),0),l=t.reduce(((e,t)=>{var{originalPrice:a=NaN}=t;return e+a}),0),o=t.reduce(((e,t)=>e||t.currency),void 0);Number.isNaN(l)&&(l=void 0),Number.isNaN(s)&&(s=void 0),r.push({number:t.length,passengerTypeName:n?n.name:"",fareTypeNames:(0,N.jj$)(i.map((e=>e?e.name:""))),fareTypes:(0,N.jj$)(i),actualPrice:s,originalPrice:l!==s?l:void 0,currency:o})}})),r.sort(((e,t)=>e.originalPrice?-1:t.originalPrice?1:0))),r},ur=(e,t)=>{var a=!0,r=[];e.forEach((e=>{var n=e.reduce(((e,r)=>(r.fareIds.forEach((r=>{var n=(0,N.xHg)(t).find((e=>!!e&&e.id===r));n&&n.nonContractualTerms&&n.nonContractualTerms.length>0?e.push(...n.nonContractualTerms):a=!1})),e)),[]);r.push(...n)}));var n=Array.from(new Map(r.map((e=>[e.code,e]))).values());return a&&(null==n?void 0:n.length)>0&&(null==n?void 0:n.length)<=2?n:[]};const fr=(0,s.compose)((0,n.connect)((e=>{var t=(0,dr.c7)(e),a=(0,S.FD)(e),r=(0,L.PQ)(e,a),n=(0,C._)(e,a),i=(0,Ma.ng)(e,a),s=Object.values(i).filter(Boolean),l=(0,L.hh)(e,a),o=(0,L.s7)(e,a),c=(0,L.QM)(e,a),d=[],m=ha(e,a),u=Ea(e,a),f=[];l&&s&&s.length>0&&(d.push(...mr(e,l,s)),f.push(...ur(l,s))),c&&s&&s.length>0&&(d.push(...mr(e,c,s)),f.push(...ur(c,s)));var p=t===Wa.Portal.TRAINLINE&&(0,Ua.lG)(null==o?void 0:o.outwardJourney.legs,d[0].fareTypes);return{passengerGroups:d,sections:(0,L.rF)(e,a),showFlexibilityFilter:!r&&!n,hasAllTGVRows:m,hasAllTERRows:u,nonContractualTerms:f,showDiscountedLabel:p}}),(e=>({openModal:t=>e((0,x.Ll)({type:c.e.RESULTS_FARE_DESCRIPTION,params:{sections:t,deviceType:ya.WO.DESKTOP}}))}))),r.FZ)((e=>{var{passengerGroups:t,sections:a,deviceType:r,showDiscountedLabel:i,nonContractualTerms:s,showFlexibilityFilter:l,openModal:o}=e,{enableNewTCsOnResults:c}=(0,ht.x)(),d=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS))),[m,u]=(0,w.useState)(!1),f=w.createElement(Qa.yx,{sections:a}),p=l?Ga:Xa;return w.createElement("div",{className:(0,P.css)(d?Ja.newTCsContainer:Ja.container,d&&(null==a?void 0:a.length)>1&&l&&Ja.multipleSections)},c&&d?w.createElement(w.Fragment,null,w.createElement(cr,{passengerGroups:t,deviceType:r,showDiscountedLabel:i,toggleModal:()=>o(a),isExpanded:!1,nonContractualTerms:s})):w.createElement(Ra.ZP,{key:l?"withFlexFilter":"withoutFlexFilter",hideDefaultChevronIcon:!0,header:e=>{var{isExpanded:a}=e;return w.createElement(cr,{passengerGroups:t,deviceType:r,isExpanded:a,showDiscountedLabel:i,expandedDetails:m})},expandedBody:f,styleSheet:p,onToggle:e=>{e&&u(e)}}))}));const pr=e=>{var{onChange:t,isPaginating:a,shouldHideFirstTab:r,passengerCount:i,sections:s,journeyAlternatives:l,selectedAlternative:o,isInwardView:c,hasAllEurostarRows:d,hasJourneyOnlyOneFareAvailable:m,flexibilityFilterSelectedTab:u,setFlexibilityFilterSelectedTab:f,onSelectAlternativeFromAlternative:p,onFlexibilityDescriptionDetailsToggle:g,cheapestAlternative:v,cheapestSemiFlexAlternative:b,cheapestFlexibleAlternative:E,currentSelectedAlternativePriceWithSmartPriceInfo:h}=e,{shouldRenderMobile:y}=(0,Ba.Pb)(),{enableNewTCsOnResults:x}=(0,ht.x)(),_=(0,n.useStore)().getState(),{experimentsDict:C}=(0,Ct.zM)(["experimentsDict"]),T=(0,n.useSelector)(S.FD),N=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS))),A=Object.values(i).filter((e=>e>=1)).length>1,F=!1,I="",O=[];if(N&&x){var D=(0,Ma.ng)(_,T),R=Object.values(D).filter(Boolean),Z=(0,L.hh)(_,T),k=(0,L.QM)(_,T);O=ur(Z||k,R)}if(x&&(0,rt.QH)(C,[xt.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS]),s&&s.length){var B,M=null===(B=s[0].legs)||void 0===B||null===(B=B[0])||void 0===B||null===(B=B.fareTypes)||void 0===B?void 0:B[0];F=M&&s.reduce(((e,t)=>{var{legs:a}=t;return a.forEach((t=>{var{fareTypes:a}=t;e=e.concat(a.map((e=>{var{id:t}=e;return t})))})),e}),[]).every((e=>e===M.id)),I=(null==M?void 0:M.name)||""}return w.createElement("section",null,w.createElement(Ke.Z,{as:"h2",textType:"title2",testId:"flexibilityAndConditionsTitleId"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.flexibilityConditions"})),w.createElement(qe.Z,{styles:Da.frame,bordered:!0},w.createElement("section",{className:(0,P.css)(Da.flexibilityDivider)},w.createElement(Ge,{isLoading:a,onChange:t,shouldHideFirstTab:r,displayPriceDeltas:!1,journeyAlternatives:l,selectedAlternative:o,onSelectAlternativeFromAlternative:p,isInwardView:c,hasAllEurostarRows:d,hasJourneyOnlyOneFareAvailable:m,flexibilityFilterSelectedTab:u,setFlexibilityFilterSelectedTab:f,cheapestAlternative:v,cheapestSemiFlexAlternative:b,cheapestFlexibleAlternative:E})),(null==h?void 0:h.savings)&&y&&w.createElement(Ba.sq,{price:h.savings}),w.createElement("section",{className:(0,P.css)(Da.passengerCount,x&&N&&Da.passengerCountWithNewTcs)},i.adults>0&&w.createElement("section",{className:(0,P.css)(Da.passengerCountSection)},w.createElement(Ke.Z,{textWeight:"700",as:"h3",textType:"body"},"".concat(i.adults," x "),w.createElement("span",null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.passengers.ticket.adult",values:{number:i.adults}})))),i.youths>0&&w.createElement("section",{className:(0,P.css)(Da.passengerCountSection)},w.createElement(Ke.Z,{textWeight:"700",as:"h3",textType:"body"},"".concat(i.youths," x "),w.createElement("span",null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.passengers.ticket.youth",values:{number:i.youths}})))),i.seniors>0&&w.createElement("section",{className:(0,P.css)(Da.passengerCountSection)},w.createElement(Ke.Z,{textWeight:"700",as:"h3",textType:"body"},"".concat(i.seniors," x "),w.createElement("span",null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.passengers.ticket.senior",values:{number:i.seniors}})))),F&&w.createElement(Ke.Z,{as:"span",textType:"small",testId:"flexibilityAndConditionsSingleFareName"},I),w.createElement(Oa,null),N&&x&&w.createElement(lr,{nonContractualTerms:O,isMultiPassengerGroup:A})),w.createElement(ka,{sections:s,onDetailsToggle:g})))},gr=P.StyleSheet.create({icon:{flexGrow:0,flexShrink:0},wrapper:{display:"flex",alignItems:"center",backgroundColor:H.dp_comp_message_info_background,borderRadius:xe.E0.l,padding:xe.W0.s4,marginTop:xe.W0.s6,marginBottom:xe.W0.s6,fontSize:xe.cp.small.fontSize,lineHeight:xe.cp.small.lineHeight,fontWeight:400,color:H.dp_app_info_duller,":hover":{cursor:"pointer"},focus:{outline:"none !important"},"focus-within":{outline:"none !important"}}});var vr=a(37977),br=a(84752);const Er=e=>{var{onClick:t,onKeyDown:a}=e;return w.createElement("div",{role:"button",tabIndex:0,className:(0,P.css)(gr.wrapper),onClick:t,onKeyDown:a},w.createElement("span",null,"👑"," ",w.createElement(vr.ZP,{id:"customerJourneySummary.europe.bannerInfo.infinitaBistro",tagsMap:{b:br.Z}})),w.createElement(Ye.default,{className:(0,P.css)(gr.icon)}))};var hr=(e,t,a,r,i)=>{var s=(0,n.useSelector)((e=>(0,S.FD)(e))),l=(0,n.useSelector)((e=>(0,_.U)(e,s))),{sendTracking:o}=(0,at.rS)(),c=null==l?void 0:l.travelClass,d=(0,n.useDispatch)();return{isInfinitaBistroIncluded:(0,N.xHg)(e.map((e=>e.comforts))).map((e=>e.code)).includes(dt)&&c===R.U9.STANDARD,trigger:(0,w.useCallback)((()=>{d((0,m.HE)({[i?"selectedInward":"selectedOutward"]:{alternativeHash:t,travelClass:c===R.U9.STANDARD?R.U9.FIRST:R.U9.STANDARD,journeyHash:a,journeyId:r}},{})),o((0,at.k1)({coreProperties:{},category:"click bistro banner",action:"click bistro banner",label:"bistro banner"})),e.forEach((e=>{var t=e.comforts.find((e=>e.code===dt));t&&d((0,m.TD)({legs:[e.id],comfortId:t.id}))}))}),[e,t,a,r,i,c])}};const yr=e=>{var t,{journey:{sections:a},isEuropeCoachExperience:r,hasAllEurostarRows:n,onFlexibilityChange:i,isPaginating:s,hasJourneyOnlyOneFareAvailable:l,isSemiFlexibleCheapestFare:o,semiFlexibleTabDeltaPrice:c,flexibleTabDeltaPrice:d,displayFlexibilityTabPriceDeltas:m,totalPassengersCount:u,comfortClassJourneyDetails:f,passengerCount:p,deviceType:g,selectedJourney:v,shouldShowConformTitle:b,selectedAlternative:E,journeyAlternatives:h,isInwardView:y,onSelectAlternativeFromAlternative:x,flexibilityFilterSelectedTab:S,setFlexibilityFilterSelectedTab:_,onFlexibilityDescriptionDetailsToggle:C,coreProperties:T,cheapestAlternative:A,cheapestSemiFlexAlternative:F,cheapestFlexibleAlternative:I,currentSelectedAlternativePriceWithSmartPriceInfo:L}=e,{isInfinitaBistroIncluded:D,trigger:R}=hr(f.legs.map((e=>({id:e.id,comforts:e.comforts}))),null==v||null===(t=v.firstAlternativeContainer)||void 0===t?void 0:t.hash,null==v?void 0:v.hash,null==v?void 0:v.journeyId,y);if("mobile"===g)return w.createElement(w.Fragment,null,D&&w.createElement(Er,{onClick:R}),w.createElement(pr,{passengerCount:p,sections:a,isPaginating:s,onChange:()=>i(y),shouldHideFirstTab:o,hasJourneyOnlyOneFareAvailable:l,journeyAlternatives:h,selectedAlternative:E,onSelectAlternativeFromAlternative:x,onFlexibilityDescriptionDetailsToggle:e=>C&&C(e,T),isInwardView:y,hasAllEurostarRows:n,flexibilityFilterSelectedTab:S,setFlexibilityFilterSelectedTab:_,cheapestAlternative:A,cheapestSemiFlexAlternative:F,cheapestFlexibleAlternative:I,currentSelectedAlternativePriceWithSmartPriceInfo:L}),w.createElement("section",null,a.map(((e,t)=>w.createElement(kt,{key:e.id,legs:e.legs,journey:v,shouldShowTitle:b&&0===t})))));var Z=a.length>1,P=(0,O.Z)(a),{journey:k}=f;return w.createElement(w.Fragment,null,!n&&!l&&w.createElement(Ge,{isLoading:s,onChange:()=>i(y),shouldHideFirstTab:o,semiFlexibleTabDeltaPrice:c,flexibleTabDeltaPrice:d,displayPriceDeltas:m,flexibilityFilterSelectedTab:S,setFlexibilityFilterSelectedTab:_}),a.map(((e,t)=>{var a=!e.mixedLegComforts&&e.legs.length>1&&Z,n=Z&&t<P.length,i=(0,N.YMb)(e.legs),s=(0,N.Z$Q)(e.legs),l=n&&(0,N.YMb)(P[t][1].legs),o=n&&(0,N.Z$Q)(P[t][0].legs);return w.createElement(w.Fragment,{key:e.id},a&&i&&s&&w.createElement(le,{origin:i.origin,destination:s.destination}),w.createElement(fa,{section:e,multipleSections:Z,isEuropeCoachExperience:r,totalPassengersCount:u,journey:k}),o&&l&&w.createElement(te,{from:o,to:l}))})))};var xr=a(30119),Sr=a(44055),_r=a(35454),Cr=a(32601),Tr=a(1416),Nr=a(26175);P.StyleSheet.create({title:(0,pe.Z)((0,pe.Z)({},U.W.title3),{},{color:H.dp_app_text_base,margin:"".concat(K.spacers.px24," 0 ").concat(K.spacers.px12," 0")})});var Ar=P.StyleSheet.create({container:{padding:"".concat(K.spacers.px17),overflowY:"hidden",overflowX:"hidden"}}),Fr=P.StyleSheet.create({detailsContainer:{backgroundColor:H.dp_brand_neutral_brightest,borderRadiusTop:xe.E0.l,padding:K.spacers.px16},expandedBody:{backgroundColor:H.dp_app_backdrop_base}});var Ir=(e,t)=>{var a,{legs:r}=e,n=r[0],i=r[r.length-1];return w.createElement(Nr.Tt,{origin:n&&n.origin&&n.origin.name,destination:i&&i.destination&&i.destination.name,transportMode:n?n.transportModeName:"",changes:e.legs.length-1,carrierNames:(0,N.jj$)(r.map((e=>e&&e.carrierLogo&&e.carrierLogo.name)).filter(At.v)),localDepartAt:n&&n.localDepartAt,localArriveAt:i&&i.localArriveAt,isEUExperience:t,extras:null===(a=r[0])||void 0===a?void 0:a.extras})},Lr=e=>w.createElement("div",{tabIndex:0,className:(0,P.css)(Ar.container)},w.createElement(Tr.H,{journey:e,disableLiveTracker:!0}));const wr=e=>{var t,{journey:a,isEUExperience:r}=e,{sendTracking:n}=(0,at.rS)(),i=(null==a||null===(t=a.legs)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.extras)||void 0===t?void 0:t.length)||0;return w.createElement(Ra.ZP,{header:{collapsed:Ir(a,r)},expandedBody:Lr(a),styleSheet:Fr,onToggle:e=>{e&&function(e,t){e((0,at.k1)({coreProperties:{},category:"results",action:"selected journey expanded",label:null==t?void 0:t.toString()}))}(n,i)}})};const Or=(0,n.connect)((e=>{var t=(0,S.FD)(e);return{journey:{id:"",legs:(0,L.PW)(e,t)},isEUExperience:(0,g.pi)(e)}}))(wr);var Dr=a(49987),Rr=a(87374);const Zr=P.StyleSheet.create({tabWrapper:{flexDirection:"column",display:"flex"},tab:{justifyContent:"left",minHeight:"".concat(K.spacersValues.px71,"rem"),fontFamily:U.R.brand.face.fontFamily,fontSize:U.W.small.fontSize,lineHeight:1,borderColor:"".concat(H.dp_app_border_base),borderLeft:"1px solid transparent",":first-child":{borderTopLeftRadius:za.E0.l,borderBottomLeftRadius:0},":last-child":{borderTopRightRadius:za.E0.l,borderBottomRightRadius:0}},activeTab:{backgroundColor:H.dp_app_backdrop_base,border:"2px solid ".concat(H.dp_brand_secondary_duller),boxSizing:"border-box",color:H.dp_app_text_base},inActiveTab:{backgroundColor:H.dp_app_backdrop_base,color:H.dp_app_text_base,padding:"1px",bottomBorderWidth:0,":first-child":{borderLeft:"1px solid ".concat(H.dp_app_border_base)}},title:{fontSize:U.W.title4.fontSize,paddingBottom:"6px",fontWeight:U.R.brand.weights.bold,marginLeft:za.W0.s6,marginRight:"1px",fontFamily:U.R.body.face.fontFamily},price:{fontSize:U.W.body.fontSize,color:H.dp_app_text_subtle,fontWeight:"normal",marginLeft:za.W0.s6,fontFamily:U.R.body.face.fontFamily},delta:{height:"".concat(K.spacersValues.px7,"rem"),width:"".concat(K.spacersValues.px7,"rem"),marginRight:za.W0.s1}});const Pr=function(e){var{testId:t,isActive:a,onClick:r,title:i,fullPrice:s,deltaPrice:l,styleSheet:o,isLoading:c}=e,{disableNegativeFares:d}=(0,ht.x)(),m=(0,n.useSelector)(v.FN);return d&&m&&null!=l&&l.amount&&l.amount<0?null:w.createElement(W.Z,{isActive:a,onClick:r,disabled:c,testId:t,styleSheet:[Zr.tab,o,a?Zr.activeTab:Zr.inActiveTab]},w.createElement("div",{"data-test":"flexibility-filter-".concat(t),className:(0,P.css)(Zr.tabWrapper)},w.createElement("div",{"aria-hidden":"true",className:(0,P.css)(Zr.title)},i),w.createElement(qa.Z,null,w.createElement("span",null,w.createElement(re.FormattedMessage,{id:"page.europe.matrix.cjs.ticketType",values:{ticketType:i}}),".")),w.createElement("div",{className:(0,P.css)(Zr.price)},s?w.createElement("div",{"data-test":"full-price"},w.createElement(qa.Z,null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.cost.aria",values:{price:w.createElement(B.Z,{value:s.amount,currency:s.currencyCode})}})),w.createElement("span",{"aria-hidden":"true"},w.createElement(B.Z,{value:s.amount,currency:s.currencyCode}))):l&&w.createElement("div",{"data-test":"delta-price"},w.createElement("div",{"aria-hidden":"true"},w.createElement(Rr.Z,{className:(0,P.css)(Zr.delta),title:"+"}),w.createElement(B.Z,{value:l.amount,currency:l.currencyCode})),w.createElement(qa.Z,null,w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.price.aria",values:{price:w.createElement(B.Z,{value:l.amount,currency:l.currencyCode})}}))))))},kr=P.StyleSheet.create({tabListWrapper:{display:"flex",marginTop:za.W0.s6}});const Br=e=>{var{flexibilityFilterSelectedTab:t,intl:a,isLoading:r,shouldHideFirstTab:n,cheapestTabPrice:i,semiFlexibleTabDeltaPrice:s,flexibleTabDeltaPrice:l,displayPriceDeltas:o,semiFlexibleTabPrice:c,flexibleTabPrice:d,setFlexibilityFilterSelectedTab:m,onChange:u}=e,[f,p,g]=Ve(m,u),v=(0,je.Z)(n);return n&&t===Ue.h.NON_FLEXIBLE&&m(Ue.h.SEMI_FLEXIBLE),v&&!n&&m(Ue.h.NON_FLEXIBLE),w.createElement(Z.Z,{styleSheet:kr.tabListWrapper},n||w.createElement(Pr,{testId:Ue.h.NON_FLEXIBLE,isActive:t===Ue.h.NON_FLEXIBLE,isLoading:r,onClick:f,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.lowestprice.title"}),fullPrice:i}),!s||w.createElement(Pr,{testId:Ue.h.SEMI_FLEXIBLE,isActive:t===Ue.h.SEMI_FLEXIBLE,isLoading:r,onClick:p,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.SemiFlexible.title"}),fullPrice:o?n?i:void 0:c,deltaPrice:o?s:void 0}),!l||w.createElement(Pr,{testId:Ue.h.FLEXIBLE,isActive:t===Ue.h.FLEXIBLE,isLoading:r,onClick:g,title:a.formatMessage({id:"page.europe.matrix.flexilbilityFilter.Flexible.title"}),fullPrice:o?void 0:d,deltaPrice:o?l:void 0}))};const Mr=(0,s.compose)(re.injectIntl,(0,n.connect)((e=>{var t=(0,S.FD)(e);return{cheapestTabPrice:(0,L.ar)(e,t),semiFlexibleTabPrice:(0,L.Tm)(e,t),semiFlexibleTabDeltaPrice:(0,L.yL)(e,t),flexibleTabPrice:(0,L.yd)(e,t),flexibleTabDeltaPrice:(0,L.FU)(e,t),displayPriceDeltas:(0,L.mf)(e,t),flexibilityFilterSelectedTab:(0,L.Dg)(e,t),shouldHideFirstTab:(0,L.zI)(e,t),isLoading:(0,h.Zo)(e,t)}}),(e=>({onChange:t=>{e((0,m.Wx)()),e((0,p.FB)({direction:t?"inward":"outward"}))},setFlexibilityFilterSelectedTab:t=>{e((0,f.Mw)(t))}}))))(Br);var Wr={margin:"".concat(za.W0.s6," 0 ").concat(za.W0.s3," 0")};const Hr=P.StyleSheet.create({header:{display:"flex",justifyContent:"space-between",gap:za.W0.s6},title:(0,pe.Z)((0,pe.Z)((0,pe.Z)({},U.W.title3),{},{color:H.dp_app_text_base},Wr),{},{whiteSpace:"nowrap",display:"flex",alignItems:"center"}),co2Emissions:(0,pe.Z)({},Wr),exclusiveJourneyBanner:{marginTop:za.W0.s8}});var jr=a(72847);const Ur=e=>{var t=(0,n.useSelector)(S.FD),a=(0,n.useSelector)((e=>(0,E.fE)(e,t))),r=(0,n.useSelector)(Et.vR)===yt.ZP.COACH,i=(0,n.useSelector)((e=>(0,L.p$)(e,t))),s=(0,n.useSelector)((e=>(0,jr.xg)(e,t)));return!a||r?{savings:0,showBanner:!1}:{savings:s===(null==i?void 0:i.amount)?e-(null==i?void 0:i.amount):0,showBanner:!0}};var zr=a(24425);const Jr=er.StyleSheet.create({bannerText:{fontSize:zr.Ro,lineHeight:zr.ke},wrapper:{backgroundColor:H.dp_app_message_secondary_background,border:"1px",borderRadius:Aa.sC,padding:"".concat(V.eR," ").concat(V.Ui)}});const Vr=e=>{var{price:t,currency:a}=e,{sendTracking:r}=(0,at.rS)();return(0,w.useEffect)((()=>{r((0,at.k1)({category:"exclusive journey",action:"banner",label:"",coreProperties:{}}))}),[r]),w.createElement("div",{role:"banner",className:(0,P.css)(Jr.wrapper),"data-test":"exclusive-journey-banner"},w.createElement("div",{className:(0,P.css)(Jr.bannerText),"data-test":"exclusive-journey-banner-text"},w.createElement(w.Fragment,null,"🎉"," ",t>0?w.createElement(vr.ZP,{id:"page.results.exclusiveJourneyBanner.cheapest",values:{price:w.createElement(B.Z,{key:"cheapestJourneyPrice",value:t,currency:a})},tagsMap:{b:br.Z}}):w.createElement(re.FormattedMessage,{id:"page.results.exclusiveJourneyBanner.alternative"}))))};var Gr=a(93776),Xr=a(9246),Qr=e=>{var{origin:t,destination:a}=Dt(e);if(!t||!a)return!1;var r=(0,L.Nx)(t),n=(0,L.Nx)(a);return Boolean(!r||!n||r===n)};const Yr=e=>{var t,a,{selectedJourney:r,sections:i,showComforts:s,comfortOptions:l,showFlexibilityFilter:o,totalEmissionsFromAllLegs:d,totalPassengersCount:m,comfortClassJourneyDetails:u,isInwardView:f}=e,{isInfinitaBistroIncluded:p,trigger:g}=hr(u.legs.map((e=>({id:e.id,comforts:e.comforts}))),null==r||null===(t=r.firstAlternativeContainer)||void 0===t?void 0:t.hash,null==r?void 0:r.hash,null==r?void 0:r.journeyId,Boolean(f)),v=(0,_r.Jp)(),b=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_SIMPLE_SEARCH_RESULTS_PAGE))),h=(0,n.useSelector)(E.VS),y=(0,n.useSelector)(E.NA),{co2EmissionComparison:_,co2EmissionInGrams:C}=(0,n.useSelector)((e=>(0,Cr.Gz)(e,(0,S.FD)(e)))),T=(0,n.useSelector)(Dr.HG),{experimentsDict:N}=(0,Ct.zM)(["experimentsDict"]),A=(0,n.useDispatch)(),{sendTracking:F}=(0,at.rS)(),I=(0,St.k)(),{showClassComparisonBannerOnDesktop:L,hasMoreThanOneComfortOption:O,isClassComparisonModalDesktopVariant:D}=_t(r,h,y),R=(0,n.useSelector)(Et.vR)===yt.ZP.COACH,{isPending:Z}=(0,Xr._)(R?Wa.AvailableTransportModes.COACH:Wa.AvailableTransportModes.MIXED),{getCheapestReturnJourneyPriceWithSameCarrierOut:k,getIsExclusiveJourney:B}=(0,Gr.a)(Z),{savings:M,showBanner:W}=Ur(k(r)),{enableExclusiveJourney:H}=(0,ht.x)(),j=(0,n.useSelector)((e=>(0,bt.eB)(e,xt.zA.ENABLE_EXCLUSIVE_JOURNEY)));L&&(0,rt.QH)(N,[xt.zA.ENABLE_CLASS_COMPARISON_MODAL_ON_DESKTOP]);var U=B(r),z=W&&U&&H&&j;return r?w.createElement("div",null,z&&w.createElement("div",{className:(0,P.css)(Hr.exclusiveJourneyBanner)},w.createElement(Vr,{price:M,currency:null==r||null===(a=r.standardAlternativeContainer)||void 0===a||null===(a=a.fullPrice)||void 0===a?void 0:a.currencyCode})),w.createElement("div",{className:(0,P.css)(Hr.header)},w.createElement("div",{className:(0,P.css)(Hr.title)},w.createElement(Sr.C,{typeStyle:"title2",as:"h3",color:"base"},w.createElement(re.FormattedMessage,{id:"page.europe.farePresentation.selectedJourney"}))),v&&w.createElement(w.Fragment,null,!b&&w.createElement("div",{className:(0,P.css)(Hr.co2Emissions)},w.createElement(_r.qF,{rounded:!0,variant:"base",co2EmissionComparison:_,co2EmissionInGrams:C,destination:null==y?void 0:y.name,origin:null==h?void 0:h.name,isUK:T})),b&&!!d&&w.createElement("div",{className:(0,P.css)(Hr.co2Emissions)},w.createElement(qt.Z,{emissionsInGrams:d,totalPassengersCount:m})))),w.createElement(Or,null),p&&w.createElement(Er,{onClick:g}),o?w.createElement(w.Fragment,null,w.createElement("div",{className:(0,P.css)(Hr.title),"data-test":"flex-filter-title"},w.createElement(Sr.C,{typeStyle:"title2",as:"h2",color:"base"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.flexibilityFilter.title"}))),w.createElement(Mr,{"data-test":"flex-filter"})):w.createElement("div",{className:(0,P.css)(Hr.title),"data-test":"ticket-conditions-title"},w.createElement(Sr.C,{typeStyle:"title2",as:"h2",color:"base"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.ticketConditions.title"}))),w.createElement(fr,null),s&&w.createElement("fieldset",{"aria-labelledby":"comfort-options-title"},w.createElement("div",{className:(0,P.css)(Hr.title),"data-test":"comfort-options-title",id:"comfort-options-title"},w.createElement(Sr.C,{typeStyle:"title2",as:"h2",color:"base"},w.createElement(re.FormattedMessage,{id:"customerJourneySummary.europe.comfortOptions.title"}))),L&&O&&D&&w.createElement(vt,{onClick:()=>{A((0,x.Ll)({type:c.e.CLASS_COMPARISON_MODAL,params:{}})),F((0,at.k1)({category:"class comparison",action:"expanded",label:"",coreProperties:{}}))}}),i.map((e=>{var t,a=!(i.length>1)&&1===e.legs.length,n=!e.mixedLegComforts&&e.legs.length>1,s=a||n,o=s?Qr(e.legs):e.legs.some((e=>Qr([e]))),c=null==I||null===(t=I[0])||void 0===t?void 0:t.label;return w.createElement("div",{key:e.id},s?w.createElement(w.Fragment,null,w.createElement(Bt,{key:e.id,comfortOptions:l,legs:e.legs,journey:r,"data-test":"separate-simple-comfort-options",showFullStationNames:o,showClassComparisonBanner:D&&!O&&L,travelClassType:c})):e.legs.map((t=>w.createElement(Bt,{key:"".concat(e.id,"-").concat(t.id),comfortOptions:l,legs:[t],journey:r,"data-test":"mapped-simple-comfort-options",showFullStationNames:o}))))})))):w.createElement("div",{className:(0,P.css)(Hr.title)},w.createElement(Sr.C,{typeStyle:"title2",as:"h2",color:"base"},w.createElement(re.FormattedMessage,{id:"page.matrix.selectJourney"})))};var qr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Boolean(t.length&&e.length&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Boolean(e.length&&t.length&&function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((t,a)=>{var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return e.legs&&e.legs.length&&e.legs.forEach((e=>t.forEach((t=>t&&t.legIds.includes(e.id)&&!a.includes(t.comfort)&&a.push(t.comfort))))),a}(a,e);return r.length&&t.push(r),t}),[])}(e,t).every((e=>1===e.length&&!e[0].allowsComfortChoice)))}(e,t))};const Kr=(0,s.compose)(i.EN,(0,n.connect)((e=>{var t=(0,S.FD)(e),a=(0,_.U)(e,t),r=(0,L.Eb)(e,t),n=(0,L.PQ)(e,t),i=(0,C._)(e,t),s=(0,L.rF)(e,t),l=(0,L.PW)(e,t),c=(0,E.n$)(e);return{comfortOptions:r,showComforts:qr(s,r),sections:s,selectedJourney:a?(0,o.XQ)(e,t).find((e=>e.hash===a.journeyHash)):void 0,showFlexibilityFilter:!n&&!i,totalEmissionsFromAllLegs:(0,xr.g)(l),totalPassengersCount:c}})))(Yr);var $r=e=>"//maps.google.com/?q="+encodeURIComponent(e),en=e=>e.isEnableFarePresentationActive&&"mobile"!==e.deviceType?w.createElement(Kr,e):e.shouldShowCarrierSpecificJourneyPlan?w.createElement(He,e):w.createElement(yr,e);const tn=w.memo(en,N.fS0);const an=(0,s.compose)(i.EN,r.FZ,(0,n.connect)((e=>{var t=(0,S.FD)(e),a=(0,_.U)(e,t),r=(0,L.Eb)(e,t),n=(0,L.rF)(e,t),i=(0,L.gc)(e,t),s=(0,L.Gb)(e,t),l=(0,L.td)(e,t),c=(0,L._h)(e,t);return{selectedAlternative:a,journey:{sections:n},shouldShowConformTitle:n.map((e=>r.filter((t=>JSON.stringify(e.legs.map((e=>e.id)))===JSON.stringify(t.legIds))))).some((e=>e.length>0&&(e.length>1||!!e[0].comfort.allowsComfortChoice))),selectedJourney:!!a&&(0,o.XQ)(e,t).find((e=>e.hash===a.journeyHash)),isEuropeCoachExperience:(0,E.j3)(e),hasAllEurostarRows:(0,C._)(e,t),isPaginating:(0,h.Zo)(e,t),hasJourneyOnlyOneFareAvailable:(0,L.PQ)(e,t),isSemiFlexibleCheapestFare:(0,L.zI)(e,t),cheapestAlternative:i,cheapestSemiFlexAlternative:s,cheapestFlexibleAlternative:l,currentSelectedAlternativePriceWithSmartPriceInfo:c,journeyAlternatives:a?((0,y.s5)(e,t).find((e=>!!e.find((e=>e.journeyHash===a.journeyHash&&!!e.price))))||[]).sort(((e,t)=>e.price.amount-t.price.amount)):[],semiFlexibleTabDeltaPrice:(0,L.yL)(e,t),flexibleTabDeltaPrice:(0,L.FU)(e,t),shouldShowCarrierSpecificJourneyPlan:(0,L.Ww)(b.Wl.CSFP_CARRIERS_FILTER)(e,t),comfortClassJourneyDetails:(0,T.tN)(e,t),selectedComfort:I(e,t),isInwardView:(0,E.fE)(e,t),displayFlexibilityTabPriceDeltas:(0,L.mf)(e,t),passengerCount:(0,E.JU)(e),totalPassengersCount:(0,E.n$)(e),isEnableFarePresentationActive:(0,v.eZ)(e),flexibilityFilterSelectedTab:(0,L.Dg)(e,t),coreProperties:(0,g.zc)(e)}}),(e=>({onFlexibilityChange:t=>{e((0,m.Wx)()),e((0,p.FB)({direction:t?"inward":"outward"}))},onComfortChange:()=>{e((0,m.MK)())},onSelectAlternativeFromAlternative:(t,a,r,n)=>{e((0,p.ac)({action:"user"}));var i={[n?"selectedInward":"selectedOutward"]:{travelClass:t,journeyHash:a,alternativeHash:r}};e((0,m.HE)(i,{mobileSelection:!0})),e((0,p.FB)({direction:n?"inward":"outward"}))},onRequestOpenJourneySummaryModal:t=>{e((0,x.Ll)({type:c.e.JOURNEY_SUMMARY,params:t}))},onSelectAlternative:t=>{e((0,m.HE)(t,{ignoreCache:!0}))},onFlexibilityDescriptionDetailsToggle(t,a){t&&e((0,d.$)({eventType:l.EventTypes.GENERIC_EVENT,analyticsEventType:l.EventTypes.GENERIC_EVENT,analyticsEventPayload:{event:"generic event",eventProperties:{eventAction:"ticket condition clicked",eventCategory:"results",eventLabel:"ticket condition clicked"},coreProperties:a}}))},setComfortFilterSelectedTab:t=>{e((0,u.xC)(t))},setFlexibilityFilterSelectedTab:t=>{e((0,f.Mw)(t))}}))))(tn)},31942:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(98318),n=a(50093),i=a(29901);const s=e=>{var{stroke:t="#00705F"}=e;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:t},i.createElement("path",{d:"M13.14 15.418c-1.923 2.093-6.332 2.08-7.374-.93-.805-2.33.371-4.988 2.718-6.304 2.362-1.324 5.19-1.649 10.519-.162 0 0-1.878 1.328-3.234 3.49-.781 1.245-1.46 2.635-2.628 3.906z"}),i.createElement("path",{strokeLinecap:"round",d:"M5.437 19.02a18.807 18.807 0 0 1 1.975-3.887c1.153-1.758 2.435-3.13 3.844-4.114"})))};var l=a(60654),o=a(75853),c=a(99366);const d=n.StyleSheet.create({co2Emission:{display:"flex",alignItems:"center",fontSize:c.cp.mini.fontSize,color:r.dp_brand_neutral_dim}});const m=e=>{var t,{emissionsInGrams:a,totalPassengersCount:c}=e,{portal:m}=(0,o.x)(),u=m===l.Portal.TRAINLINE?r.dp_brand_primary_dim:r.dp_app_positive_dull;return i.createElement("div",{className:(0,n.css)(d.co2Emission),"data-test":"old-co2-emissions"},i.createElement(s,{stroke:u}),i.createElement("span",null,(t=c*a,Math.round(t/1e3*10)/10)," kg CO",i.createElement("sub",null,"2")))}},61130:(e,t,a)=>{a.d(t,{AX:()=>s,TO:()=>n});var r=a(82768),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.jj$)((0,r.xHg)(e))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return JSON.stringify(e.map((e=>e.id)))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return!1;var[t,...a]=e,r=i(t);return a.every((e=>i(e)===r))}},30119:(e,t,a)=>{a.d(t,{g:()=>r});var r=e=>(e=>e.every((e=>e.co2EmissionInGramsPerPassenger)))(e)?e.reduce(((e,t)=>(t.co2EmissionInGramsPerPassenger?t.co2EmissionInGramsPerPassenger:0)+e),0):void 0},45165:(e,t,a)=>{a.d(t,{Nm:()=>_,ZP:()=>A});var r=a(85924),n=a(50093),i=a(29901),s=a(98184),l=a(72222),o=a(55640),c=a(67292),d=a(80911),m=a(32443),u=a(98318),f=a(8888),p=a(23394),g=a(52068),v=f.Z.sizes.spacersValues.px12,b=f.Z.sizes.spacersValues.px2,{breakpoints:E}=f.Z;const h=n.StyleSheet.create({root:{borderRadius:p.E0.l,backgroundColor:u.dp_app_backdrop_dull,padding:"".concat(f.Z.sizes.spacers.px12," ").concat(f.Z.sizes.spacers.m),[E.medium.max]:{padding:"".concat(f.Z.sizes.spacers.px12," ").concat(f.Z.sizes.spacers.px20," ").concat(f.Z.sizes.spacers.px16)}},rootSpacer:{margin:"".concat(f.Z.sizes.spacers.px12," 0 ").concat(f.Z.sizes.spacers.px8)},direction:{fontSize:g.W.body.fontSize,[E.medium.max]:{fontSize:f.Z.sizes.spacers.px18}},journey:{margin:"".concat(f.Z.sizes.spacers.px12," 0"),paddingLeft:"".concat(v,"rem"),lineHeight:g.W.body.fontSize},callingPoint:{fontSize:g.W.body.fontSize,fontWeight:"bold",position:"relative",display:"flex",alignItems:"baseline",":first-child":{position:"relative",":after":{content:'""',position:"absolute",left:"".concat(-v/2-b/2,"rem"),top:"0.5em",bottom:"-0.5em",borderLeft:"".concat(b,"rem solid ").concat(u.dp_brand_secondary_dull)}},[E.medium.max]:{fontSize:f.Z.sizes.spacers.px16}},callingTime:{position:"relative",margin:"0 ".concat(f.Z.sizes.spacers.m),":before":{content:'""',position:"absolute",left:"".concat(-f.Z.sizes.spacersValues.m-v/2,"rem"),top:"50%",width:"".concat(v,"rem"),height:"".concat(v,"rem"),marginLeft:"".concat(-v/2,"rem"),marginTop:"".concat(-v/2,"rem"),background:u.dp_brand_secondary_dull,borderRadius:"".concat(v/2,"rem")}},changes:{fontWeight:"normal",color:u.dp_app_text_subdued,whiteSpace:"nowrap",margin:"".concat(f.Z.sizes.spacers.px12," 0"),[E.medium.max]:{margin:"".concat(f.Z.sizes.spacers.px20," 0"),fontSize:g.W.body.fontSize}},separator:{display:"none",[E.medium.max]:{display:"block",marginTop:f.Z.sizes.spacers.px24,marginBottom:f.Z.sizes.spacers.px14}},extras:{display:"flex",justifyContent:"space-between",marginTop:f.Z.sizes.spacers.xs,fontSize:g.W.body.fontSize,color:u.dp_brand_neutral_duller}});var y=a(64321),x=n.StyleSheet.create({root:{appearance:"none",background:"transparent",fontSize:g.W.body.fontSize,color:u.dp_app_link_base,cursor:"pointer",textDecoration:"none",":hover":{color:u.dp_app_link_hover,textDecoration:"underline"},":active":{color:u.dp_app_link_pressed,textDecoration:"underline"},":focus":{color:u.dp_app_link_pressed,textDecoration:"underline"}}});const S=e=>i.createElement("button",(0,y.Z)({},e,{className:(0,n.css)(x.root)}));var _=function(e){return e.OUTWARD="OUTWARD",e.INWARD="INWARD",e}({}),C=e=>e.map((e=>e.extraType.name+(e.selectedQuantity>1?" x".concat(e.selectedQuantity):""))).join(", "),T=e=>e.reduce(((e,t)=>e+t.price.amount*t.selectedQuantity),0);class N extends i.Component{constructor(){super(...arguments),(0,r.Z)(this,"handleTicketConditionsClick",(e=>{e.preventDefault(),this.props.openTicketConditions&&this.props.openTicketConditions()})),(0,r.Z)(this,"handleTripSummaryClick",(e=>{e.preventDefault(),this.props.openTripSummary()}))}render(){var e,t,{direction:a,legs:r=[],extras:u=[],openTicketConditions:f,isMobile:p}=this.props,g=r[0],v=null==g||null===(e=g.origin)||void 0===e?void 0:e.name,b=null==g?void 0:g.localDepartAt,E=new Date((0,c.Qb)(b)),y=r[r.length-1],x=null==y||null===(t=y.destination)||void 0===t?void 0:t.name,_=null==y?void 0:y.localArriveAt,N=new Date((0,c.Qb)(_)),A=r.length-1,F=u.filter((e=>e.extraType.group===d.nj.SEAT_SELECTION_FROM_SEAT_MAP)),I=u.filter((e=>e.extraType.group===d.nj.SEAT_SELECTION_NO_SEAT_MAP)),L=u.filter((e=>e.extraType.group!==d.nj.SEAT_SELECTION_NO_SEAT_MAP&&e.extraType.group!==d.nj.SEAT_SELECTION_FROM_SEAT_MAP)),w=f,O=F.length>0,D=L.length>0,R=I.length>0;return i.createElement("div",{className:(0,n.css)(h.root,!p&&h.rootSpacer),onClick:p?this.handleTripSummaryClick:void 0},i.createElement("h4",{"data-test":"journey-summary-".concat(a),className:(0,n.css)(h.direction)},i.createElement(s.FormattedMessage,{id:"stickySidebar.journeySummary.direction.".concat(a)})," ",i.createElement(s.FormattedDate,{value:E,weekday:"short",timeZone:"UTC"})," ",i.createElement(s.FormattedDate,{value:E,day:"numeric",month:"short",timeZone:"UTC"})),i.createElement("div",{className:(0,n.css)(h.journey)},i.createElement("div",{className:(0,n.css)(h.callingPoint)},i.createElement("div",{className:(0,n.css)(h.callingTime),"data-test":"journey-summary-departure-time"},i.createElement(s.FormattedTime,{value:E,"data-test":"departure-date",timeZone:"UTC"})),i.createElement("div",{"data-test":"journey-summary-origin"},v,i.createElement("div",{className:(0,n.css)(h.changes)},i.createElement(m.Z,{start:b,end:_}),","," ",i.createElement(S,{onClick:p?void 0:this.handleTripSummaryClick,"data-test":"cjs-changes-link"},i.createElement(s.FormattedMessage,{id:"stickySidebar.journeySummary.changes",values:{changes:A}}))))),i.createElement("div",{className:(0,n.css)(h.callingPoint),"data-test":"journey-summary-destination"},i.createElement("div",{className:(0,n.css)(h.callingTime),"data-test":"journey-summary-arrival-time"},i.createElement(s.FormattedTime,{value:N,timeZone:"UTC"})),x)),w&&i.createElement(i.Fragment,null,i.createElement(o.Z,{styleSheet:h.separator}),i.createElement(S,{onClick:this.handleTicketConditionsClick},i.createElement(s.FormattedMessage,{id:"stickySidebar.journeySummary.ticketConditions"}))),O&&i.createElement("div",{className:(0,n.css)(h.extras)},i.createElement(s.FormattedMessage,{id:"stickySidebar.journeySummary.extras.seatReservation",defaultMessage:"Seat reservation"}),i.createElement(l.Z,{value:T(F),currency:F[0].price.currencyCode})),D&&i.createElement("div",{className:(0,n.css)(h.extras)},i.createElement(s.FormattedMessage,{id:"stickySidebar.journeySummary.extras",children:e=>"".concat(e,": ").concat(C(L))}),i.createElement(l.Z,{value:T(L),currency:L[0].price.currencyCode})),R&&i.createElement("div",{className:(0,n.css)(h.extras)},C(I),i.createElement(l.Z,{value:T(I),currency:I[0].price.currencyCode})))}}(0,r.Z)(N,"defaultProps",{direction:_.OUTWARD});const A=N},93120:(e,t,a)=>{a.d(t,{yx:()=>S});var r=a(64321),n=a(50093),i=a(29901),s=a(98184),l=a(67292),o=a(61130),c=a(96885),d=a(98318),m=a(83367),u=a(52068),f=a(23394);const p=n.StyleSheet.create({container:{display:"flex",flexDirection:"column",width:"100%",padding:f.W0.s6},newContainer:{display:"flex",flexDirection:"column",width:"100%",gap:f.W0.s4},detailsPerLeg:{display:"flex",flexDirection:"column",gap:f.W0.s4},fare:{width:"100%"},fareMargin:{marginTop:f.W0.s3,":first-of-type":{marginTop:0}},newFareMargin:{display:"flex",flexDirection:"column",marginTop:f.W0.s3,gap:f.W0.s3,":first-of-type":{marginTop:0}},stationNamesMargin:{marginTop:m.spacers.px24},stationNames:{color:d.dp_app_text_base,fontWeight:u.R.body.weights.bold,fontSize:u.W.title5.fontSize,lineHeight:m.spacers.px24,marginBottom:f.W0.s3},fareName:{color:d.dp_app_text_base,width:"100%",fontSize:u.W.body.fontSize,lineHeight:m.spacers.px21,fontWeight:u.R.body.weights.semiBold,marginBottom:m.spacers.xs},newFareName:{color:d.dp_app_text_base,width:"100%",fontSize:"14px",lineHeight:"21px",fontWeight:600},fareCondition:{width:"100%",color:d.dp_app_text_subtle,lineHeight:m.spacers.px20},bodyMargin:{marginLeft:m.spacers.px48},originDestinationTitle:{fontWeight:700,fontSize:"16px",display:"flex",justifyContent:"space-between"}});var g=a(88543),v=a(19408),b=a(33695),E=a(50453),h=e=>{var{fareTypes:t=[],hasMargin:a,isTermsAndConditionsOnResultsVariant:r}=e;return t.length?i.createElement("div",{className:(0,n.css)(a&&!r&&p.bodyMargin)},t.map(((e,t)=>{var{name:a,conditions:s=[],code:l}=e;return i.createElement("div",{className:(0,n.css)(r?p.newFareMargin:p.fareMargin),"data-test":"pax-breakdown-body-faretype-details-".concat(t),key:t},i.createElement("div",{className:(0,n.css)(r?p.newFareName:p.fareName)},a),s.map(((e,t)=>{var{description:a}=e;return i.createElement("div",{className:(0,n.css)(p.fareCondition),"data-test":"faretype-condition-".concat(l,"-").concat(t),key:t},(0,c.j)(a))})))}))):null},y=e=>{var{origin:t,destination:a,isFirstFare:l,departureDate:o,isTermsAndConditionsOnResultsVariant:c=!1,carrierLogo:d}=e;return t&&a?c?i.createElement(i.Fragment,null,i.createElement("div",{className:(0,n.css)(p.originDestinationTitle),"data-test":"pax-breakdown-body-origin-destination"},i.createElement(s.FormattedMessage,{id:"modal.ticketDetails.direction",values:{origin:t.name,destination:a.name,date:o&&i.createElement(s.FormattedMessage,{id:"dateTimeFormat.date",values:{weekday:i.createElement(s.FormattedDate,{value:o,weekday:"short",timeZone:"UTC"}),day:i.createElement(s.FormattedDate,{value:o,day:"numeric",timeZone:"UTC"}),month:i.createElement(s.FormattedDate,{value:o,month:"short",timeZone:"UTC"}),year:i.createElement(s.FormattedDate,{value:o,year:"numeric",timeZone:"UTC"})}})}}),(null==d?void 0:d.name)&&E.bd[d.name.toLowerCase()]&&i.createElement(E.pl,(0,r.Z)({},d,{testId:"tcs-carrier-logo"})))):i.createElement(s.FormattedMessage,{id:"common.route",values:{origin:t.name,destination:a.name},"data-test":"pax-breakdown-body-origin-destination"},(e=>i.createElement("div",{className:(0,n.css)(p.stationNames,!l&&p.stationNamesMargin),"data-test":"pax-breakdown-body-origin-destination-text"},e))):null},x=e=>{var{legs:t=[],hasMultipleSections:a,isTermsAndConditionsOnResultsVariant:r}=e;return t.length?i.createElement(i.Fragment,null,t.map(((e,s)=>{var{origin:o,destination:c,fareTypes:d,departAt:m,carrierLogo:u}=e,f=new Date((0,l.Qb)(m));return i.createElement("div",{"data-test":"pax-breakdown-body-details-per-leg-".concat(s),key:s,className:(0,n.css)(p.detailsPerLeg)},r?i.createElement(y,{origin:o,destination:c,isFirstFare:0===s,departureDate:f,carrierLogo:u,isTermsAndConditionsOnResultsVariant:r}):(t.length>1||a)&&i.createElement(y,{origin:o,destination:c,carrierLogo:u,isFirstFare:0===s}),i.createElement(h,{fareTypes:d,hasMargin:!0,isTermsAndConditionsOnResultsVariant:r}))}))):null},S=e=>{var{sections:t=[]}=e,a=(0,g.useSelector)((e=>(0,v.eB)(e,b.zA.ENABLE_NEW_TERMS_AND_CONDITIONS_ON_RESULTS)));return t.length?i.createElement("div",{className:(0,n.css)(a?p.newContainer:p.container),"data-test":"paxfarebreakdownbody-container"},t.map(((e,r)=>{var{id:s,legs:c=[]}=e,d=c.map((e=>e.fareTypes)),m=t.length>1;if(c.length&&(0,o.AX)(d)){var{origin:u,departAt:f,carrierLogo:g}=c[0],{destination:v}=c[c.length-1],b={origin:u,destination:v,isFirstFare:0===r,departureDate:new Date((0,l.Qb)(f)),isTermsAndConditionsOnResultsVariant:a,carrierLogo:g};return i.createElement("div",{key:s,className:(0,n.css)(!m&&p.fareMargin)},a||m?i.createElement(i.Fragment,null,i.createElement(y,b),i.createElement(h,{fareTypes:(0,o.TO)(d),hasMargin:m,isTermsAndConditionsOnResultsVariant:a})):i.createElement(h,{fareTypes:(0,o.TO)(d),isTermsAndConditionsOnResultsVariant:a}))}return i.createElement(x,{key:s,legs:c,hasMultipleSections:m,isTermsAndConditionsOnResultsVariant:a})}))):null}},26146:(e,t,a)=>{a.d(t,{Z:()=>S});var r=a(36841),n=a(29901),i=a(98318),s=a(72222),l=a(93902),o=a(14023),c=a(51756),d=a(23198),m=a(31616),u=a(50093),f=a(56674),p=a(8888),g=a(8590);const v=u.StyleSheet.create({labelStyles:{display:"flex",flex:1,justifyContent:"space-between"},verticalAlignText:{alignSelf:"center"},price:{display:"flex",alignItems:"center",flexShrink:0},fullPriceStyles:{color:i.dp_brand_neutral_mid,float:"right",fontSize:"13px",letterSpacing:"-0.16px",lineHeight:g.W0.s4,textDecoration:"line-through"},railcardIcon:{width:g.W0.s4,minWidth:g.W0.s4,marginRight:g.W0.s1,verticalAlign:"middle"},promocodeIcon:{width:g.W0.s4,minWidth:g.W0.s4,marginRight:g.W0.s1,verticalAlign:"middle"}});var{root:b}=f.j,E=(0,m.Z)(f.j,["root"]),h=u.StyleSheet.create((0,d.Z)((0,d.Z)({},E),{},{root:(0,d.Z)((0,d.Z)({},b),{},{marginBottom:p.Z.sizes.spacers.px20})})),y=a(7489),x=a(18353);const S=e=>{var{onClick:t,checked:a,label:d,name:m,testId:u,price:f,fullPrice:p,isPromoCardApplied:g,isRailCardApplied:b,isSmartPrice:E}=e;return n.createElement(n.Fragment,null,n.createElement(l.Z,{name:m,testId:u,styleSheet:h,onClick:t,checked:a},n.createElement("div",{className:(0,r.css)(v.labelStyles)},n.createElement(o.Z,{textType:"small",textWeight:"700",className:(0,r.css)(v.verticalAlignText),testId:"cjs-flexibility-radio-label"},d),n.createElement(o.Z,{textType:"body",textWeight:"600",className:(0,r.css)(v.price)},p&&b&&n.createElement(c.Z,{fill:i.dp_brand_neutral_dullest,className:(0,r.css)(v.railcardIcon)}),p&&g&&n.createElement(y.Z,{fill:i.dp_brand_neutral_dullest,className:(0,r.css)(v.promocodeIcon)}),f&&n.createElement(x.gA,{isSmartPrice:Boolean(E)},n.createElement(s.Z,{value:f.amount,currency:f.currencyCode,hideDecimalsForIntegers:Boolean(E),testId:"cjs-flexibility-radio-price"}))))),p&&n.createElement(o.Z,{className:(0,r.css)(v.fullPriceStyles),fontFamily:"brand"},n.createElement(s.Z,{value:p.amount,currency:p.currencyCode,testId:"cjs-flexibility-radio-full-price"})))}},80934:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(64321),n=a(29901),i=a(77572);function s(e){return t=>n.createElement(i.Z.Consumer,null,(a=>{var{filters:i,setDirectTrainFilter:s,filteredJourneys:l,setFilteredJourneys:o}=a;return n.createElement(e,(0,r.Z)({},t,{filters:i,setDirectTrainFilter:s,filteredJourneys:l,setFilteredJourneys:o}))}))}},71707:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(98318),n=a(50093),i=a(29901),s=a(98184),l=a(7489),o=a(23394);const c=n.StyleSheet.create({container:{textAlign:"center",color:r.dp_app_text_base,lineHeight:"20px",padding:o.W0.s3,borderTop:"1px solid ".concat(r.dp_app_border_base),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{marginRight:o.W0.s1,verticalAlign:"middle",height:o.W0.s6,width:o.W0.s6}});const d=e=>{var{}=e;return i.createElement("div",{className:(0,n.css)(c.container)},i.createElement(s.FormattedMessage,{id:"customerJourneySummary.promoAppliedWithIcon",values:{icon:i.createElement(l.Z,{fill:r.dp_brand_neutral_dullest,className:(0,n.css)(c.icon)})}}))}},55392:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(98318),n=a(50093),i=a(29901),s=a(98184),l=a(51756),o=a(23394);const c=n.StyleSheet.create({container:{textAlign:"center",color:r.dp_app_text_base,lineHeight:"20px",padding:o.W0.s3},icon:{marginRight:o.W0.s2,verticalAlign:"middle"}});const d=e=>{var{uniqueCardTypeNames:t}=e,a=1===t.length;return i.createElement("div",{className:(0,n.css)(c.container)},i.createElement(s.FormattedMessage,{id:a?"customerJourneySummary.railcardApplied":"customerJourneySummary.multipleRailcardsApplied",values:{icon:i.createElement(l.Z,{fill:r.dp_brand_neutral_dullest,className:(0,n.css)(c.icon)}),railcardDescription:a?t[0]:void 0}}))}},7088:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(50093),n=a(29901),i=a(98184),s=a(65250),l=a(66985),o=a(14023);const c=r.StyleSheet.create({splitSaveButtonContainer:{display:"flex",alignItems:"flex-start"},splitSaveText:{marginLeft:"4px",paddingTop:"3px"}});var d=a(75853),m=a(56429);const u=e=>{var{textType:t="mini",isFirstClassJourney:a}=e,{portal:u}=(0,d.x)(),f=a?"splitsave.firstClass":"splitsave.text";return n.createElement("span",{"data-test":"split-save-label",className:(0,r.css)(c.splitSaveButtonContainer)},n.createElement("span",null,(0,m.L)(u)?n.createElement(s.Z,{viewBox:"0 0 24 24",width:"21.23px"}):n.createElement(l.Z,{width:"21.23px"})),n.createElement(o.Z,{textType:t,as:"span",className:(0,r.css)(c.splitSaveText)},n.createElement(i.FormattedMessage,{id:f})))}},85777:(e,t,a)=>{a.d(t,{E0:()=>c,ZP:()=>d});var r=a(46206),n=a(57243),i=a(9187),s=a(70755),l=a(51059),o=a(5899),c="BOOKING_FEE_ANALYTICS";const d=(e,t)=>{var{getState:a}=t;return e.ofType(c).pipe((0,n.U)((()=>{var e=(0,l.Wc)(a()),t=a(),n=(0,s.hn)(t,e),d=(0,o.vz)(t,{query:e,searchRequest:n});return(0,i.$)({eventType:c,analyticsEventType:r.EventTypes.TEST_COUNTED,analyticsEventPayload:d})})))}},91713:(e,t,a)=>{a.d(t,{Ex:()=>o,k_:()=>c});var r=a(46206),n=a(24087),i=a(5899),s=a(70755),l=a(51059),o=(e,t)=>{var{analyticsTabType:a,resultsProducts:n,coreProperties:i,searchProperties:s}=e,[{journeyId:l}]=Object.values(t),o=n.filter((e=>e.journeyId===l));return{eventType:r.EventTypes.RESULTS_EVENT,analyticsEventType:r.EventTypes.RESULTS_EVENT,analyticsEventPayload:{event:"results event",eventProperties:{eventAction:"journey selected",eventCategory:"results",eventLabel:a},resultsProducts:o,coreProperties:i,searchProperties:s}}},c=(e,t)=>{var a=(0,l.Wc)(e),r={query:a,searchRequest:(0,s.hn)(e,a)},o=t===n.ZP.COACH?"coach tab":"train tab",{resultsProducts:c,coreProperties:d,searchProperties:m}=(0,i.bY)(e,r,o);return{analyticsTabType:o,resultsProducts:c,coreProperties:d,searchProperties:m}}},1215:(e,t,a)=>{a.d(t,{d:()=>m,g:()=>d});var r=a(56415),n=a(36592),i=a(9187),s=a(72750),l=a(94018),o=a(91713),c="JOURNEY_SELECTED",d=(0,n.ul)(c),m=(e,t)=>e.ofType(c).pipe((0,r.zg)((e=>{var{payload:{selections:a,mobileSelection:r}}=e,n=t.getState(),c=(0,l.vR)(n),d=(0,o.k_)(n,c),m=(0,o.Ex)(d,a);return[(0,s.HE)(a,{mobileSelection:r}),r&&(0,i.$)(m)]})))},26936:(e,t,a)=>{a.d(t,{Ej:()=>F,GX:()=>N,VF:()=>w,Yf:()=>L,p7:()=>C,vd:()=>_});var r=a(31616),n=a(23198),i=a(37719),s=a(55265),l=a(87582),o=a(57243),c=a(94431),d=a(7185),m=a(85768),u=a(53638),f=a(69188),p=a(48500),g=a(36592),v=a(40939),b=a(51059),E=a(97819),h=a(11620),y=["state"],x=["visibleAlts","selectedOutward","selectedInward"],S="FOCUS_RETURN_DATETIMEPICKER",_=(0,g.RW)(S),C=e=>e.ofType(S).pipe((0,o.U)((()=>(0,m.KB)())),(0,c.h)((()=>!1))),T="SHOW_MATRIX",N=(0,g.RW)(T),A="MATRIX_BACK",F=(0,g.RW)(A),I="RECONCILE_SELECTIONS_WITH_ONSCREEN",L=(0,g.RW)(I),w=(0,s.l)(((e,t)=>{var{getState:a}=t;return e.ofType(T).pipe((0,o.U)((()=>a())),(0,o.U)((e=>({state:e,query:(0,n.Z)((0,n.Z)({},(0,b.fV)(e)),{},{showMatrix:"true"})}))),(0,d.w)((e=>{var{state:t,query:a}=e;return[(0,i.VF)({pathname:(0,b.m7)(t),search:u.Z.stringifyQuery(a)})]})))}),((e,t)=>{var{getState:a}=t;return e.ofType(A).pipe((0,o.U)((()=>a())),(0,o.U)((e=>({pathname:(0,b.m7)(e),query:(0,b.fV)(e),showNSRMatrix:(0,b.O3)(e),homepage:(0,f.NT)((0,v.dX)(e))}))),(0,d.w)((e=>{var{pathname:t,query:a,showNSRMatrix:r,homepage:s}=e;return(0,l.of)(r?(0,i.gx)({pathname:t,search:u.Z.stringifyQuery((0,n.Z)((0,n.Z)({},a),{},{showMatrix:void 0}))}):(0,i.gx)({pathname:s}))})))}),((e,t)=>{var{getState:a}=t;return e.ofType(I).pipe((0,o.U)((()=>({state:a()}))),(0,o.U)((e=>{var{state:t}=e,a=(0,r.Z)(e,y);return(0,n.Z)((0,n.Z)({},a),{},{query:(0,b.fV)(t),visibleAlts:(0,h.kA)(t,(0,E.aj)()),pathname:(0,b.m7)(t),selectedOutward:(0,b.fV)(t).selectedOutward,selectedInward:(0,b.fV)(t).selectedInward})})),(0,o.U)((e=>{var{visibleAlts:t,selectedOutward:a,selectedInward:i}=e,s=(0,r.Z)(e,x);return(0,n.Z)((0,n.Z)({},s),{},{dataLoaded:Object.keys(t).length>0,selectedOutwardAlt:(0,p.yV)(t,a),selectedInwardAlt:(0,p.yV)(t,i),selectedOutward:a,selectedInward:i})})),(0,o.U)((e=>{var{pathname:t,query:a,dataLoaded:r,selectedOutwardAlt:i,selectedInwardAlt:s,selectedOutward:l,selectedInward:o}=e;return{pathname:t,nextQuery:(0,n.Z)((0,n.Z)({},a),{},{selectedOutward:!r||i?l:void 0,selectedInward:!r||s?o:void 0})}})),(0,o.U)((e=>{var{pathname:t,nextQuery:a}=e;return(0,i.gx)({pathname:t,search:u.Z.stringifyQuery(a)})})))}))},96885:(e,t,a)=>{a.d(t,{j:()=>o});var r=a(50093),n=a(29901),i=a(49042),s=r.StyleSheet.create({links:{wordBreak:"break-all"}}),l=/(http\S*)+/g,o=e=>{var t=e.split(l).reduce(((e,t,a)=>{var r=t.match(l),o=[];if(r)if(r[0].endsWith(".")){var c=r[0].slice(0,-1);o.push(n.createElement(i.Z,{key:a,href:c,target:"_blank",rel:"noopener",styleSheet:s.links},c)),o.push(".")}else o.push(n.createElement(i.Z,{key:a,href:r[0],target:"_blank",rel:"noopener",styleSheet:s.links},r[0]));else o.push(t);return[...e,...o]}),[]);return""===t[t.length-1]&&t.pop(),t}}}]);